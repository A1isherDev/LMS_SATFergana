[{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\__tests__\\Login.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\analytics\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[237,251],"text":""},"desc":"Remove unused variable \"Calendar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Brain' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Brain"},"fix":{"range":[274,285],"text":""},"desc":"Remove unused variable \"Brain\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle"},"fix":{"range":[329,345],"text":""},"desc":"Remove unused variable \"CheckCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[358,369],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDate' is defined but never used.","line":24,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"formatDate"},"fix":{"range":[480,491],"text":""},"desc":"Remove unused variable \"formatDate\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":72,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'progressData' is assigned a value but never used.","line":73,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":174,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5754,5757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5754,5757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport AuthGuard from '../../components/AuthGuard';\r\nimport DashboardLayout from '../../components/DashboardLayout';\r\nimport { \r\n  TrendingUp, \r\n  TrendingDown, \r\n  BarChart3, \r\n  Calendar, \r\n  Clock, \r\n  Target, \r\n  Brain, \r\n  BookOpen, \r\n  Award, \r\n  AlertTriangle,\r\n  CheckCircle,\r\n  Activity,\r\n  Filter,\r\n  Download,\r\n  Eye\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { formatDate, formatDateTime, formatPercentage, getSatScoreColor, getSubjectColor } from '../../utils/helpers';\r\nimport { analyticsApi } from '../../utils/api';\r\n\r\ninterface ProgressData {\r\n  date: string;\r\n  homework_completion: number;\r\n  sat_score: number;\r\n  study_time: number;\r\n  flashcard_mastery: number;\r\n}\r\n\r\ninterface WeakArea {\r\n  subject: string;\r\n  subcategory: string;\r\n  accuracy_rate: number;\r\n  total_attempts: number;\r\n  improvement_suggestion: string;\r\n}\r\n\r\ninterface StudySession {\r\n  id: number;\r\n  session_type: string;\r\n  started_at: string;\r\n  duration_minutes: number;\r\n  questions_attempted: number;\r\n  questions_correct: number;\r\n  flashcards_reviewed: number;\r\n}\r\n\r\ninterface PerformanceTrend {\r\n  period: string;\r\n  score: number;\r\n  accuracy: number;\r\n  study_time: number;\r\n}\r\n\r\ninterface StudentSummary {\r\n  total_study_time: number;\r\n  average_sat_score: number;\r\n  homework_completion_rate: number;\r\n  flashcard_mastery_rate: number;\r\n  current_streak: number;\r\n  longest_streak: number;\r\n  weak_areas_count: number;\r\n  strong_areas_count: number;\r\n}\r\n\r\nexport default function AnalyticsPage() {\r\n  const { user } = useAuth();\r\n  const [progressData, setProgressData] = useState<ProgressData[]>([]);\r\n  const [weakAreas, setWeakAreas] = useState<WeakArea[]>([]);\r\n  const [studySessions, setStudySessions] = useState<StudySession[]>([]);\r\n  const [performanceTrends, setPerformanceTrends] = useState<PerformanceTrend[]>([]);\r\n  const [studentSummary, setStudentSummary] = useState<StudentSummary | null>(null);\r\n  const [selectedPeriod, setSelectedPeriod] = useState<'week' | 'month' | 'quarter'>('month');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchAnalyticsData = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        \r\n        // Fetch all analytics data in parallel\r\n        const [\r\n          progressResponse,\r\n          weakAreasResponse,\r\n          sessionsResponse,\r\n          trendsResponse,\r\n          summaryResponse\r\n        ] = await Promise.all([\r\n          analyticsApi.getMyProgress(),\r\n          analyticsApi.getMyWeakAreas(),\r\n          analyticsApi.getMySessions(),\r\n          analyticsApi.getPerformanceTrends({ period_type: selectedPeriod.toUpperCase() }),\r\n          analyticsApi.getStudentSummary()\r\n        ]);\r\n        \r\n        setProgressData(progressResponse.results || progressResponse);\r\n        setWeakAreas(weakAreasResponse.results || weakAreasResponse);\r\n        setStudySessions(sessionsResponse.results || sessionsResponse);\r\n        setPerformanceTrends(trendsResponse.results || trendsResponse);\r\n        setStudentSummary(summaryResponse);\r\n      } catch (error) {\r\n        console.error('Error fetching analytics data:', error);\r\n        // Set empty data on error\r\n        setProgressData([]);\r\n        setWeakAreas([]);\r\n        setStudySessions([]);\r\n        setPerformanceTrends([]);\r\n        setStudentSummary(null);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAnalyticsData();\r\n  }, [selectedPeriod]);\r\n\r\n  const getTrendIcon = (current: number, previous: number) => {\r\n    if (current > previous) return <TrendingUp className=\"h-4 w-4 text-green-500\" />;\r\n    if (current < previous) return <TrendingDown className=\"h-4 w-4 text-red-500\" />;\r\n    return <div className=\"h-4 w-4 bg-gray-400 rounded-full\"></div>;\r\n  };\r\n\r\n  const getAccuracyColor = (accuracy: number) => {\r\n    if (accuracy >= 80) return 'text-green-600';\r\n    if (accuracy >= 60) return 'text-yellow-600';\r\n    return 'text-red-600';\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n              {[...Array(4)].map((_, i) => (\r\n                <div key={i} className=\"bg-white rounded-lg shadow p-6\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n                  <div className=\"h-8 bg-gray-200 rounded w-1/2\"></div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n              <div className=\"bg-white rounded-lg shadow p-6 h-96\"></div>\r\n              <div className=\"bg-white rounded-lg shadow p-6 h-96\"></div>\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Analytics</h1>\r\n              <p className=\"text-gray-600\">Track your progress and identify areas for improvement</p>\r\n            </div>\r\n            <div className=\"flex space-x-3\">\r\n              <button className=\"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\">\r\n                <Download className=\"h-4 w-4 mr-2\" />\r\n                Export Report\r\n              </button>\r\n              <select\r\n                value={selectedPeriod}\r\n                onChange={(e) => setSelectedPeriod(e.target.value as any)}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"week\">Last Week</option>\r\n                <option value=\"month\">Last Month</option>\r\n                <option value=\"quarter\">Last Quarter</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Summary Cards */}\r\n          {studentSummary && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              <div className=\"bg-white rounded-lg shadow p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-600\">Total Study Time</p>\r\n                    <p className=\"text-2xl font-bold text-gray-900\">\r\n                      {Math.round(studentSummary.total_study_time / 60)}h\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">This period</p>\r\n                  </div>\r\n                  <Clock className=\"h-8 w-8 text-blue-600\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-white rounded-lg shadow p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-600\">Average SAT Score</p>\r\n                    <p className={`text-2xl font-bold ${getSatScoreColor(studentSummary.average_sat_score)}`}>\r\n                      {studentSummary.average_sat_score}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">Target: 1400+</p>\r\n                  </div>\r\n                  <Target className=\"h-8 w-8 text-green-600\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-white rounded-lg shadow p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-600\">Homework Completion</p>\r\n                    <p className=\"text-2xl font-bold text-gray-900\">\r\n                      {formatPercentage(studentSummary.homework_completion_rate)}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">On-time rate</p>\r\n                  </div>\r\n                  <BookOpen className=\"h-8 w-8 text-purple-600\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-white rounded-lg shadow p-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-600\">Current Streak</p>\r\n                    <p className=\"text-2xl font-bold text-orange-600\">\r\n                      {studentSummary.current_streak} days\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">Best: {studentSummary.longest_streak}</p>\r\n                  </div>\r\n                  <Award className=\"h-8 w-8 text-orange-600\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Progress Chart */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Progress Overview</h2>\r\n              <button className=\"text-blue-600 hover:text-blue-700\">\r\n                <Eye className=\"h-4 w-4\" />\r\n              </button>\r\n            </div>\r\n            \r\n            {/* Placeholder for actual chart */}\r\n            <div className=\"h-64 bg-gray-50 rounded-lg flex items-center justify-center\">\r\n              <div className=\"text-center\">\r\n                <BarChart3 className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                <p className=\"text-gray-600\">Progress Chart</p>\r\n                <p className=\"text-sm text-gray-500\">Homework completion, SAT scores, study time, and flashcard mastery trends</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n            {/* Weak Areas */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-lg font-semibold text-gray-900\">Areas to Improve</h2>\r\n                <span className=\"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full\">\r\n                  {weakAreas.length} areas\r\n                </span>\r\n              </div>\r\n              \r\n              <div className=\"space-y-4\">\r\n                {weakAreas.map((area, index) => (\r\n                  <div key={index} className=\"border border-gray-200 rounded-lg p-4\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${getSubjectColor(area.subject)}`}>\r\n                          {area.subject}\r\n                        </span>\r\n                        <span className=\"text-sm font-medium text-gray-900\">{area.subcategory}</span>\r\n                      </div>\r\n                      <span className={`text-sm font-medium ${getAccuracyColor(area.accuracy_rate)}`}>\r\n                        {formatPercentage(area.accuracy_rate)}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2 mb-3\">\r\n                      <div \r\n                        className=\"bg-red-500 h-2 rounded-full transition-all duration-300\"\r\n                        style={{ width: `${area.accuracy_rate}%` }}\r\n                      ></div>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center justify-between text-xs text-gray-500 mb-2\">\r\n                      <span>{area.total_attempts} attempts</span>\r\n                      <AlertTriangle className=\"h-3 w-3 text-red-500\" />\r\n                    </div>\r\n                    \r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded p-3\">\r\n                      <p className=\"text-sm text-blue-800\">\r\n                        <strong>Suggestion:</strong> {area.improvement_suggestion}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Recent Study Sessions */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-lg font-semibold text-gray-900\">Recent Study Sessions</h2>\r\n                <span className=\"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full\">\r\n                  {studySessions.length} sessions\r\n                </span>\r\n              </div>\r\n              \r\n              <div className=\"space-y-4\">\r\n                {studySessions.map((session) => (\r\n                  <div key={session.id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                    <div className=\"flex items-center justify-between mb-3\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Activity className=\"h-4 w-4 text-blue-600\" />\r\n                        <span className=\"font-medium text-gray-900\">{session.session_type.replace('_', ' ')}</span>\r\n                      </div>\r\n                      <span className=\"text-sm text-gray-500\">\r\n                        {formatDateTime(session.started_at)}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    <div className=\"grid grid-cols-3 gap-4 text-sm\">\r\n                      <div>\r\n                        <p className=\"text-gray-500\">Duration</p>\r\n                        <p className=\"font-medium text-gray-900\">{session.duration_minutes} min</p>\r\n                      </div>\r\n                      {session.questions_attempted > 0 && (\r\n                        <div>\r\n                          <p className=\"text-gray-500\">Questions</p>\r\n                          <p className=\"font-medium text-gray-900\">\r\n                            {session.questions_correct}/{session.questions_attempted}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                      {session.flashcards_reviewed > 0 && (\r\n                        <div>\r\n                          <p className=\"text-gray-500\">Flashcards</p>\r\n                          <p className=\"font-medium text-gray-900\">{session.flashcards_reviewed}</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Performance Trends */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Performance Trends</h2>\r\n              <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"h-3 w-3 bg-green-500 rounded-full mr-2\"></div>\r\n                  <span>Improving</span>\r\n                </div>\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"h-3 w-3 bg-red-500 rounded-full mr-2\"></div>\r\n                  <span>Declining</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Period\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      SAT Score\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Accuracy\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Study Time\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Trend\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {performanceTrends.map((trend, index) => (\r\n                    <tr key={index}>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                        {trend.period}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        <span className={getSatScoreColor(trend.score)}>{trend.score}</span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        <span className={getAccuracyColor(trend.accuracy)}>\r\n                          {formatPercentage(trend.accuracy)}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        {trend.study_time} min\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        <div className=\"flex items-center\">\r\n                          {index > 0 && getTrendIcon(trend.score, performanceTrends[index - 1].score)}\r\n                          {index === 0 && <span className=\"text-gray-400\">â€”</span>}\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\classes\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[288,298],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Mail' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":7,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Mail"},"fix":{"range":[313,322],"text":""},"desc":"Remove unused variable \"Mail\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Edit' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":7,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Edit"},"fix":{"range":[349,358],"text":""},"desc":"Remove unused variable \"Edit\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Trash2"},"fix":{"range":[358,369],"text":""},"desc":"Remove unused variable \"Trash2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDateTime' is defined but never used.","line":24,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"formatDateTime"},"fix":{"range":[500,516],"text":""},"desc":"Remove unused variable \"formatDateTime\"."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'getMockClassDetail'. Either include it or remove the dependency array.","line":113,"column":6,"nodeType":"ArrayExpression","endLine":113,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [classId, getMockClassDetail]","fix":{"range":[2856,2865],"text":"[classId, getMockClassDetail]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'studentId' is defined but never used.","line":196,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":196,"endColumn":41},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":229,"column":60,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6338,6381],"text":"The class you&apos;re looking for doesn't exist."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6338,6381],"text":"The class you&lsquo;re looking for doesn't exist."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6338,6381],"text":"The class you&#39;re looking for doesn't exist."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6338,6381],"text":"The class you&rsquo;re looking for doesn't exist."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":229,"column":81,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6338,6381],"text":"The class you're looking for doesn&apos;t exist."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6338,6381],"text":"The class you're looking for doesn&lsquo;t exist."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6338,6381],"text":"The class you're looking for doesn&#39;t exist."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6338,6381],"text":"The class you're looking for doesn&rsquo;t exist."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":336,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":336,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10867,10870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10867,10870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport AuthGuard from '@/components/AuthGuard';\r\nimport DashboardLayout from '@/components/DashboardLayout';\r\nimport { \r\n  ArrowLeft,\r\n  Users,\r\n  BookOpen,\r\n  Calendar,\r\n  Clock,\r\n  TrendingUp,\r\n  Mail,\r\n  UserPlus,\r\n  UserMinus,\r\n  Edit,\r\n  Trash2,\r\n  Award,\r\n  Target,\r\n  BarChart3\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { formatDate, formatDateTime } from '@/utils/helpers';\r\n\r\ninterface Student {\r\n  id: number;\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  sat_score?: number;\r\n  homework_completion_rate?: number;\r\n  study_streak?: number;\r\n}\r\n\r\ninterface Homework {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  due_date: string;\r\n  total_questions: number;\r\n  difficulty_level: 'EASY' | 'MEDIUM' | 'HARD';\r\n  is_published: boolean;\r\n  submission_count: number;\r\n  average_score?: number;\r\n}\r\n\r\ninterface ClassDetail {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  teacher: {\r\n    id: number;\r\n    first_name: string;\r\n    last_name: string;\r\n    email: string;\r\n  };\r\n  students: Student[];\r\n  homework: Homework[];\r\n  start_date: string;\r\n  end_date: string;\r\n  is_active: boolean;\r\n  max_students: number;\r\n  created_at: string;\r\n  class_stats: {\r\n    average_sat_score: number;\r\n    average_completion_rate: number;\r\n    total_study_time: number;\r\n    active_students: number;\r\n  };\r\n}\r\n\r\nexport default function ClassDetailPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const classId = params?.id as string;\r\n  \r\n  const [classDetail, setClassDetail] = useState<ClassDetail | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'students' | 'homework' | 'analytics'>('overview');\r\n\r\n  useEffect(() => {\r\n    const fetchClassDetail = async () => {\r\n      try {\r\n        const response = await fetch(`/api/classes/${classId}/`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setClassDetail(data);\r\n        } else {\r\n          // Fallback to mock data\r\n          const mockData: ClassDetail = getMockClassDetail();\r\n          setClassDetail(mockData);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching class detail:', error);\r\n        const mockData: ClassDetail = getMockClassDetail();\r\n        setClassDetail(mockData);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (classId) {\r\n      fetchClassDetail();\r\n    }\r\n  }, [classId]);\r\n\r\n  const getMockClassDetail = (): ClassDetail => ({\r\n    id: parseInt(classId),\r\n    name: 'SAT Math - Advanced',\r\n    description: 'Advanced mathematics preparation for SAT with focus on algebra, geometry, and data analysis. This course covers all topics tested in the SAT math section.',\r\n    teacher: {\r\n      id: 1,\r\n      first_name: 'John',\r\n      last_name: 'Smith',\r\n      email: 'john.smith@satfergana.com'\r\n    },\r\n    students: [\r\n      {\r\n        id: 2,\r\n        first_name: 'Alice',\r\n        last_name: 'Johnson',\r\n        email: 'alice@example.com',\r\n        sat_score: 1250,\r\n        homework_completion_rate: 85,\r\n        study_streak: 12\r\n      },\r\n      {\r\n        id: 3,\r\n        first_name: 'Bob',\r\n        last_name: 'Wilson',\r\n        email: 'bob@example.com',\r\n        sat_score: 1180,\r\n        homework_completion_rate: 92,\r\n        study_streak: 8\r\n      },\r\n      {\r\n        id: 4,\r\n        first_name: 'Carol',\r\n        last_name: 'Davis',\r\n        email: 'carol@example.com',\r\n        sat_score: 1320,\r\n        homework_completion_rate: 78,\r\n        study_streak: 15\r\n      }\r\n    ],\r\n    homework: [\r\n      {\r\n        id: 1,\r\n        title: 'Algebra Practice Set #5',\r\n        description: 'Complete exercises on quadratic equations and factoring',\r\n        due_date: '2025-02-05T23:59:59Z',\r\n        total_questions: 25,\r\n        difficulty_level: 'MEDIUM',\r\n        is_published: true,\r\n        submission_count: 2,\r\n        average_score: 88\r\n      },\r\n      {\r\n        id: 2,\r\n        title: 'Geometry Review',\r\n        description: 'Review triangles, circles, and coordinate geometry',\r\n        due_date: '2025-02-10T23:59:59Z',\r\n        total_questions: 30,\r\n        difficulty_level: 'EASY',\r\n        is_published: true,\r\n        submission_count: 1,\r\n        average_score: 92\r\n      }\r\n    ],\r\n    start_date: '2025-01-15',\r\n    end_date: '2025-05-15',\r\n    is_active: true,\r\n    max_students: 30,\r\n    created_at: '2025-01-10T10:00:00Z',\r\n    class_stats: {\r\n      average_sat_score: 1250,\r\n      average_completion_rate: 85,\r\n      total_study_time: 2450, // minutes\r\n      active_students: 3\r\n    }\r\n  });\r\n\r\n  const handleEnrollStudent = () => {\r\n    // TODO: Implement student enrollment\r\n    alert('Student enrollment feature coming soon!');\r\n  };\r\n\r\n  const handleRemoveStudent = (studentId: number) => {\r\n    // TODO: Implement student removal\r\n    alert('Remove student feature coming soon!');\r\n  };\r\n\r\n  const handleCreateHomework = () => {\r\n    router.push(`/homework/create?class_id=${classId}`);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-4\"></div>\r\n            <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-8\"></div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"h-4 bg-gray-200 rounded w-full mb-4\"></div>\r\n              <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-4\"></div>\r\n              <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  if (!classDetail) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"text-center py-12\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Class Not Found</h2>\r\n            <p className=\"text-gray-600 mb-4\">The class you're looking for doesn't exist.</p>\r\n            <button\r\n              onClick={() => router.back()}\r\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n            >\r\n              Go Back\r\n            </button>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <button\r\n                onClick={() => router.back()}\r\n                className=\"flex items-center text-gray-600 hover:text-gray-900\"\r\n              >\r\n                <ArrowLeft className=\"h-5 w-5 mr-2\" />\r\n                Back to Classes\r\n              </button>\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">{classDetail.name}</h1>\r\n                <p className=\"text-gray-600\">{classDetail.description}</p>\r\n              </div>\r\n            </div>\r\n            {user?.role === 'TEACHER' && (\r\n              <div className=\"flex space-x-2\">\r\n                <button\r\n                  onClick={handleEnrollStudent}\r\n                  className=\"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700\"\r\n                >\r\n                  <UserPlus className=\"h-4 w-4 mr-2\" />\r\n                  Enroll Student\r\n                </button>\r\n                <button\r\n                  onClick={handleCreateHomework}\r\n                  className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n                >\r\n                  <BookOpen className=\"h-4 w-4 mr-2\" />\r\n                  Create Homework\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Class Info Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center\">\r\n                <Users className=\"h-8 w-8 text-blue-600 mr-3\" />\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Students</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{classDetail.students.length}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center\">\r\n                <BookOpen className=\"h-8 w-8 text-green-600 mr-3\" />\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Homework</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{classDetail.homework.length}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center\">\r\n                <Target className=\"h-8 w-8 text-purple-600 mr-3\" />\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Avg SAT Score</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{classDetail.class_stats.average_sat_score}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center\">\r\n                <TrendingUp className=\"h-8 w-8 text-orange-600 mr-3\" />\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Completion Rate</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{classDetail.class_stats.average_completion_rate}%</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tabs */}\r\n          <div className=\"bg-white rounded-lg shadow\">\r\n            <div className=\"border-b border-gray-200\">\r\n              <nav className=\"flex space-x-8 px-6\">\r\n                {[\r\n                  { id: 'overview', label: 'Overview', icon: BarChart3 },\r\n                  { id: 'students', label: 'Students', icon: Users },\r\n                  { id: 'homework', label: 'Homework', icon: BookOpen },\r\n                  { id: 'analytics', label: 'Analytics', icon: TrendingUp }\r\n                ].map(tab => (\r\n                  <button\r\n                    key={tab.id}\r\n                    onClick={() => setActiveTab(tab.id as any)}\r\n                    className={`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${\r\n                      activeTab === tab.id\r\n                        ? 'border-blue-500 text-blue-600'\r\n                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                    }`}\r\n                  >\r\n                    <tab.icon className=\"h-4 w-4 mr-2\" />\r\n                    {tab.label}\r\n                  </button>\r\n                ))}\r\n              </nav>\r\n            </div>\r\n\r\n            <div className=\"p-6\">\r\n              {/* Overview Tab */}\r\n              {activeTab === 'overview' && (\r\n                <div className=\"space-y-6\">\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Class Information</h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600\">Teacher</p>\r\n                        <p className=\"font-medium\">{classDetail.teacher.first_name} {classDetail.teacher.last_name}</p>\r\n                        <p className=\"text-sm text-gray-500\">{classDetail.teacher.email}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-sm text-gray-600\">Schedule</p>\r\n                        <p className=\"font-medium\">{formatDate(classDetail.start_date)} - {formatDate(classDetail.end_date)}</p>\r\n                        <p className=\"text-sm text-gray-500\">Max {classDetail.max_students} students</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent Activity</h3>\r\n                    <div className=\"space-y-3\">\r\n                      <div className=\"flex items-center justify-between py-2 border-b\">\r\n                        <div className=\"flex items-center\">\r\n                          <BookOpen className=\"h-4 w-4 text-blue-600 mr-3\" />\r\n                          <div>\r\n                            <p className=\"font-medium\">Algebra Practice Set #5 assigned</p>\r\n                            <p className=\"text-sm text-gray-500\">2 days ago</p>\r\n                          </div>\r\n                        </div>\r\n                        <span className=\"text-sm text-gray-500\">2/3 submitted</span>\r\n                      </div>\r\n                      <div className=\"flex items-center justify-between py-2 border-b\">\r\n                        <div className=\"flex items-center\">\r\n                          <Users className=\"h-4 w-4 text-green-600 mr-3\" />\r\n                          <div>\r\n                            <p className=\"font-medium\">New student enrolled</p>\r\n                            <p className=\"text-sm text-gray-500\">1 week ago</p>\r\n                          </div>\r\n                        </div>\r\n                        <span className=\"text-sm text-gray-500\">Carol Davis</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Students Tab */}\r\n              {activeTab === 'students' && (\r\n                <div className=\"space-y-4\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Enrolled Students ({classDetail.students.length})</h3>\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full divide-y divide-gray-200\">\r\n                      <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Student</th>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">SAT Score</th>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Completion Rate</th>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Study Streak</th>\r\n                          {user?.role === 'TEACHER' && (\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n                          )}\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                        {classDetail.students.map(student => (\r\n                          <tr key={student.id}>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <div>\r\n                                <div className=\"text-sm font-medium text-gray-900\">\r\n                                  {student.first_name} {student.last_name}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-500\">{student.email}</div>\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <div className=\"flex items-center\">\r\n                                <Award className=\"h-4 w-4 text-yellow-500 mr-2\" />\r\n                                <span className=\"text-sm text-gray-900\">{student.sat_score || 'N/A'}</span>\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <div className=\"flex items-center\">\r\n                                <div className=\"flex-1 bg-gray-200 rounded-full h-2 mr-2\">\r\n                                  <div \r\n                                    className=\"bg-green-600 h-2 rounded-full\" \r\n                                    style={{ width: `${student.homework_completion_rate || 0}%` }}\r\n                                  ></div>\r\n                                </div>\r\n                                <span className=\"text-sm text-gray-900\">{student.homework_completion_rate || 0}%</span>\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <div className=\"flex items-center\">\r\n                                <Target className=\"h-4 w-4 text-orange-500 mr-2\" />\r\n                                <span className=\"text-sm text-gray-900\">{student.study_streak || 0} days</span>\r\n                              </div>\r\n                            </td>\r\n                            {user?.role === 'TEACHER' && (\r\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                                <button\r\n                                  onClick={() => handleRemoveStudent(student.id)}\r\n                                  className=\"text-red-600 hover:text-red-900\"\r\n                                >\r\n                                  <UserMinus className=\"h-4 w-4\" />\r\n                                </button>\r\n                              </td>\r\n                            )}\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Homework Tab */}\r\n              {activeTab === 'homework' && (\r\n                <div className=\"space-y-4\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Homework Assignments ({classDetail.homework.length})</h3>\r\n                  <div className=\"space-y-4\">\r\n                    {classDetail.homework.map(hw => (\r\n                      <div key={hw.id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <h4 className=\"font-medium text-gray-900\">{hw.title}</h4>\r\n                            <p className=\"text-sm text-gray-600 mt-1\">{hw.description}</p>\r\n                            <div className=\"flex items-center space-x-4 mt-3 text-sm text-gray-500\">\r\n                              <div className=\"flex items-center\">\r\n                                <Calendar className=\"h-4 w-4 mr-1\" />\r\n                                Due {formatDate(hw.due_date)}\r\n                              </div>\r\n                              <div className=\"flex items-center\">\r\n                                <BookOpen className=\"h-4 w-4 mr-1\" />\r\n                                {hw.total_questions} questions\r\n                              </div>\r\n                              <div className=\"flex items-center\">\r\n                                <Users className=\"h-4 w-4 mr-1\" />\r\n                                {hw.submission_count}/{classDetail.students.length} submitted\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"ml-4\">\r\n                            <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                              hw.difficulty_level === 'EASY' ? 'bg-green-100 text-green-800' :\r\n                              hw.difficulty_level === 'MEDIUM' ? 'bg-yellow-100 text-yellow-800' :\r\n                              'bg-red-100 text-red-800'\r\n                            }`}>\r\n                              {hw.difficulty_level}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                        {hw.average_score && (\r\n                          <div className=\"mt-3 pt-3 border-t\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                              <span className=\"text-sm text-gray-600\">Average Score</span>\r\n                              <span className=\"font-medium\">{hw.average_score}%</span>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Analytics Tab */}\r\n              {activeTab === 'analytics' && (\r\n                <div className=\"space-y-6\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Class Analytics</h3>\r\n                  \r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div className=\"bg-gray-50 rounded-lg p-6\">\r\n                      <h4 className=\"font-medium text-gray-900 mb-4\">Performance Overview</h4>\r\n                      <div className=\"space-y-3\">\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-sm text-gray-600\">Average SAT Score</span>\r\n                          <span className=\"font-medium\">{classDetail.class_stats.average_sat_score}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-sm text-gray-600\">Homework Completion</span>\r\n                          <span className=\"font-medium\">{classDetail.class_stats.average_completion_rate}%</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-sm text-gray-600\">Total Study Time</span>\r\n                          <span className=\"font-medium\">{Math.round(classDetail.class_stats.total_study_time / 60)} hours</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-sm text-gray-600\">Active Students</span>\r\n                          <span className=\"font-medium\">{classDetail.class_stats.active_students}</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-gray-50 rounded-lg p-6\">\r\n                      <h4 className=\"font-medium text-gray-900 mb-4\">Top Performers</h4>\r\n                      <div className=\"space-y-3\">\r\n                        {classDetail.students\r\n                          .sort((a, b) => (b.sat_score || 0) - (a.sat_score || 0))\r\n                          .slice(0, 3)\r\n                          .map((student, index) => (\r\n                            <div key={student.id} className=\"flex items-center justify-between\">\r\n                              <div className=\"flex items-center\">\r\n                                <span className=\"text-lg font-bold text-gray-400 mr-3\">#{index + 1}</span>\r\n                                <span className=\"text-sm font-medium\">{student.first_name} {student.last_name}</span>\r\n                              </div>\r\n                              <span className=\"text-sm font-medium\">{student.sat_score || 'N/A'}</span>\r\n                            </div>\r\n                          ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\classes\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":29,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[34,45],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[264,274],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[274,287],"text":""},"desc":"Remove unused variable \"Calendar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BookOpen' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"BookOpen"},"fix":{"range":[287,300],"text":""},"desc":"Remove unused variable \"BookOpen\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[972,975],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[972,975],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1336,1339],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1336,1339],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport AuthGuard from '../../../components/AuthGuard';\r\nimport DashboardLayout from '../../../components/DashboardLayout';\r\nimport { \r\n  ArrowLeft,\r\n  Save,\r\n  Users,\r\n  Calendar,\r\n  BookOpen\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../../contexts/AuthContext';\r\nimport { classesApi } from '../../../utils/api';\r\n\r\ninterface ClassFormData {\r\n  name: string;\r\n  description: string;\r\n  start_date: string;\r\n  end_date: string;\r\n  max_students: number;\r\n}\r\n\r\nexport default function CreateClassPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [formData, setFormData] = useState<ClassFormData>({\r\n    name: '',\r\n    description: '',\r\n    start_date: '',\r\n    end_date: '',\r\n    max_students: 30\r\n  });\r\n\r\n  const handleInputChange = (field: keyof ClassFormData, value: any) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      await classesApi.createClass(formData);\r\n      console.log('Class created successfully!');\r\n      router.push('/classes');\r\n    } catch (error: any) {\r\n      console.error('Error creating class:', error);\r\n      const errorMessage = error.response?.data?.detail || error.message || 'Failed to create class';\r\n      console.error(`Error: ${errorMessage}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (user?.role !== 'TEACHER') {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"text-center py-12\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Access Denied</h2>\r\n            <p className=\"text-gray-600\">Only teachers can create classes.</p>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"max-w-2xl mx-auto space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button\r\n              onClick={() => router.back()}\r\n              className=\"flex items-center text-gray-600 hover:text-gray-900\"\r\n            >\r\n              <ArrowLeft className=\"h-5 w-5 mr-2\" />\r\n              Back to Classes\r\n            </button>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Create Class</h1>\r\n              <p className=\"text-gray-600\">Create a new class for your students</p>\r\n            </div>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"bg-white rounded-lg shadow p-6 space-y-6\">\r\n            {/* Basic Information */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Class Name *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                required\r\n                value={formData.name}\r\n                onChange={(e) => handleInputChange('name', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"e.g., SAT Math - Advanced\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Description\r\n              </label>\r\n              <textarea\r\n                value={formData.description}\r\n                onChange={(e) => handleInputChange('description', e.target.value)}\r\n                rows={4}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"Describe what students will learn in this class...\"\r\n              />\r\n            </div>\r\n\r\n            {/* Schedule */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Start Date *\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  required\r\n                  value={formData.start_date}\r\n                  onChange={(e) => handleInputChange('start_date', e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  End Date *\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  required\r\n                  value={formData.end_date}\r\n                  onChange={(e) => handleInputChange('end_date', e.target.value)}\r\n                  min={formData.start_date}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Maximum Students\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"100\"\r\n                value={formData.max_students}\r\n                onChange={(e) => handleInputChange('max_students', parseInt(e.target.value))}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n\r\n            {/* Submit Button */}\r\n            <div className=\"flex justify-end space-x-4\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => router.back()}\r\n                className=\"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading || !formData.name || !formData.start_date || !formData.end_date}\r\n                className=\"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n              >\r\n                <Save className=\"h-4 w-4 mr-2\" />\r\n                {isLoading ? 'Creating...' : 'Create Class'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\classes\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[245,259],"text":""},"desc":"Remove unused variable \"Calendar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getSubjectColor' is defined but never used.","line":19,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":37,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getSubjectColor"},"fix":{"range":[440,457],"text":""},"desc":"Remove unused variable \"getSubjectColor\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1886,1889],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1886,1889],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2060,2063],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2060,2063],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport AuthGuard from '../../components/AuthGuard';\r\nimport DashboardLayout from '../../components/DashboardLayout';\r\nimport { \r\n  Users, \r\n  Calendar, \r\n  Award, \r\n  BookOpen,\r\n  Plus,\r\n  Search,\r\n  Filter,\r\n  TrendingUp,\r\n  Clock\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { formatDate, getSubjectColor } from '../../utils/helpers';\r\nimport { classesApi } from '../../utils/api';\r\n\r\ninterface Teacher {\r\n  id: number;\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n}\r\n\r\ninterface Student {\r\n  id: number;\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n}\r\n\r\ninterface Class {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  teacher: Teacher;\r\n  students: Student[];\r\n  is_active: boolean;\r\n  created_at: string;\r\n  homework_count: number;\r\n  upcoming_homework: number;\r\n  average_score: number;\r\n}\r\n\r\nexport default function ClassesPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [classes, setClasses] = useState<Class[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const handleCreateClass = () => {\r\n    router.push('/classes/create');\r\n  };\r\n\r\n  const handleViewClass = (classId: number) => {\r\n    router.push(`/classes/${classId}`);\r\n  };\r\n\r\n  const handleClassAnalytics = (classId: number) => {\r\n    router.push(`/analytics?class_id=${classId}`);\r\n  };\r\n\r\n  const handleFilter = () => {\r\n    // TODO: Implement advanced filtering\r\n    console.log('Filter clicked - implement advanced filters');\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchClasses = async () => {\r\n      try {\r\n        if (user?.role === 'TEACHER') {\r\n          const response = await classesApi.getClasses() as any;\r\n          setClasses(response.results || response);\r\n        } else if (user?.role === 'STUDENT') {\r\n          const response = await classesApi.getStudentClasses() as any;\r\n          setClasses(response.results || response);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch classes:', error);\r\n        // Set empty array on error\r\n        setClasses([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchClasses();\r\n    } else {\r\n      setIsLoading(false);\r\n    }\r\n  }, [user]);\r\n\r\n  const filteredClasses = classes.filter(cls =>\r\n    cls.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    cls.description.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {[...Array(3)].map((_, i) => (\r\n                <div key={i} className=\"bg-white rounded-lg shadow p-6\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-4\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-full mb-2\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Classes</h1>\r\n              <p className=\"text-gray-600\">\r\n                {user?.role === 'TEACHER' ? 'Manage your classes and students' : 'View your enrolled classes'}\r\n              </p>\r\n            </div>\r\n            {user?.role === 'TEACHER' && (\r\n              <button\r\n                onClick={handleCreateClass}\r\n                className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Create Class\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Search and Filter */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search classes...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n            <button \r\n              className=\"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              onClick={handleFilter}\r\n            >\r\n              <Filter className=\"h-4 w-4 mr-2\" />\r\n              Filter\r\n            </button>\r\n          </div>\r\n\r\n          {/* Classes Grid */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {filteredClasses.map((cls) => (\r\n              <div key={cls.id} className=\"bg-white rounded-lg shadow hover:shadow-lg transition-shadow\">\r\n                <div className=\"p-6\">\r\n                  {/* Class Header */}\r\n                  <div className=\"flex items-start justify-between mb-4\">\r\n                    <div className=\"flex-1\">\r\n                      <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">{cls.name}</h3>\r\n                      <p className=\"text-sm text-gray-600 line-clamp-2\">{cls.description}</p>\r\n                    </div>\r\n                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                      cls.is_active ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\r\n                    }`}>\r\n                      {cls.is_active ? 'Active' : 'Inactive'}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {/* Teacher Info */}\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <div className=\"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-3\">\r\n                      <Users className=\"h-4 w-4 text-blue-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm font-medium text-gray-900\">\r\n                        {cls.teacher.first_name} {cls.teacher.last_name}\r\n                      </p>\r\n                      <p className=\"text-xs text-gray-500\">Instructor</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Stats */}\r\n                  <div className=\"grid grid-cols-3 gap-4 mb-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"flex items-center justify-center mb-1\">\r\n                        <Users className=\"h-4 w-4 text-gray-400 mr-1\" />\r\n                        <span className=\"text-lg font-semibold text-gray-900\">{cls.students.length}</span>\r\n                      </div>\r\n                      <p className=\"text-xs text-gray-500\">Students</p>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"flex items-center justify-center mb-1\">\r\n                        <BookOpen className=\"h-4 w-4 text-gray-400 mr-1\" />\r\n                        <span className=\"text-lg font-semibold text-gray-900\">{cls.homework_count}</span>\r\n                      </div>\r\n                      <p className=\"text-xs text-gray-500\">Homework</p>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"flex items-center justify-center mb-1\">\r\n                        <Award className=\"h-4 w-4 text-gray-400 mr-1\" />\r\n                        <span className=\"text-lg font-semibold text-gray-900\">{cls.average_score}</span>\r\n                      </div>\r\n                      <p className=\"text-xs text-gray-500\">Avg Score</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Upcoming Homework */}\r\n                  {cls.upcoming_homework > 0 && (\r\n                    <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4\">\r\n                      <div className=\"flex items-center\">\r\n                        <Clock className=\"h-4 w-4 text-yellow-600 mr-2\" />\r\n                        <span className=\"text-sm text-yellow-800\">\r\n                          {cls.upcoming_homework} upcoming assignment{cls.upcoming_homework > 1 ? 's' : ''}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Actions */}\r\n                  <div className=\"flex space-x-2\">\r\n                    <button \r\n                      className=\"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors\"\r\n                      onClick={() => handleViewClass(cls.id)}\r\n                    >\r\n                      View Class\r\n                    </button>\r\n                    {user?.role === 'TEACHER' && (\r\n                      <button \r\n                        className=\"px-3 py-2 border border-gray-300 text-sm rounded-lg hover:bg-gray-50 transition-colors\"\r\n                        onClick={() => handleClassAnalytics(cls.id)}\r\n                      >\r\n                        <TrendingUp className=\"h-4 w-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"px-6 py-3 bg-gray-50 border-t border-gray-200\">\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    Created {formatDate(cls.created_at)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Empty State */}\r\n          {filteredClasses.length === 0 && (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4\">\r\n                <BookOpen className=\"h-6 w-6 text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No classes found</h3>\r\n              <p className=\"text-gray-500 mb-4\">\r\n                {searchTerm ? 'Try adjusting your search terms' : 'Get started by creating your first class'}\r\n              </p>\r\n              {user?.role === 'TEACHER' && !searchTerm && (\r\n                <button\r\n                  onClick={handleCreateClass}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Create Class\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\dashboard\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[287,301],"text":""},"desc":"Remove unused variable \"Calendar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getStreakMessage' is defined but never used.","line":21,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":60,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getStreakMessage"},"fix":{"range":[556,574],"text":""},"desc":"Remove unused variable \"getStreakMessage\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getStreakColor' is defined but never used.","line":21,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":76,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getStreakColor"},"fix":{"range":[574,590],"text":""},"desc":"Remove unused variable \"getStreakColor\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2495,2498],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2495,2498],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2798,2801],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2798,2801],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2870,2873],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2870,2873],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2944,2947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2944,2947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":108,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4179,4182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4179,4182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4342,4345],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4342,4345],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":112,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4422,4425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4422,4425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'studentProfile.weak_areas'. Either include it or remove the dependency array.","line":174,"column":6,"nodeType":"ArrayExpression","endLine":174,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [user, studentProfile?.sat_exam_date, studentProfile.weak_areas]","fix":{"range":[6764,6801],"text":"[user, studentProfile?.sat_exam_date, studentProfile.weak_areas]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'examUrgency' is assigned a value but never used.","line":177,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":177,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":205,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7627,7630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7627,7630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":2,"message":"'currentDate' is never reassigned. Use 'const' instead.","line":218,"column":9,"nodeType":"Identifier","messageId":"useConst","endLine":218,"endColumn":20,"fix":{"range":[7959,7993],"text":"const currentDate = new Date(today);"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":228,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":228,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8219,8222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8219,8222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":309,"column":73,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[11109,11122],"text":"Today&apos;s Study"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[11109,11122],"text":"Today&lsquo;s Study"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[11109,11122],"text":"Today&#39;s Study"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[11109,11122],"text":"Today&rsquo;s Study"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":1,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport AuthGuard from '../../components/AuthGuard';\r\nimport DashboardLayout from '../../components/DashboardLayout';\r\nimport { \r\n  Clock, \r\n  Target, \r\n  TrendingUp, \r\n  BookOpen, \r\n  Calendar,\r\n  Award,\r\n  Brain,\r\n  AlertCircle,\r\n  CheckCircle,\r\n  Play\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { usersApi, analyticsApi, bluebookApi } from '../../utils/api';\r\nimport { getDaysUntilExam, getExamUrgency, getStreakMessage, getStreakColor, getSatScoreColor, formatPercentage, formatDuration } from '../../utils/helpers';\r\nimport { getFutureDate, getPastDate } from '../../utils/dateFixer';\r\nimport ExamCountdown from '../../components/ExamCountdown';\r\nimport StudyStreak from '../../components/StudyStreak';\r\nimport StudySessionTracker from '../../components/StudySessionTracker';\r\n\r\ninterface StudentProfile {\r\n  sat_exam_date: string | null;\r\n  weak_areas: { [key: string]: number };\r\n  target_sat_score: number;\r\n  estimated_current_score: number;\r\n}\r\n\r\ninterface DashboardStats {\r\n  homeworkCompletion: number;\r\n  averageScore: number;\r\n  studyStreak: number;\r\n  studyTimeToday: number;\r\n  nextExamDate: string;\r\n  weakAreas: string[];\r\n  recentActivity: Array<{\r\n    type: string;\r\n    description: string;\r\n    timestamp: string;\r\n  }>;\r\n  digitalSatAttempts?: number;\r\n  digitalSatAverageScore?: number;\r\n  digitalSatBestScore?: number;\r\n}\r\n\r\nexport default function DashboardPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [stats, setStats] = useState<DashboardStats | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [studentProfile, setStudentProfile] = useState<StudentProfile | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Fetch student profile and dashboard data\r\n    const fetchData = async () => {\r\n      try {\r\n        // Fetch student profile first\r\n        let profileData: StudentProfile | null = null;\r\n        if (user?.role === 'STUDENT') {\r\n          try {\r\n            profileData = await usersApi.getStudentProfile() as StudentProfile;\r\n            setStudentProfile(profileData);\r\n          } catch (profileError) {\r\n            console.log('Student profile not found or error:', profileError);\r\n          }\r\n        }\r\n\r\n        // Fetch dashboard stats using proper API client\r\n        try {\r\n          const data = await analyticsApi.getDashboardStats() as any;\r\n          \r\n          // Also fetch Digital SAT analytics\r\n          let digitalSatData = { attempts: 0, averageScore: 0, bestScore: 0 };\r\n          try {\r\n            const satAnalytics = await bluebookApi.getAnalytics();\r\n            digitalSatData = {\r\n              attempts: (satAnalytics as any).total_attempts || 0,\r\n              averageScore: (satAnalytics as any).average_total_score || 0,\r\n              bestScore: (satAnalytics as any).highest_score || 0\r\n            };\r\n          } catch (satError) {\r\n            console.log('Digital SAT analytics not available:', satError);\r\n          }\r\n          \r\n          setStats({\r\n            homeworkCompletion: data.homeworkCompletion || 0,\r\n            averageScore: data.averageScore || 0,\r\n            studyStreak: data.studyStreak || 0,\r\n            studyTimeToday: data.studyTimeToday || 0,\r\n            nextExamDate: data.nextExamDate || profileData?.sat_exam_date || getFutureDate(120),\r\n            weakAreas: data.weakAreas || (profileData?.weak_areas ? Object.keys(profileData.weak_areas) : ['Algebra', 'Geometry']),\r\n            recentActivity: data.recentActivity || [],\r\n            digitalSatAttempts: digitalSatData.attempts,\r\n            digitalSatAverageScore: digitalSatData.averageScore,\r\n            digitalSatBestScore: digitalSatData.bestScore\r\n          });\r\n        } catch (apiError) {\r\n          console.log('Dashboard API failed, calculating real streak:', apiError);\r\n          \r\n          // Calculate real streak from study sessions if API fails\r\n          try {\r\n            const sessionsResponse = await analyticsApi.getMySessions();\r\n            const sessions = (sessionsResponse as any).results || sessionsResponse;\r\n            \r\n            // Calculate streak from sessions\r\n            const streak = calculateStreakFromSessions(sessions as any[]);\r\n            const todayStudyTime = calculateTodayStudyTime(sessions as any[]);\r\n            \r\n            setStats({\r\n              homeworkCompletion: 0, // Will be updated when API works\r\n              averageScore: 0, // Will be updated when API works\r\n              studyStreak: streak,\r\n              studyTimeToday: todayStudyTime,\r\n              nextExamDate: profileData?.sat_exam_date || getFutureDate(120),\r\n              weakAreas: profileData?.weak_areas ? Object.keys(profileData.weak_areas) : ['Algebra', 'Geometry'],\r\n              recentActivity: []\r\n            });\r\n          } catch (sessionError) {\r\n            console.log('Session API also failed, using zero streak:', sessionError);\r\n            // Final fallback - start from zero\r\n            setStats({\r\n              homeworkCompletion: 0,\r\n              averageScore: 0,\r\n              studyStreak: 0,\r\n              studyTimeToday: 0,\r\n              nextExamDate: profileData?.sat_exam_date || getFutureDate(120),\r\n              weakAreas: profileData?.weak_areas ? Object.keys(profileData.weak_areas) : ['Algebra', 'Geometry'],\r\n              recentActivity: []\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching dashboard data:', error);\r\n        // Fallback to mock data\r\n        const mockStats: DashboardStats = {\r\n          homeworkCompletion: 85,\r\n          averageScore: 1250,\r\n          studyStreak: 12,\r\n          studyTimeToday: 45,\r\n          nextExamDate: studentProfile?.sat_exam_date || getFutureDate(120),\r\n          weakAreas: studentProfile?.weak_areas ? Object.keys(studentProfile.weak_areas) : ['Algebra', 'Geometry'],\r\n          recentActivity: [\r\n            {\r\n              type: 'homework',\r\n              description: 'Completed Math Homework #3',\r\n              timestamp: `${getPastDate(1)}T10:30:00Z`\r\n            },\r\n            {\r\n              type: 'mock_exam',\r\n              description: 'Scored 1320 on Practice Test',\r\n              timestamp: `${getPastDate(1)}T09:15:00Z`\r\n            },\r\n            {\r\n              type: 'flashcard',\r\n              description: 'Reviewed 50 vocabulary cards',\r\n              timestamp: `${getPastDate(2)}T20:45:00Z`\r\n            }\r\n          ]\r\n        };\r\n        setStats(mockStats);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchData();\r\n    }\r\n  }, [user, studentProfile?.sat_exam_date]);\r\n\r\n  const daysUntilExam = stats ? getDaysUntilExam(stats.nextExamDate) : 0;\r\n  const examUrgency = getExamUrgency(daysUntilExam);\r\n\r\n  const handlePracticeClick = () => {\r\n    router.push('/questionbank');\r\n  };\r\n\r\n  const handleMockExamClick = () => {\r\n    router.push('/mockexams');\r\n  };\r\n\r\n  const handleFlashcardsClick = () => {\r\n    router.push('/flashcards');\r\n  };\r\n\r\n  const handleAnalyticsClick = () => {\r\n    router.push('/analytics');\r\n  };\r\n\r\n  const handleSessionUpdate = () => {\r\n    // Refresh dashboard data when session ends\r\n    window.location.reload();\r\n  };\r\n\r\n  const handleWeakAreaPractice = (area: string) => {\r\n    router.push(`/questionbank?subject=${encodeURIComponent(area)}`);\r\n  };\r\n\r\n  // Helper functions to calculate streak from sessions\r\n  const calculateStreakFromSessions = (sessions: any[]): number => {\r\n    if (!sessions || sessions.length === 0) return 0;\r\n    \r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    \r\n    const sessionDates = new Set(\r\n      sessions\r\n        .filter(s => s.ended_at)\r\n        .map(s => new Date(s.ended_at).toDateString())\r\n    );\r\n    \r\n    let streak = 0;\r\n    let currentDate = new Date(today);\r\n    \r\n    while (sessionDates.has(currentDate.toDateString())) {\r\n      streak++;\r\n      currentDate.setDate(currentDate.getDate() - 1);\r\n    }\r\n    \r\n    return streak;\r\n  };\r\n\r\n  const calculateTodayStudyTime = (sessions: any[]): number => {\r\n    if (!sessions || sessions.length === 0) return 0;\r\n    \r\n    const today = new Date().toDateString();\r\n    \r\n    return sessions\r\n      .filter(s => s.ended_at && new Date(s.ended_at).toDateString() === today)\r\n      .reduce((total, s) => total + (s.duration_minutes || 0), 0);\r\n  };\r\n\r\n  const getActivityIcon = (activityType: string) => {\r\n    switch (activityType) {\r\n      case 'homework':\r\n        return <BookOpen className=\"h-4 w-4\" />;\r\n      case 'exam':\r\n        return <Target className=\"h-4 w-4\" />;\r\n      case 'flashcard':\r\n        return <Brain className=\"h-4 w-4\" />;\r\n      default:\r\n        return <Play className=\"h-4 w-4\" />;\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n              {[...Array(4)].map((_, i) => (\r\n                <div key={i} className=\"bg-white rounded-lg shadow p-6\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n                  <div className=\"h-8 bg-gray-200 rounded w-1/2\"></div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  if (!stats) return null;\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-8\">\r\n          {/* Header Stats */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n            {/* Dynamic Exam Countdown */}\r\n            <ExamCountdown \r\n              examDate={studentProfile?.sat_exam_date || null} \r\n              className=\"bg-white rounded-lg shadow p-6\"\r\n            />\r\n\r\n            {/* Enhanced Study Streak */}\r\n            <StudyStreak \r\n              streakDays={stats.studyStreak}\r\n              studyTimeToday={stats.studyTimeToday}\r\n              className=\"col-span-1\"\r\n            />\r\n\r\n            {/* Average SAT Score */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Average Score</p>\r\n                  <p className={`text-2xl font-bold ${getSatScoreColor(stats.averageScore)}`}>\r\n                    {stats.averageScore}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500\">Target: 1400+</p>\r\n                </div>\r\n                <Target className=\"h-8 w-8 text-gray-400\" />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Today's Study Time */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Today's Study</p>\r\n                  <p className=\"text-2xl font-bold text-blue-600\">\r\n                    {formatDuration(stats.studyTimeToday)}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500\">Goal: 2 hours</p>\r\n                </div>\r\n                <Clock className=\"h-8 w-8 text-gray-400\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Progress Overview */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n            {/* Digital SAT Progress */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Digital SAT Progress</h3>\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-700\">Attempts</p>\r\n                    <p className=\"text-2xl font-bold text-purple-600\">\r\n                      {stats.digitalSatAttempts || 0}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">Total practice tests</p>\r\n                  </div>\r\n                  <Target className=\"h-8 w-8 text-gray-400\" />\r\n                </div>\r\n                \r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-700\">Average Score</p>\r\n                    <p className={`text-2xl font-bold ${getSatScoreColor(stats.digitalSatAverageScore || 0)}`}>\r\n                      {stats.digitalSatAverageScore || 0}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">Out of 1600</p>\r\n                  </div>\r\n                  <Award className=\"h-8 w-8 text-gray-400\" />\r\n                </div>\r\n                \r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-700\">Best Score</p>\r\n                    <p className={`text-2xl font-bold ${getSatScoreColor(stats.digitalSatBestScore || 0)}`}>\r\n                      {stats.digitalSatBestScore || 0}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">Personal best</p>\r\n                  </div>\r\n                  <TrendingUp className=\"h-8 w-8 text-gray-400\" />\r\n                </div>\r\n                \r\n                <button\r\n                  onClick={() => router.push('/mockexams/bluebook')}\r\n                  className=\"w-full flex items-center justify-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\r\n                >\r\n                  <Play className=\"h-4 w-4 mr-2\" />\r\n                  Practice Digital SAT\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Homework Progress */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Homework Progress</h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <div className=\"flex justify-between mb-2\">\r\n                    <span className=\"text-sm font-medium text-gray-700\">Completion Rate</span>\r\n                    <span className=\"text-sm text-gray-500\">{formatPercentage(stats.homeworkCompletion)}</span>\r\n                  </div>\r\n                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                    <div \r\n                      className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n                      style={{ width: `${stats.homeworkCompletion}%` }}\r\n                    ></div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2 text-sm\">\r\n                  <CheckCircle className=\"h-4 w-4 text-green-500\" />\r\n                  <span className=\"text-gray-600\">17 of 20 assignments completed</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Weak Areas */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Areas to Improve</h3>\r\n              <div className=\"space-y-3\">\r\n                {stats.weakAreas.map((area, index) => (\r\n                  <div key={index} className=\"flex items-center justify-between p-3 bg-red-50 rounded-lg\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <AlertCircle className=\"h-4 w-4 text-red-500\" />\r\n                      <span className=\"text-sm font-medium text-red-800\">{area}</span>\r\n                    </div>\r\n                    <button \r\n                      className=\"text-xs text-red-600 hover:text-red-800 font-medium\"\r\n                      onClick={() => handleWeakAreaPractice(area)}\r\n                    >\r\n                      Practice\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n                {stats.weakAreas.length === 0 && (\r\n                  <p className=\"text-sm text-gray-500\">No weak areas identified. Keep up the great work!</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Recent Activity */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent Activity</h3>\r\n            <div className=\"space-y-4\">\r\n              {stats.recentActivity.map((activity, index) => (\r\n                <div key={index} className=\"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors\">\r\n                  <div className=\"flex-shrink-0\">\r\n                    <div className=\"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600\">\r\n                      {getActivityIcon(activity.type)}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium text-gray-900\">{activity.description}</p>\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      {new Date(activity.timestamp).toLocaleDateString()} at{' '}\r\n                      {new Date(activity.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Study Session Tracker */}\r\n          <StudySessionTracker \r\n            onSessionUpdate={handleSessionUpdate}\r\n            className=\"col-span-1\"\r\n          />\r\n\r\n          {/* Quick Actions */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n              <button \r\n                className=\"flex flex-col items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors\"\r\n                onClick={handlePracticeClick}\r\n              >\r\n                <Play className=\"h-6 w-6 text-blue-600 mb-2\" />\r\n                <span className=\"text-sm font-medium text-blue-900\">Start Practice</span>\r\n              </button>\r\n              <button \r\n                className=\"flex flex-col items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors\"\r\n                onClick={handleMockExamClick}\r\n              >\r\n                <Target className=\"h-6 w-6 text-green-600 mb-2\" />\r\n                <span className=\"text-sm font-medium text-green-900\">Take Mock Exam</span>\r\n              </button>\r\n              <button \r\n                className=\"flex flex-col items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors\"\r\n                onClick={handleFlashcardsClick}\r\n              >\r\n                <Brain className=\"h-6 w-6 text-purple-600 mb-2\" />\r\n                <span className=\"text-sm font-medium text-purple-900\">Review Flashcards</span>\r\n              </button>\r\n              <button \r\n                className=\"flex flex-col items-center p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors\"\r\n                onClick={handleAnalyticsClick}\r\n              >\r\n                <TrendingUp className=\"h-6 w-6 text-orange-600 mb-2\" />\r\n                <span className=\"text-sm font-medium text-orange-900\">View Analytics</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\debug-auth\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[147,150],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[147,150],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\nexport default function DebugAuth() {\r\n  const [authInfo, setAuthInfo] = useState<any>({});\r\n\r\n  useEffect(() => {\r\n    const checkAuth = () => {\r\n      const accessToken = localStorage.getItem('access_token');\r\n      const refreshToken = localStorage.getItem('refresh_token');\r\n      const user = localStorage.getItem('user');\r\n      \r\n      setAuthInfo({\r\n        accessToken: accessToken ? `${accessToken.substring(0, 20)}... (${accessToken.length} chars)` : 'none',\r\n        refreshToken: refreshToken ? `${refreshToken.substring(0, 20)}... (${refreshToken.length} chars)` : 'none',\r\n        user: user || 'none',\r\n        keys: Object.keys(localStorage)\r\n      });\r\n    };\r\n\r\n    checkAuth();\r\n    \r\n    // Listen for storage changes\r\n    window.addEventListener('storage', checkAuth);\r\n    return () => window.removeEventListener('storage', checkAuth);\r\n  }, []);\r\n\r\n  const clearAuth = () => {\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('refresh_token');\r\n    localStorage.removeItem('user');\r\n    window.location.reload();\r\n  };\r\n\r\n  const testLogin = () => {\r\n    // Simulate a token for testing\r\n    const fakeToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c';\r\n    localStorage.setItem('access_token', fakeToken);\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-2xl\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Authentication Debug</h1>\r\n      \r\n      <div className=\"bg-gray-100 p-4 rounded mb-4\">\r\n        <h2 className=\"font-semibold mb-2\">Current Auth State:</h2>\r\n        <pre className=\"text-sm\">\r\n          {JSON.stringify(authInfo, null, 2)}\r\n        </pre>\r\n      </div>\r\n\r\n      <div className=\"space-x-4\">\r\n        <button \r\n          onClick={clearAuth}\r\n          className=\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600\"\r\n        >\r\n          Clear Auth Data\r\n        </button>\r\n        \r\n        <button \r\n          onClick={testLogin}\r\n          className=\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600\"\r\n        >\r\n          Set Fake Token (for testing)\r\n        </button>\r\n        \r\n        <a \r\n          href=\"/login\"\r\n          className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 inline-block\"\r\n        >\r\n          Go to Login\r\n        </a>\r\n        \r\n        <a \r\n          href=\"/rankings\"\r\n          className=\"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 inline-block\"\r\n        >\r\n          Go to Rankings\r\n        </a>\r\n      </div>\r\n\r\n      <div className=\"mt-4 text-sm text-gray-600\">\r\n        <p>1. Check if you have tokens stored</p>\r\n        <p>2. If not, go to login page</p>\r\n        <p>3. After login, check if tokens appear</p>\r\n        <p>4. Then try rankings page</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\flashcards\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[305,320],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":59,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":15},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":530,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[19283,19314],"text":"\r\n                            &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[19283,19314],"text":"\r\n                            &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[19283,19314],"text":"\r\n                            &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[19283,19314],"text":"\r\n                            &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":530,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[19360,19389],"text":"&quot;\r\n                          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[19360,19389],"text":"&ldquo;\r\n                          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[19360,19389],"text":"&#34;\r\n                          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[19360,19389],"text":"&rdquo;\r\n                          "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":723,"column":83,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[28798,28799],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[28798,28799],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[28798,28799],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[28798,28799],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":723,"column":107,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[28822,28823],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[28822,28823],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[28822,28823],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[28822,28823],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport AuthGuard from '../../components/AuthGuard';\r\nimport DashboardLayout from '../../components/DashboardLayout';\r\nimport { \r\n  Brain, \r\n  CheckCircle, \r\n  XCircle, \r\n  Clock, \r\n  BookOpen,\r\n  Search,\r\n  Play,\r\n  Star,\r\n  ArrowLeft,\r\n  TrendingUp,\r\n  Repeat\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { formatDate, getSubjectColor } from '../../utils/helpers';\r\nimport { flashcardsApi } from '../../utils/api';\r\n\r\ninterface Flashcard {\r\n  id: number;\r\n  word: string;\r\n  definition: string;\r\n  pronunciation?: string;\r\n  example_sentence: string;\r\n  difficulty: 'EASY' | 'MEDIUM' | 'HARD';\r\n  subject: 'MATH' | 'READING' | 'WRITING';\r\n  created_at: string;\r\n}\r\n\r\ninterface FlashcardProgress {\r\n  id: number;\r\n  flashcard: number;\r\n  easiness_factor: number;\r\n  repetition_count: number;\r\n  interval_days: number;\r\n  next_review_date: string;\r\n  last_reviewed_at?: string;\r\n  is_mastered: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\ninterface ReviewSession {\r\n  id: number;\r\n  started_at: string;\r\n  cards_reviewed: number;\r\n  mastered_count: number;\r\n  still_learning_count: number;\r\n  remaining_cards: Flashcard[];\r\n  current_card: Flashcard;\r\n  show_definition: boolean;\r\n}\r\n\r\nexport default function FlashcardsPage() {\r\n  const { user } = useAuth();\r\n  const [flashcards, setFlashcards] = useState<Flashcard[]>([]);\r\n  const [progress, setProgress] = useState<FlashcardProgress[]>([]);\r\n  const [currentSession, setCurrentSession] = useState<ReviewSession | null>(null);\r\n  const [isReviewMode, setIsReviewMode] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterSubject, setFilterSubject] = useState<string>('all');\r\n  const [filterDifficulty, setFilterDifficulty] = useState<string>('all');\r\n  const [filterStatus, setFilterStatus] = useState<string>('all');\r\n\r\n  // Swipe functionality\r\n  const [swipeDirection, setSwipeDirection] = useState<'left' | 'right' | null>(null);\r\n  const [touchStart, setTouchStart] = useState<{ x: number; y: number } | null>(null);\r\n  const [touchCurrent, setTouchCurrent] = useState<{ x: number; y: number } | null>(null);\r\n  const cardRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    loadFlashcards();\r\n  }, []);\r\n\r\n  const loadFlashcards = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const [flashcardsResponse, progressResponse] = await Promise.all([\r\n        flashcardsApi.getFlashcards(),\r\n        flashcardsApi.getProgress()\r\n      ]);\r\n      \r\n      setFlashcards(flashcardsResponse.results || flashcardsResponse);\r\n      setProgress(progressResponse.results || progressResponse);\r\n    } catch (error) {\r\n      console.error('Error loading flashcards:', error);\r\n      setFlashcards([]);\r\n      setProgress([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateCardProgress = async (flashcardId: number, isMastered: boolean) => {\r\n    try {\r\n      await flashcardsApi.updateProgress(flashcardId, { \r\n        is_correct: isMastered,\r\n        time_taken_seconds: 5\r\n      });\r\n      \r\n      // Update local state\r\n      setProgress(prev => {\r\n        const existing = prev.find(p => p.flashcard === flashcardId);\r\n        if (existing) {\r\n          return prev.map(p => \r\n            p.flashcard === flashcardId \r\n              ? { \r\n                  ...p, \r\n                  is_mastered: isMastered,\r\n                  repetition_count: p.repetition_count + 1,\r\n                  last_reviewed_at: new Date().toISOString(),\r\n                  updated_at: new Date().toISOString()\r\n                }\r\n              : p\r\n          );\r\n        } else {\r\n          return [...prev, {\r\n            id: Date.now(),\r\n            flashcard: flashcardId,\r\n            easiness_factor: 2.5,\r\n            repetition_count: 1,\r\n            interval_days: isMastered ? 7 : 1,\r\n            next_review_date: new Date(Date.now() + (isMastered ? 7 : 1) * 24 * 60 * 60 * 1000).toISOString(),\r\n            last_reviewed_at: new Date().toISOString(),\r\n            is_mastered: isMastered,\r\n            created_at: new Date().toISOString(),\r\n            updated_at: new Date().toISOString()\r\n          }];\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error('Error updating card progress:', error);\r\n    }\r\n  };\r\n\r\n  const getDifficultyColor = (difficulty: string) => {\r\n    switch (difficulty) {\r\n      case 'EASY':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'MEDIUM':\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      case 'HARD':\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (flashcardId: number) => {\r\n    const cardProgress = progress.find(p => p.flashcard === flashcardId);\r\n    if (!cardProgress) return 'bg-gray-100 text-gray-800';\r\n    if (cardProgress.is_mastered) return 'bg-green-100 text-green-800';\r\n    return 'bg-orange-100 text-orange-800';\r\n  };\r\n\r\n  const getStatusText = (flashcardId: number) => {\r\n    const cardProgress = progress.find(p => p.flashcard === flashcardId);\r\n    if (!cardProgress) return 'New';\r\n    if (cardProgress.is_mastered) return 'Mastered';\r\n    return 'Still Learning';\r\n  };\r\n\r\n  const filteredFlashcards = flashcards.filter(card => {\r\n    const matchesSearch = card.word.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         card.definition.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         card.example_sentence.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    const matchesSubject = filterSubject === 'all' || card.subject === filterSubject;\r\n    const matchesDifficulty = filterDifficulty === 'all' || card.difficulty === filterDifficulty;\r\n    \r\n    let matchesStatus = true;\r\n    if (filterStatus !== 'all') {\r\n      const status = getStatusText(card.id);\r\n      switch (filterStatus) {\r\n        case 'new':\r\n          matchesStatus = status === 'New';\r\n          break;\r\n        case 'mastered':\r\n          matchesStatus = status === 'Mastered';\r\n          break;\r\n        case 'learning':\r\n          matchesStatus = status === 'Still Learning';\r\n          break;\r\n      }\r\n    }\r\n    \r\n    return matchesSearch && matchesSubject && matchesDifficulty && matchesStatus;\r\n  });\r\n\r\n  const startReview = () => {\r\n    const availableCards = filteredFlashcards.filter(card => {\r\n      const status = getStatusText(card.id);\r\n      return status === 'Still Learning' || status === 'New';\r\n    });\r\n\r\n    if (availableCards.length > 0) {\r\n      const firstCard = availableCards[0];\r\n      const session: ReviewSession = {\r\n        id: Date.now(),\r\n        started_at: new Date().toISOString(),\r\n        cards_reviewed: 0,\r\n        mastered_count: 0,\r\n        still_learning_count: 0,\r\n        remaining_cards: availableCards,\r\n        current_card: firstCard,\r\n        show_definition: false\r\n      };\r\n      setCurrentSession(session);\r\n      setIsReviewMode(true);\r\n    }\r\n  };\r\n\r\n  const flipCard = () => {\r\n    setCurrentSession(prev => prev ? { ...prev, show_definition: !prev.show_definition } : null);\r\n  };\r\n\r\n  const handleSwipeEnd = async (direction: 'left' | 'right') => {\r\n    if (!currentSession) return;\r\n\r\n    const isMastered = direction === 'right';\r\n    \r\n    // Update progress\r\n    await updateCardProgress(currentSession.current_card.id, isMastered);\r\n\r\n    // Update session stats\r\n    setCurrentSession(prev => prev ? {\r\n      ...prev,\r\n      cards_reviewed: prev.cards_reviewed + 1,\r\n      mastered_count: prev.mastered_count + (isMastered ? 1 : 0),\r\n      still_learning_count: prev.still_learning_count + (isMastered ? 0 : 1)\r\n    } : null);\r\n\r\n    // Trigger swipe animation\r\n    setSwipeDirection(direction);\r\n    \r\n    setTimeout(() => {\r\n      setSwipeDirection(null);\r\n      moveToNextCard();\r\n    }, 300);\r\n  };\r\n\r\n  const moveToNextCard = () => {\r\n    if (!currentSession) return;\r\n\r\n    const currentIndex = currentSession.remaining_cards.findIndex(\r\n      card => card.id === currentSession.current_card.id\r\n    );\r\n    \r\n    const nextCards = currentSession.remaining_cards.slice(currentIndex + 1);\r\n    \r\n    if (nextCards.length === 0) {\r\n      // End of review session\r\n      endReview();\r\n    } else {\r\n      const nextCard = nextCards[0];\r\n      setCurrentSession(prev => prev ? {\r\n        ...prev,\r\n        current_card: nextCard,\r\n        show_definition: false\r\n      } : null);\r\n    }\r\n  };\r\n\r\n  const endReview = () => {\r\n    setIsReviewMode(false);\r\n    setCurrentSession(null);\r\n    loadFlashcards(); // Reload to get updated progress\r\n  };\r\n\r\n  // Touch event handlers for swipe\r\n  const handleTouchStart = (e: React.TouchEvent) => {\r\n    setTouchStart({\r\n      x: e.touches[0].clientX,\r\n      y: e.touches[0].clientY\r\n    });\r\n  };\r\n\r\n  const handleTouchMove = (e: React.TouchEvent) => {\r\n    if (!touchStart) return;\r\n    \r\n    setTouchCurrent({\r\n      x: e.touches[0].clientX,\r\n      y: e.touches[0].clientY\r\n    });\r\n  };\r\n\r\n  const handleTouchEnd = () => {\r\n    if (!touchStart || !touchCurrent) return;\r\n\r\n    const deltaX = touchCurrent.x - touchStart.x;\r\n    const deltaY = Math.abs(touchCurrent.y - touchStart.y);\r\n\r\n    // Only trigger swipe if horizontal movement is greater than vertical\r\n    if (Math.abs(deltaX) > 100 && Math.abs(deltaX) > deltaY) {\r\n      if (deltaX > 0) {\r\n        handleSwipeEnd('right'); // Swipe right = Mastered\r\n      } else {\r\n        handleSwipeEnd('left'); // Swipe left = Still Learning\r\n      }\r\n    }\r\n\r\n    setTouchStart(null);\r\n    setTouchCurrent(null);\r\n  };\r\n\r\n  // Mouse event handlers for swipe (desktop)\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    setTouchStart({\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    });\r\n  };\r\n\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!touchStart) return;\r\n    \r\n    setTouchCurrent({\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    });\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    if (!touchStart || !touchCurrent) return;\r\n\r\n    const deltaX = touchCurrent.x - touchStart.x;\r\n    const deltaY = Math.abs(touchCurrent.y - touchStart.y);\r\n\r\n    if (Math.abs(deltaX) > 100 && Math.abs(deltaX) > deltaY) {\r\n      if (deltaX > 0) {\r\n        handleSwipeEnd('right');\r\n      } else {\r\n        handleSwipeEnd('left');\r\n      }\r\n    }\r\n\r\n    setTouchStart(null);\r\n    setTouchCurrent(null);\r\n  };\r\n\r\n  const getCardTransform = () => {\r\n    if (!touchStart || !touchCurrent) return 'translateX(0) rotate(0deg)';\r\n    \r\n    const deltaX = touchCurrent.x - touchStart.x;\r\n    const rotation = deltaX / 20;\r\n    \r\n    return `translateX(${deltaX}px) rotate(${rotation}deg)`;\r\n  };\r\n\r\n  const getCardOpacity = () => {\r\n    if (!touchStart || !touchCurrent) return 1;\r\n    \r\n    const deltaX = Math.abs(touchCurrent.x - touchStart.x);\r\n    return Math.max(0.5, 1 - deltaX / 500);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {[...Array(6)].map((_, i) => (\r\n                <div key={i} className=\"bg-white rounded-lg shadow p-6\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-full mb-2\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  if (isReviewMode && currentSession) {\r\n    const currentIndex = currentSession.remaining_cards.findIndex(\r\n      card => card.id === currentSession.current_card.id\r\n    );\r\n    const totalCards = currentSession.remaining_cards.length;\r\n\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            {/* Review Header */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <button\r\n                  onClick={endReview}\r\n                  className=\"flex items-center text-gray-600 hover:text-gray-900 transition-colors\"\r\n                >\r\n                  <ArrowLeft className=\"h-5 w-5 mr-2\" />\r\n                  <span className=\"font-medium\">End Review</span>\r\n                </button>\r\n                \r\n                <div className=\"text-center\">\r\n                  <p className=\"text-3xl font-bold text-gray-900\">\r\n                    {currentIndex + 1} / {totalCards}\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-500 mt-1\">Total Cards</p>\r\n                </div>\r\n\r\n                <div className=\"w-24\"></div> {/* Spacer for alignment */}\r\n              </div>\r\n              \r\n              <div className=\"grid grid-cols-3 gap-4\">\r\n                <div className=\"bg-red-50 rounded-lg p-4 text-center border-2 border-red-200\">\r\n                  <div className=\"flex items-center justify-center mb-2\">\r\n                    <XCircle className=\"h-5 w-5 text-red-600\" />\r\n                  </div>\r\n                  <p className=\"text-2xl font-bold text-red-600\">\r\n                    {currentSession.still_learning_count}\r\n                  </p>\r\n                  <p className=\"text-xs text-red-700 font-medium mt-1\">Still Learning</p>\r\n                </div>\r\n                \r\n                <div className=\"bg-blue-50 rounded-lg p-4 text-center border-2 border-blue-200\">\r\n                  <div className=\"flex items-center justify-center mb-2\">\r\n                    <Repeat className=\"h-5 w-5 text-blue-600\" />\r\n                  </div>\r\n                  <p className=\"text-2xl font-bold text-blue-600\">\r\n                    {currentSession.cards_reviewed}\r\n                  </p>\r\n                  <p className=\"text-xs text-blue-700 font-medium mt-1\">Reviewed</p>\r\n                </div>\r\n                \r\n                <div className=\"bg-green-50 rounded-lg p-4 text-center border-2 border-green-200\">\r\n                  <div className=\"flex items-center justify-center mb-2\">\r\n                    <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                  </div>\r\n                  <p className=\"text-2xl font-bold text-green-600\">\r\n                    {currentSession.mastered_count}\r\n                  </p>\r\n                  <p className=\"text-xs text-green-700 font-medium mt-1\">Mastered</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Swipe Instruction */}\r\n            <div className=\"flex items-center justify-between mb-4 px-4\">\r\n              <div className=\"flex items-center text-red-600\">\r\n                <ArrowLeft className=\"h-5 w-5 mr-2\" />\r\n                <span className=\"text-sm font-medium\">Swipe left: Still Learning</span>\r\n              </div>\r\n              <div className=\"flex items-center text-green-600\">\r\n                <span className=\"text-sm font-medium\">Swipe right: Mastered</span>\r\n                <ArrowLeft className=\"h-5 w-5 ml-2 transform rotate-180\" />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Flashcard */}\r\n            <div \r\n              ref={cardRef}\r\n              className={`bg-white rounded-2xl shadow-xl cursor-pointer select-none transition-all duration-300 ${\r\n                swipeDirection === 'left' ? 'opacity-0 -translate-x-full' :\r\n                swipeDirection === 'right' ? 'opacity-0 translate-x-full' : ''\r\n              }`}\r\n              style={{\r\n                transform: swipeDirection ? undefined : getCardTransform(),\r\n                opacity: swipeDirection ? undefined : getCardOpacity(),\r\n              }}\r\n              onClick={flipCard}\r\n              onTouchStart={handleTouchStart}\r\n              onTouchMove={handleTouchMove}\r\n              onTouchEnd={handleTouchEnd}\r\n              onMouseDown={handleMouseDown}\r\n              onMouseMove={handleMouseMove}\r\n              onMouseUp={handleMouseUp}\r\n              onMouseLeave={() => {\r\n                setTouchStart(null);\r\n                setTouchCurrent(null);\r\n              }}\r\n            >\r\n              <div className=\"p-8 md:p-12\">\r\n                {/* Card Header */}\r\n                <div className=\"flex items-center justify-between mb-8\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <span className={`px-3 py-1 text-xs font-semibold rounded-full ${getSubjectColor(currentSession.current_card.subject)}`}>\r\n                      {currentSession.current_card.subject}\r\n                    </span>\r\n                    <span className={`px-3 py-1 text-xs font-semibold rounded-full ${getDifficultyColor(currentSession.current_card.difficulty)}`}>\r\n                      {currentSession.current_card.difficulty}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\r\n                    <Brain className=\"h-4 w-4\" />\r\n                    <span className=\"font-medium\">{getStatusText(currentSession.current_card.id)}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Card Content */}\r\n                <div className=\"min-h-[350px] flex flex-col items-center justify-center\">\r\n                  {!currentSession.show_definition ? (\r\n                    <div className=\"text-center\">\r\n                      <div className=\"mb-6\">\r\n                        <div className=\"inline-block p-4 bg-blue-50 rounded-full mb-4\">\r\n                          <BookOpen className=\"h-8 w-8 text-blue-600\" />\r\n                        </div>\r\n                      </div>\r\n                      <h2 className=\"text-4xl md:text-5xl font-bold text-gray-900 mb-4\">\r\n                        {currentSession.current_card.word}\r\n                      </h2>\r\n                      {currentSession.current_card.pronunciation && (\r\n                        <p className=\"text-xl text-gray-500 mb-6\">\r\n                          {currentSession.current_card.pronunciation}\r\n                        </p>\r\n                      )}\r\n                      <p className=\"text-gray-400 text-sm\">Click card to flip</p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center w-full\">\r\n                      <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-8 mb-6\">\r\n                        <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center justify-center\">\r\n                          <BookOpen className=\"h-5 w-5 mr-2 text-blue-600\" />\r\n                          Definition\r\n                        </h3>\r\n                        <p className=\"text-lg text-gray-700 leading-relaxed mb-6\">\r\n                          {currentSession.current_card.definition}\r\n                        </p>\r\n                        <div className=\"border-t border-blue-200 pt-6\">\r\n                          <h4 className=\"text-sm font-bold text-gray-900 mb-3\">Example Sentence</h4>\r\n                          <p className=\"text-gray-600 italic leading-relaxed\">\r\n                            \"{currentSession.current_card.example_sentence}\"\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <p className=\"text-gray-400 text-sm\">Swipe or click to continue</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Quick Action Buttons (visible only when definition is shown) */}\r\n                {currentSession.show_definition && (\r\n                  <div className=\"flex justify-center space-x-4 mt-8\">\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleSwipeEnd('left');\r\n                      }}\r\n                      className=\"flex items-center px-6 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all transform hover:scale-105 shadow-lg\"\r\n                    >\r\n                      <XCircle className=\"h-5 w-5 mr-2\" />\r\n                      Still Learning\r\n                    </button>\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleSwipeEnd('right');\r\n                      }}\r\n                      className=\"flex items-center px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-all transform hover:scale-105 shadow-lg\"\r\n                    >\r\n                      <CheckCircle className=\"h-5 w-5 mr-2\" />\r\n                      Mastered\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progress Indicator */}\r\n            <div className=\"mt-6\">\r\n              <div className=\"bg-gray-200 rounded-full h-2 overflow-hidden\">\r\n                <div \r\n                  className=\"bg-blue-600 h-full transition-all duration-300\"\r\n                  style={{ width: `${((currentIndex + 1) / totalCards) * 100}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Flashcards</h1>\r\n              <p className=\"text-gray-600\">Master SAT vocabulary with spaced repetition</p>\r\n            </div>\r\n            <button\r\n              onClick={startReview}\r\n              disabled={filteredFlashcards.filter(card => {\r\n                const status = getStatusText(card.id);\r\n                return status === 'Still Learning' || status === 'New';\r\n              }).length === 0}\r\n              className=\"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transform hover:-translate-y-0.5\"\r\n            >\r\n              <Play className=\"h-5 w-5 mr-2\" />\r\n              Start Review\r\n            </button>\r\n          </div>\r\n\r\n          {/* Stats Overview */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n            <div className=\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Total Cards</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{flashcards.length}</p>\r\n                </div>\r\n                <BookOpen className=\"h-8 w-8 text-blue-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Mastered</p>\r\n                  <p className=\"text-2xl font-bold text-green-600\">\r\n                    {progress.filter(p => p.is_mastered).length}\r\n                  </p>\r\n                </div>\r\n                <Star className=\"h-8 w-8 text-green-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Still Learning</p>\r\n                  <p className=\"text-2xl font-bold text-orange-600\">\r\n                    {flashcards.filter(card => getStatusText(card.id) === 'Still Learning').length}\r\n                  </p>\r\n                </div>\r\n                <Clock className=\"h-8 w-8 text-orange-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">New Cards</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {flashcards.filter(card => getStatusText(card.id) === 'New').length}\r\n                  </p>\r\n                </div>\r\n                <Brain className=\"h-8 w-8 text-purple-600\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Search and Filter */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search flashcards...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n              <select\r\n                value={filterSubject}\r\n                onChange={(e) => setFilterSubject(e.target.value)}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Subjects</option>\r\n                <option value=\"MATH\">Math</option>\r\n                <option value=\"READING\">Reading</option>\r\n                <option value=\"WRITING\">Writing</option>\r\n              </select>\r\n              <select\r\n                value={filterDifficulty}\r\n                onChange={(e) => setFilterDifficulty(e.target.value)}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Difficulties</option>\r\n                <option value=\"EASY\">Easy</option>\r\n                <option value=\"MEDIUM\">Medium</option>\r\n                <option value=\"HARD\">Hard</option>\r\n              </select>\r\n              <select\r\n                value={filterStatus}\r\n                onChange={(e) => setFilterStatus(e.target.value)}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Status</option>\r\n                <option value=\"new\">New</option>\r\n                <option value=\"learning\">Still Learning</option>\r\n                <option value=\"mastered\">Mastered</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Flashcards Grid */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {filteredFlashcards.map((card) => {\r\n              const cardProgress = progress.find(p => p.flashcard === card.id);\r\n              return (\r\n                <div key={card.id} className=\"bg-white rounded-lg shadow hover:shadow-lg transition-all transform hover:-translate-y-1\">\r\n                  <div className=\"p-6\">\r\n                    {/* Card Header */}\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${getSubjectColor(card.subject)}`}>\r\n                          {card.subject}\r\n                        </span>\r\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(card.difficulty)}`}>\r\n                          {card.difficulty}\r\n                        </span>\r\n                      </div>\r\n                      <span className={`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(card.id)}`}>\r\n                        {getStatusText(card.id)}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* Card Content */}\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{card.word}</h3>\r\n                    <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">{card.definition}</p>\r\n                    <p className=\"text-gray-500 text-xs italic mb-4 line-clamp-2\">\"{card.example_sentence}\"</p>\r\n\r\n                    {/* Progress Info */}\r\n                    {cardProgress && (\r\n                      <div className=\"bg-gray-50 rounded-lg p-3 mb-4\">\r\n                        <div className=\"flex items-center justify-between text-xs text-gray-600\">\r\n                          <span>Reviewed {cardProgress.repetition_count} times</span>\r\n                          {!cardProgress.is_mastered && (\r\n                            <span>Next: {formatDate(cardProgress.next_review_date)}</span>\r\n                          )}\r\n                        </div>\r\n                        {cardProgress.is_mastered && (\r\n                          <div className=\"flex items-center mt-2 text-green-600\">\r\n                            <Star className=\"h-3 w-3 mr-1\" />\r\n                            <span className=\"text-xs font-medium\">Mastered</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Actions */}\r\n                    <button\r\n                      onClick={() => {\r\n                        setCurrentSession({\r\n                          id: Date.now(),\r\n                          started_at: new Date().toISOString(),\r\n                          cards_reviewed: 0,\r\n                          mastered_count: 0,\r\n                          still_learning_count: 0,\r\n                          remaining_cards: [card],\r\n                          current_card: card,\r\n                          show_definition: false\r\n                        });\r\n                        setIsReviewMode(true);\r\n                      }}\r\n                      className=\"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      Study Card\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Empty State */}\r\n          {filteredFlashcards.length === 0 && (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4\">\r\n                <Brain className=\"h-6 w-6 text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No flashcards found</h3>\r\n              <p className=\"text-gray-500\">\r\n                {searchTerm || filterSubject !== 'all' || filterDifficulty !== 'all' || filterStatus !== 'all'\r\n                  ? 'Try adjusting your filters'\r\n                  : 'Start by adding some flashcards to your collection'}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\homework\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[252,262],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Edit' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":7,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Edit"},"fix":{"range":[358,367],"text":""},"desc":"Remove unused variable \"Edit\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Trash2"},"fix":{"range":[367,378],"text":""},"desc":"Remove unused variable \"Trash2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Play' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":7,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Play"},"fix":{"range":[378,387],"text":""},"desc":"Remove unused variable \"Play\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Pause' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Pause"},"fix":{"range":[387,397],"text":""},"desc":"Remove unused variable \"Pause\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RotateCcw' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"RotateCcw"},"fix":{"range":[397,411],"text":""},"desc":"Remove unused variable \"RotateCcw\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Download"},"fix":{"range":[411,424],"text":""},"desc":"Remove unused variable \"Download\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDate' is defined but never used.","line":26,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"formatDate"},"fix":{"range":[518,529],"text":""},"desc":"Remove unused variable \"formatDate\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentQuestionIndex' is assigned a value but never used.","line":94,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCurrentQuestionIndex' is assigned a value but never used.","line":94,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":55},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'getMockHomeworkDetail'. Either include it or remove the dependency array.","line":133,"column":6,"nodeType":"ArrayExpression","endLine":133,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [getMockHomeworkDetail, homeworkId]","fix":{"range":[3571,3583],"text":"[getMockHomeworkDetail, homeworkId]"}}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":337,"column":63,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[9962,10008],"text":"The homework you&apos;re looking for doesn't exist."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[9962,10008],"text":"The homework you&lsquo;re looking for doesn't exist."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[9962,10008],"text":"The homework you&#39;re looking for doesn't exist."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[9962,10008],"text":"The homework you&rsquo;re looking for doesn't exist."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":337,"column":84,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[9962,10008],"text":"The homework you're looking for doesn&apos;t exist."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[9962,10008],"text":"The homework you're looking for doesn&lsquo;t exist."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[9962,10008],"text":"The homework you're looking for doesn&#39;t exist."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[9962,10008],"text":"The homework you're looking for doesn&rsquo;t exist."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":579,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":579,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21545,21548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21545,21548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport AuthGuard from '@/components/AuthGuard';\r\nimport DashboardLayout from '@/components/DashboardLayout';\r\nimport { \r\n  ArrowLeft,\r\n  Clock,\r\n  Calendar,\r\n  CheckCircle,\r\n  AlertCircle,\r\n  BookOpen,\r\n  FileText,\r\n  Users,\r\n  TrendingUp,\r\n  Edit,\r\n  Trash2,\r\n  Play,\r\n  Pause,\r\n  RotateCcw,\r\n  Download,\r\n  Eye\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { formatDate, formatDateTime, getDifficultyColor } from '@/utils/helpers';\r\n\r\ninterface Question {\r\n  id: number;\r\n  question_text: string;\r\n  question_type: 'MULTIPLE_CHOICE' | 'TEXT' | 'TRUE_FALSE';\r\n  options?: string[];\r\n  correct_answer: string;\r\n  explanation?: string;\r\n  points: number;\r\n}\r\n\r\ninterface StudentSubmission {\r\n  id: number;\r\n  student: {\r\n    id: number;\r\n    first_name: string;\r\n    last_name: string;\r\n    email: string;\r\n  };\r\n  submitted_at: string;\r\n  score: number;\r\n  max_score: number;\r\n  is_late: boolean;\r\n  answers: Record<string, string>;\r\n  time_spent_seconds: number;\r\n  feedback?: string;\r\n}\r\n\r\ninterface HomeworkDetail {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  class_obj: {\r\n    id: number;\r\n    name: string;\r\n  };\r\n  assigned_by: {\r\n    id: number;\r\n    first_name: string;\r\n    last_name: string;\r\n    email: string;\r\n  };\r\n  due_date: string;\r\n  is_published: boolean;\r\n  total_questions: number;\r\n  difficulty_level: 'EASY' | 'MEDIUM' | 'HARD';\r\n  created_at: string;\r\n  questions: Question[];\r\n  submissions: StudentSubmission[];\r\n  homework_stats: {\r\n    submission_count: number;\r\n    average_score: number;\r\n    average_time_spent: number;\r\n    on_time_submission_rate: number;\r\n  };\r\n  user_submission?: StudentSubmission;\r\n}\r\n\r\nexport default function HomeworkDetailPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const homeworkId = params?.id as string;\r\n  \r\n  const [homework, setHomework] = useState<HomeworkDetail | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'questions' | 'submissions' | 'analytics'>('overview');\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [userAnswers, setUserAnswers] = useState<Record<string, string>>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [startTime] = useState(Date.now());\r\n\r\n  useEffect(() => {\r\n    const fetchHomeworkDetail = async () => {\r\n      try {\r\n        const response = await fetch(`/api/homework/${homeworkId}/`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setHomework(data);\r\n          // Initialize user answers if they exist\r\n          if (data.user_submission) {\r\n            setUserAnswers(data.user_submission.answers);\r\n          }\r\n        } else {\r\n          // Fallback to mock data\r\n          const mockData = getMockHomeworkDetail();\r\n          setHomework(mockData);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching homework detail:', error);\r\n        const mockData = getMockHomeworkDetail();\r\n        setHomework(mockData);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (homeworkId) {\r\n      fetchHomeworkDetail();\r\n    }\r\n  }, [homeworkId]);\r\n\r\n  const getMockHomeworkDetail = (): HomeworkDetail => ({\r\n    id: parseInt(homeworkId),\r\n    title: 'Algebra Practice Set #5',\r\n    description: 'Complete exercises on quadratic equations and factoring. This homework covers solving quadratic equations using factoring, quadratic formula, and completing the square.',\r\n    class_obj: {\r\n      id: 1,\r\n      name: 'SAT Math - Advanced'\r\n    },\r\n    assigned_by: {\r\n      id: 1,\r\n      first_name: 'John',\r\n      last_name: 'Smith',\r\n      email: 'john.smith@satfergana.com'\r\n    },\r\n    due_date: '2025-02-05T23:59:59Z',\r\n    is_published: true,\r\n    total_questions: 5,\r\n    difficulty_level: 'MEDIUM',\r\n    created_at: '2025-01-20T10:00:00Z',\r\n    questions: [\r\n      {\r\n        id: 1,\r\n        question_text: 'Solve for x: xÂ² - 9 = 0',\r\n        question_type: 'MULTIPLE_CHOICE',\r\n        options: ['x = 3', 'x = -3', 'x = 3 or x = -3', 'No solution'],\r\n        correct_answer: 'x = 3 or x = -3',\r\n        explanation: 'Factor the equation: (x-3)(x+3) = 0, so x = 3 or x = -3',\r\n        points: 10\r\n      },\r\n      {\r\n        id: 2,\r\n        question_text: 'What is the discriminant of 2xÂ² + 4x + 2 = 0?',\r\n        question_type: 'MULTIPLE_CHOICE',\r\n        options: ['16', '0', '8', '-8'],\r\n        correct_answer: '0',\r\n        explanation: 'Discriminant = bÂ² - 4ac = 4Â² - 4(2)(2) = 16 - 16 = 0',\r\n        points: 10\r\n      },\r\n      {\r\n        id: 3,\r\n        question_text: 'Complete the square: xÂ² + 6x + ?',\r\n        question_type: 'TEXT',\r\n        correct_answer: '9',\r\n        explanation: 'To complete the square, add (b/2)Â² = (6/2)Â² = 9',\r\n        points: 10\r\n      },\r\n      {\r\n        id: 4,\r\n        question_text: 'True or False: All quadratic equations have real solutions.',\r\n        question_type: 'TRUE_FALSE',\r\n        correct_answer: 'False',\r\n        explanation: 'Some quadratic equations have complex solutions when the discriminant is negative.',\r\n        points: 10\r\n      },\r\n      {\r\n        id: 5,\r\n        question_text: 'If a quadratic equation has discriminant D > 0, how many real solutions does it have?',\r\n        question_type: 'MULTIPLE_CHOICE',\r\n        options: ['0', '1', '2', 'Infinite'],\r\n        correct_answer: '2',\r\n        explanation: 'When D > 0, the quadratic equation has two distinct real solutions.',\r\n        points: 10\r\n      }\r\n    ],\r\n    submissions: [\r\n      {\r\n        id: 1,\r\n        student: {\r\n          id: 2,\r\n          first_name: 'Alice',\r\n          last_name: 'Johnson',\r\n          email: 'alice@example.com'\r\n        },\r\n        submitted_at: '2025-01-25T15:30:00Z',\r\n        score: 40,\r\n        max_score: 50,\r\n        is_late: false,\r\n        answers: {\r\n          '1': 'x = 3 or x = -3',\r\n          '2': '0',\r\n          '3': '9',\r\n          '4': 'False',\r\n          '5': '2'\r\n        },\r\n        time_spent_seconds: 1800\r\n      },\r\n      {\r\n        id: 2,\r\n        student: {\r\n          id: 3,\r\n          first_name: 'Bob',\r\n          last_name: 'Wilson',\r\n          email: 'bob@example.com'\r\n        },\r\n        submitted_at: '2025-01-26T10:15:00Z',\r\n        score: 30,\r\n        max_score: 50,\r\n        is_late: false,\r\n        answers: {\r\n          '1': 'x = 3',\r\n          '2': '16',\r\n          '3': '9',\r\n          '4': 'True',\r\n          '5': '1'\r\n        },\r\n        time_spent_seconds: 2400\r\n      }\r\n    ],\r\n    homework_stats: {\r\n      submission_count: 2,\r\n      average_score: 35,\r\n      average_time_spent: 2100,\r\n      on_time_submission_rate: 100\r\n    }\r\n  });\r\n\r\n  const handleAnswerChange = (questionId: number, answer: string) => {\r\n    setUserAnswers(prev => ({\r\n      ...prev,\r\n      [questionId.toString()]: answer\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (homework?.user_submission) {\r\n      alert('You have already submitted this homework.');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const timeSpent = Math.round((Date.now() - startTime) / 1000);\r\n      \r\n      const response = await fetch(`/api/homework/${homeworkId}/submit/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          answers: userAnswers,\r\n          time_spent_seconds: timeSpent\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert('Homework submitted successfully!');\r\n        // Refresh the data\r\n        const updatedData = getMockHomeworkDetail();\r\n        updatedData.user_submission = {\r\n          id: Date.now(),\r\n          student: user!,\r\n          submitted_at: new Date().toISOString(),\r\n          score: 0, // Will be calculated by backend\r\n          max_score: (homework?.total_questions || 0) * 10,\r\n          is_late: false,\r\n          answers: userAnswers,\r\n          time_spent_seconds: timeSpent\r\n        };\r\n        setHomework(updatedData);\r\n      } else {\r\n        const error = await response.json();\r\n        alert(`Error: ${error.detail || 'Failed to submit homework'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting homework:', error);\r\n      alert('Error submitting homework. Please try again.');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const calculateProgress = () => {\r\n    if (!homework?.questions) return 0;\r\n    const answered = Object.keys(userAnswers).length;\r\n    return (answered / homework.questions.length) * 100;\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-4\"></div>\r\n            <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-8\"></div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"h-4 bg-gray-200 rounded w-full mb-4\"></div>\r\n              <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-4\"></div>\r\n              <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  if (!homework) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"text-center py-12\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Homework Not Found</h2>\r\n            <p className=\"text-gray-600 mb-4\">The homework you're looking for doesn't exist.</p>\r\n            <button\r\n              onClick={() => router.back()}\r\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n            >\r\n              Go Back\r\n            </button>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  const isOverdue = homework ? new Date() > new Date(homework.due_date) : false;\r\n  const isSubmitted = !!homework?.user_submission;\r\n  const canSubmit = !isSubmitted && !isOverdue && user?.role === 'STUDENT';\r\n\r\n  // Early return if homework is null\r\n  if (!homework) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"text-center py-12\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Loading...</h2>\r\n            <p className=\"text-gray-600\">Please wait while we load the homework.</p>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <button\r\n                onClick={() => router.back()}\r\n                className=\"flex items-center text-gray-600 hover:text-gray-900\"\r\n              >\r\n                <ArrowLeft className=\"h-5 w-5 mr-2\" />\r\n                Back to Homework\r\n              </button>\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">{homework.title}</h1>\r\n                <p className=\"text-gray-600\">{homework.description}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className={`px-3 py-1 text-sm font-medium rounded-full ${getDifficultyColor(homework.difficulty_level)}`}>\r\n                {homework.difficulty_level}\r\n              </span>\r\n              {isSubmitted && (\r\n                <span className=\"px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800\">\r\n                  Submitted\r\n                </span>\r\n              )}\r\n              {isOverdue && !isSubmitted && (\r\n                <span className=\"px-3 py-1 text-sm font-medium rounded-full bg-red-100 text-red-800\">\r\n                  Overdue\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Homework Info */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              <div className=\"flex items-center\">\r\n                <BookOpen className=\"h-5 w-5 text-blue-600 mr-3\" />\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Class</p>\r\n                  <p className=\"font-medium\">{homework.class_obj.name}</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center\">\r\n                <Calendar className=\"h-5 w-5 text-green-600 mr-3\" />\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Due Date</p>\r\n                  <p className=\"font-medium\">{formatDateTime(homework.due_date)}</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center\">\r\n                <FileText className=\"h-5 w-5 text-purple-600 mr-3\" />\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Questions</p>\r\n                  <p className=\"font-medium\">{homework.total_questions}</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center\">\r\n                <Users className=\"h-5 w-5 text-orange-600 mr-3\" />\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Submissions</p>\r\n                  <p className=\"font-medium\">{homework.homework_stats.submission_count}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Student View - Questions */}\r\n          {user?.role === 'STUDENT' && (\r\n            <div className=\"bg-white rounded-lg shadow\">\r\n              {isSubmitted ? (\r\n                <div className=\"p-6\">\r\n                  <div className=\"text-center py-8\">\r\n                    <CheckCircle className=\"h-16 w-16 text-green-600 mx-auto mb-4\" />\r\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Homework Submitted</h3>\r\n                    <p className=\"text-gray-600 mb-4\">\r\n                      You submitted this homework on {formatDateTime(homework.user_submission!.submitted_at)}\r\n                    </p>\r\n                    {homework.user_submission!.score > 0 && (\r\n                      <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                        <p className=\"text-lg font-semibold\">Score: {homework.user_submission!.score}/{homework.user_submission!.max_score}</p>\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          {Math.round((homework.user_submission!.score / homework.user_submission!.max_score) * 100)}%\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {/* Progress Bar */}\r\n                  <div className=\"p-6 border-b\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <span className=\"text-sm font-medium text-gray-700\">Progress</span>\r\n                      <span className=\"text-sm text-gray-500\">{Math.round(calculateProgress())}%</span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                      <div \r\n                        className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\" \r\n                        style={{ width: `${calculateProgress()}%` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Questions */}\r\n                  <div className=\"p-6\">\r\n                    {homework.questions.map((question, index) => (\r\n                      <div key={question.id} className=\"mb-8\">\r\n                        <div className=\"flex items-start justify-between mb-4\">\r\n                          <h3 className=\"text-lg font-medium text-gray-900\">\r\n                            Question {index + 1}\r\n                          </h3>\r\n                          <span className=\"text-sm text-gray-500\">{question.points} points</span>\r\n                        </div>\r\n                        \r\n                        <p className=\"text-gray-700 mb-4\">{question.question_text}</p>\r\n                        \r\n                        {question.question_type === 'MULTIPLE_CHOICE' && (\r\n                          <div className=\"space-y-2\">\r\n                            {question.options?.map((option, optIndex) => (\r\n                              <label key={optIndex} className=\"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer\">\r\n                                <input\r\n                                  type=\"radio\"\r\n                                  name={`question-${question.id}`}\r\n                                  value={option}\r\n                                  checked={userAnswers[question.id.toString()] === option}\r\n                                  onChange={(e) => handleAnswerChange(question.id, e.target.value)}\r\n                                  className=\"mr-3\"\r\n                                  disabled={!canSubmit}\r\n                                />\r\n                                <span>{option}</span>\r\n                              </label>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {question.question_type === 'TRUE_FALSE' && (\r\n                          <div className=\"space-y-2\">\r\n                            {['True', 'False'].map((option) => (\r\n                              <label key={option} className=\"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer\">\r\n                                <input\r\n                                  type=\"radio\"\r\n                                  name={`question-${question.id}`}\r\n                                  value={option}\r\n                                  checked={userAnswers[question.id.toString()] === option}\r\n                                  onChange={(e) => handleAnswerChange(question.id, e.target.value)}\r\n                                  className=\"mr-3\"\r\n                                  disabled={!canSubmit}\r\n                                />\r\n                                <span>{option}</span>\r\n                              </label>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {question.question_type === 'TEXT' && (\r\n                          <textarea\r\n                            value={userAnswers[question.id.toString()] || ''}\r\n                            onChange={(e) => handleAnswerChange(question.id, e.target.value)}\r\n                            placeholder=\"Type your answer here...\"\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            rows={3}\r\n                            disabled={!canSubmit}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                    \r\n                    {/* Submit Button */}\r\n                    {canSubmit && (\r\n                      <div className=\"flex justify-end\">\r\n                        <button\r\n                          onClick={handleSubmit}\r\n                          disabled={isSubmitting || Object.keys(userAnswers).length !== homework.questions.length}\r\n                          className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                        >\r\n                          {isSubmitting ? 'Submitting...' : 'Submit Homework'}\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    {isOverdue && !isSubmitted && (\r\n                      <div className=\"text-center py-4\">\r\n                        <AlertCircle className=\"h-12 w-12 text-red-600 mx-auto mb-2\" />\r\n                        <p className=\"text-red-600\">This homework is overdue and cannot be submitted.</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Teacher View - Analytics and Submissions */}\r\n          {user?.role === 'TEACHER' && (\r\n            <div className=\"bg-white rounded-lg shadow\">\r\n              <div className=\"border-b border-gray-200\">\r\n                <nav className=\"flex space-x-8 px-6\">\r\n                  {[\r\n                    { id: 'overview', label: 'Overview', icon: Eye },\r\n                    { id: 'submissions', label: 'Submissions', icon: Users },\r\n                    { id: 'analytics', label: 'Analytics', icon: TrendingUp }\r\n                  ].map(tab => (\r\n                    <button\r\n                      key={tab.id}\r\n                      onClick={() => setActiveTab(tab.id as any)}\r\n                      className={`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${\r\n                        activeTab === tab.id\r\n                          ? 'border-blue-500 text-blue-600'\r\n                          : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <tab.icon className=\"h-4 w-4 mr-2\" />\r\n                      {tab.label}\r\n                    </button>\r\n                  ))}\r\n                </nav>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                {/* Overview Tab */}\r\n                {activeTab === 'overview' && (\r\n                  <div className=\"space-y-6\">\r\n                    <div>\r\n                      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Homework Overview</h3>\r\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                        <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                          <span className=\"text-sm text-gray-600\">Submission Rate</span>\r\n                          <p className=\"text-2xl font-bold text-gray-900\">\r\n                            {Math.round((homework.homework_stats.submission_count / (homework.submissions?.length || 1)) * 100)}%\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                          <p className=\"text-sm text-gray-600\">Average Score</p>\r\n                          <p className=\"text-2xl font-bold text-gray-900\">{homework.homework_stats.average_score}%</p>\r\n                        </div>\r\n                        <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                          <p className=\"text-sm text-gray-600\">Average Time</p>\r\n                          <p className=\"text-2xl font-bold text-gray-900\">\r\n                            {Math.round(homework.homework_stats.average_time_spent / 60)} min\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <h4 className=\"font-medium text-gray-900 mb-3\">Questions</h4>\r\n                      <div className=\"space-y-2\">\r\n                        {homework.questions.map((question, index) => (\r\n                          <div key={question.id} className=\"flex items-center justify-between p-3 border rounded\">\r\n                            <span className=\"text-sm\">Question {index + 1}: {question.question_text.substring(0, 50)}...</span>\r\n                            <span className=\"text-sm text-gray-500\">{question.points} points</span>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Submissions Tab */}\r\n                {activeTab === 'submissions' && (\r\n                  <div className=\"space-y-4\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900\">Student Submissions ({homework.submissions.length})</h3>\r\n                    <div className=\"overflow-x-auto\">\r\n                      <table className=\"min-w-full divide-y divide-gray-200\">\r\n                        <thead className=\"bg-gray-50\">\r\n                          <tr>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Student</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Submitted</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Score</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Time</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                          {homework.submissions.map(submission => (\r\n                            <tr key={submission.id}>\r\n                              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                <div>\r\n                                  <div className=\"text-sm font-medium text-gray-900\">\r\n                                    {submission.student.first_name} {submission.student.last_name}\r\n                                  </div>\r\n                                  <div className=\"text-sm text-gray-500\">{submission.student.email}</div>\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                {formatDateTime(submission.submitted_at)}\r\n                              </td>\r\n                              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                <div className=\"flex items-center\">\r\n                                  <span className=\"text-sm font-medium\">{submission.score}</span>\r\n                                  <span className=\"text-sm text-gray-500 mx-1\">/</span>\r\n                                  <span className=\"text-sm text-gray-500\">{submission.max_score}</span>\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                {Math.round(submission.time_spent_seconds / 60)} min\r\n                              </td>\r\n                              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                {submission.is_late ? (\r\n                                  <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800\">\r\n                                    Late\r\n                                  </span>\r\n                                ) : (\r\n                                  <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\r\n                                    On Time\r\n                                  </span>\r\n                                )}\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Analytics Tab */}\r\n                {activeTab === 'analytics' && (\r\n                  <div className=\"space-y-6\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900\">Performance Analytics</h3>\r\n                    \r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                      <div className=\"bg-gray-50 rounded-lg p-6\">\r\n                        <h4 className=\"font-medium text-gray-900 mb-4\">Score Distribution</h4>\r\n                        <div className=\"space-y-2\">\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-sm text-gray-600\">90-100%</span>\r\n                            <span className=\"text-sm font-medium\">0 students</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-sm text-gray-600\">80-89%</span>\r\n                            <span className=\"text-sm font-medium\">1 student</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-sm text-gray-600\">70-79%</span>\r\n                            <span className=\"text-sm font-medium\">1 student</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-sm text-gray-600\">Below 70%</span>\r\n                            <span className=\"text-sm font-medium\">0 students</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"bg-gray-50 rounded-lg p-6\">\r\n                        <h4 className=\"font-medium text-gray-900 mb-4\">Question Performance</h4>\r\n                        <div className=\"space-y-2\">\r\n                          {homework.questions.map((question, index) => (\r\n                            <div key={question.id} className=\"flex justify-between\">\r\n                              <span className=\"text-sm text-gray-600\">Question {index + 1}</span>\r\n                              <span className=\"text-sm font-medium\">80% correct</span>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\homework\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[270,283],"text":""},"desc":"Remove unused variable \"Calendar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[283,293],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[306,316],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDate' is defined but never used.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":20,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"formatDate"},"fix":{"range":[393,438],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2176,2179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2176,2179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2746,2749],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2746,2749],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":304,"column":67,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10624,10659],"text":"Click &quot;Add Question\" to get started"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10624,10659],"text":"Click &ldquo;Add Question\" to get started"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10624,10659],"text":"Click &#34;Add Question\" to get started"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10624,10659],"text":"Click &rdquo;Add Question\" to get started"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":304,"column":80,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10624,10659],"text":"Click \"Add Question&quot; to get started"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10624,10659],"text":"Click \"Add Question&ldquo; to get started"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10624,10659],"text":"Click \"Add Question&#34; to get started"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10624,10659],"text":"Click \"Add Question&rdquo; to get started"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport AuthGuard from '@/components/AuthGuard';\r\nimport DashboardLayout from '@/components/DashboardLayout';\r\nimport { \r\n  ArrowLeft,\r\n  Save,\r\n  Plus,\r\n  Trash2,\r\n  Calendar,\r\n  Clock,\r\n  BookOpen,\r\n  Users\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { formatDate } from '@/utils/helpers';\r\n\r\ninterface Question {\r\n  id: string;\r\n  question_text: string;\r\n  question_type: 'MULTIPLE_CHOICE' | 'TEXT' | 'TRUE_FALSE';\r\n  options?: string[];\r\n  correct_answer: string;\r\n  explanation?: string;\r\n  points: number;\r\n}\r\n\r\ninterface HomeworkFormData {\r\n  title: string;\r\n  description: string;\r\n  class_id: number;\r\n  due_date: string;\r\n  difficulty_level: 'EASY' | 'MEDIUM' | 'HARD';\r\n  is_published: boolean;\r\n  questions: Question[];\r\n}\r\n\r\ninterface Class {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  student_count: number;\r\n}\r\n\r\nexport default function CreateHomeworkPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [classes, setClasses] = useState<Class[]>([]);\r\n  const [formData, setFormData] = useState<HomeworkFormData>({\r\n    title: '',\r\n    description: '',\r\n    class_id: 0,\r\n    due_date: '',\r\n    difficulty_level: 'MEDIUM',\r\n    is_published: false,\r\n    questions: []\r\n  });\r\n\r\n  // Fetch classes for the teacher\r\n  useEffect(() => {\r\n    const fetchClasses = async () => {\r\n      try {\r\n        const response = await fetch('/api/classes/', {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setClasses(data.results || data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching classes:', error);\r\n      }\r\n    };\r\n\r\n    if (user?.role === 'TEACHER') {\r\n      fetchClasses();\r\n    }\r\n  }, [user]);\r\n\r\n  const handleInputChange = (field: keyof HomeworkFormData, value: any) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const addQuestion = () => {\r\n    const newQuestion: Question = {\r\n      id: Date.now().toString(),\r\n      question_text: '',\r\n      question_type: 'MULTIPLE_CHOICE',\r\n      options: ['', '', '', ''],\r\n      correct_answer: '',\r\n      explanation: '',\r\n      points: 10\r\n    };\r\n    \r\n    setFormData(prev => ({\r\n      ...prev,\r\n      questions: [...prev.questions, newQuestion]\r\n    }));\r\n  };\r\n\r\n  const updateQuestion = (questionId: string, field: keyof Question, value: any) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      questions: prev.questions.map(q => \r\n        q.id === questionId ? { ...q, [field]: value } : q\r\n      )\r\n    }));\r\n  };\r\n\r\n  const removeQuestion = (questionId: string) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      questions: prev.questions.filter(q => q.id !== questionId)\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await fetch('/api/homework/', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert('Homework created successfully!');\r\n        router.push('/homework');\r\n      } else {\r\n        const error = await response.json();\r\n        alert(`Error: ${error.detail || 'Failed to create homework'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating homework:', error);\r\n      alert('Error creating homework. Please try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (user?.role !== 'TEACHER') {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"text-center py-12\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Access Denied</h2>\r\n            <p className=\"text-gray-600\">Only teachers can create homework assignments.</p>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"max-w-4xl mx-auto space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <button\r\n                onClick={() => router.back()}\r\n                className=\"flex items-center text-gray-600 hover:text-gray-900\"\r\n              >\r\n                <ArrowLeft className=\"h-5 w-5 mr-2\" />\r\n                Back to Homework\r\n              </button>\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Create Homework</h1>\r\n                <p className=\"text-gray-600\">Create a new assignment for your students</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-8\">\r\n            {/* Basic Information */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-6\">Basic Information</h2>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Title *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={formData.title}\r\n                    onChange={(e) => handleInputChange('title', e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"e.g., Algebra Practice Set #5\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Class *\r\n                  </label>\r\n                  <select\r\n                    required\r\n                    value={formData.class_id}\r\n                    onChange={(e) => handleInputChange('class_id', parseInt(e.target.value))}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    <option value=\"\">Select a class</option>\r\n                    {classes.map(cls => (\r\n                      <option key={cls.id} value={cls.id}>\r\n                        {cls.name} ({cls.student_count} students)\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Due Date *\r\n                  </label>\r\n                  <input\r\n                    type=\"datetime-local\"\r\n                    required\r\n                    value={formData.due_date}\r\n                    onChange={(e) => handleInputChange('due_date', e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Difficulty Level\r\n                  </label>\r\n                  <select\r\n                    value={formData.difficulty_level}\r\n                    onChange={(e) => handleInputChange('difficulty_level', e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    <option value=\"EASY\">Easy</option>\r\n                    <option value=\"MEDIUM\">Medium</option>\r\n                    <option value=\"HARD\">Hard</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mt-6\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Description\r\n                </label>\r\n                <textarea\r\n                  value={formData.description}\r\n                  onChange={(e) => handleInputChange('description', e.target.value)}\r\n                  rows={4}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  placeholder=\"Describe what students should do in this assignment...\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mt-6\">\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={formData.is_published}\r\n                    onChange={(e) => handleInputChange('is_published', e.target.checked)}\r\n                    className=\"mr-2\"\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-700\">\r\n                    Publish immediately (students can see this homework)\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Questions */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-lg font-semibold text-gray-900\">Questions</h2>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={addQuestion}\r\n                  className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Question\r\n                </button>\r\n              </div>\r\n\r\n              {formData.questions.length === 0 ? (\r\n                <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <BookOpen className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                  <p className=\"text-gray-600\">No questions added yet</p>\r\n                  <p className=\"text-sm text-gray-500 mt-2\">Click \"Add Question\" to get started</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-6\">\r\n                  {formData.questions.map((question, index) => (\r\n                    <div key={question.id} className=\"border border-gray-200 rounded-lg p-6\">\r\n                      <div className=\"flex items-center justify-between mb-4\">\r\n                        <h3 className=\"text-lg font-medium text-gray-900\">Question {index + 1}</h3>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => removeQuestion(question.id)}\r\n                          className=\"text-red-600 hover:text-red-800\"\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </button>\r\n                      </div>\r\n\r\n                      <div className=\"space-y-4\">\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            Question Type\r\n                          </label>\r\n                          <select\r\n                            value={question.question_type}\r\n                            onChange={(e) => updateQuestion(question.id, 'question_type', e.target.value)}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                          >\r\n                            <option value=\"MULTIPLE_CHOICE\">Multiple Choice</option>\r\n                            <option value=\"TEXT\">Text Answer</option>\r\n                            <option value=\"TRUE_FALSE\">True/False</option>\r\n                          </select>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            Question Text *\r\n                          </label>\r\n                          <textarea\r\n                            required\r\n                            value={question.question_text}\r\n                            onChange={(e) => updateQuestion(question.id, 'question_text', e.target.value)}\r\n                            rows={3}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            placeholder=\"Enter your question here...\"\r\n                          />\r\n                        </div>\r\n\r\n                        {question.question_type === 'MULTIPLE_CHOICE' && (\r\n                          <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                              Options (one per line)\r\n                            </label>\r\n                            <textarea\r\n                              value={question.options?.join('\\n') || ''}\r\n                              onChange={(e) => updateQuestion(question.id, 'options', e.target.value.split('\\n'))}\r\n                              rows={4}\r\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                              placeholder=\"Option A&#10;Option B&#10;Option C&#10;Option D\"\r\n                            />\r\n                          </div>\r\n                        )}\r\n\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                          <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                              Correct Answer *\r\n                            </label>\r\n                            <input\r\n                              type=\"text\"\r\n                              required\r\n                              value={question.correct_answer}\r\n                              onChange={(e) => updateQuestion(question.id, 'correct_answer', e.target.value)}\r\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                              placeholder={question.question_type === 'MULTIPLE_CHOICE' ? 'A, B, C, or D' : 'Enter correct answer'}\r\n                            />\r\n                          </div>\r\n\r\n                          <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                              Points\r\n                            </label>\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={question.points}\r\n                              onChange={(e) => updateQuestion(question.id, 'points', parseInt(e.target.value))}\r\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                            Explanation (optional)\r\n                          </label>\r\n                          <textarea\r\n                            value={question.explanation || ''}\r\n                            onChange={(e) => updateQuestion(question.id, 'explanation', e.target.value)}\r\n                            rows={2}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            placeholder=\"Explain why this is the correct answer...\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Submit Button */}\r\n            <div className=\"flex justify-end space-x-4\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => router.back()}\r\n                className=\"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading || !formData.title || !formData.class_id || !formData.due_date}\r\n                className=\"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n              >\r\n                <Save className=\"h-4 w-4 mr-2\" />\r\n                {isLoading ? 'Creating...' : 'Create Homework'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\homework\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[306,317],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Star' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":7,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Star"},"fix":{"range":[365,374],"text":""},"desc":"Remove unused variable \"Star\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1880,1883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1880,1883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1967,1970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1967,1970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":196,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6248,6251],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6248,6251],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport AuthGuard from '../../components/AuthGuard';\r\nimport DashboardLayout from '../../components/DashboardLayout';\r\nimport { \r\n  Clock, \r\n  Calendar, \r\n  CheckCircle, \r\n  AlertCircle,\r\n  BookOpen,\r\n  Filter,\r\n  Search,\r\n  Plus,\r\n  FileText,\r\n  TrendingUp,\r\n  Star\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { formatDate, formatDateTime, getDifficultyColor } from '../../utils/helpers';\r\nimport { homeworkApi } from '../../utils/api';\r\n\r\ninterface Homework {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  class_obj: {\r\n    id: number;\r\n    name: string;\r\n  };\r\n  assigned_by: {\r\n    id: number;\r\n    first_name: string;\r\n    last_name: string;\r\n  };\r\n  due_date: string;\r\n  is_published: boolean;\r\n  total_questions: number;\r\n  difficulty_level: 'EASY' | 'MEDIUM' | 'HARD';\r\n  created_at: string;\r\n  submission?: {\r\n    id: number;\r\n    submitted_at: string;\r\n    score: number;\r\n    max_score: number;\r\n    is_late: boolean;\r\n  };\r\n}\r\n\r\nexport default function HomeworkPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [homework, setHomework] = useState<Homework[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState<'all' | 'pending' | 'submitted' | 'overdue'>('all');\r\n\r\n  const handleCreateAssignment = () => {\r\n    router.push('/homework/create');\r\n  };\r\n\r\n  const handleViewHomework = (homeworkId: number) => {\r\n    router.push(`/homework/${homeworkId}`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchHomeworkData = async () => {\r\n      try {\r\n        let response;\r\n        if (user?.role === 'TEACHER') {\r\n          response = await homeworkApi.getHomework() as any;\r\n        } else {\r\n          response = await homeworkApi.getStudentHomework() as any;\r\n        }\r\n        setHomework(response.results || response);\r\n      } catch (error) {\r\n        console.error('Error fetching homework data:', error);\r\n        // Set empty array on error\r\n        setHomework([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchHomeworkData();\r\n    } else {\r\n      setIsLoading(false);\r\n    }\r\n  }, [user]);\r\n\r\n  const getHomeworkStatus = (hw: Homework) => {\r\n    if (hw.submission) {\r\n      return hw.submission.is_late ? 'late' : 'submitted';\r\n    }\r\n    const now = new Date();\r\n    const dueDate = new Date(hw.due_date);\r\n    return now > dueDate ? 'overdue' : 'pending';\r\n  };\r\n\r\n  const filteredHomework = homework.filter(hw => {\r\n    const matchesSearch = hw.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         hw.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         hw.class_obj.name.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    if (filterStatus === 'all') return matchesSearch;\r\n    \r\n    const status = getHomeworkStatus(hw);\r\n    return matchesSearch && status === filterStatus;\r\n  });\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'submitted':\r\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n      case 'overdue':\r\n        return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\r\n      case 'late':\r\n        return <Clock className=\"h-4 w-4 text-orange-500\" />;\r\n      default:\r\n        return <Clock className=\"h-4 w-4 text-yellow-500\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'submitted':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'overdue':\r\n        return 'bg-red-100 text-red-800';\r\n      case 'late':\r\n        return 'bg-orange-100 text-orange-800';\r\n      default:\r\n        return 'bg-yellow-100 text-yellow-800';\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"space-y-4\">\r\n              {[...Array(3)].map((_, i) => (\r\n                <div key={i} className=\"bg-white rounded-lg shadow p-6\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-full mb-2\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Homework</h1>\r\n              <p className=\"text-gray-600\">\r\n                {user?.role === 'TEACHER' ? 'Manage assignments and track student progress' : 'View and complete your assignments'}\r\n              </p>\r\n            </div>\r\n            {user?.role === 'TEACHER' && (\r\n              <button \r\n                className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                onClick={handleCreateAssignment}\r\n              >\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Create Assignment\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Search and Filter */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search homework...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n            <select\r\n              value={filterStatus}\r\n              onChange={(e) => setFilterStatus(e.target.value as any)}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"all\">All Status</option>\r\n              <option value=\"pending\">Pending</option>\r\n              <option value=\"submitted\">Submitted</option>\r\n              <option value=\"overdue\">Overdue</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* Homework List */}\r\n          <div className=\"space-y-4\">\r\n            {filteredHomework.map((hw) => {\r\n              const status = getHomeworkStatus(hw);\r\n              return (\r\n                <div key={hw.id} className=\"bg-white rounded-lg shadow hover:shadow-md transition-shadow\">\r\n                  <div className=\"p-6\">\r\n                    {/* Header */}\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center mb-2\">\r\n                          <h3 className=\"text-lg font-semibold text-gray-900 mr-3\">{hw.title}</h3>\r\n                          <span className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(hw.difficulty_level)}`}>\r\n                            {hw.difficulty_level}\r\n                          </span>\r\n                          <span className={`ml-2 px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(status)}`}>\r\n                            {status.charAt(0).toUpperCase() + status.slice(1)}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-gray-600 mb-2\">{hw.description}</p>\r\n                        <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\r\n                          <div className=\"flex items-center\">\r\n                            <BookOpen className=\"h-4 w-4 mr-1\" />\r\n                            {hw.class_obj.name}\r\n                          </div>\r\n                          <div className=\"flex items-center\">\r\n                            <FileText className=\"h-4 w-4 mr-1\" />\r\n                            {hw.total_questions} questions\r\n                          </div>\r\n                          <div className=\"flex items-center\">\r\n                            <Calendar className=\"h-4 w-4 mr-1\" />\r\n                            Due {formatDate(hw.due_date)}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center\">\r\n                        {getStatusIcon(status)}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Submission Info */}\r\n                    {hw.submission && (\r\n                      <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div>\r\n                            <p className=\"text-sm font-medium text-gray-900\">Submitted</p>\r\n                            <p className=\"text-xs text-gray-500\">{formatDateTime(hw.submission.submitted_at)}</p>\r\n                          </div>\r\n                          <div className=\"text-right\">\r\n                            <p className=\"text-lg font-semibold text-gray-900\">\r\n                              {hw.submission.score}/{hw.submission.max_score}\r\n                            </p>\r\n                            <p className=\"text-xs text-gray-500\">\r\n                              {Math.round((hw.submission.score / hw.submission.max_score) * 100)}%\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        Assigned by {hw.assigned_by.first_name} {hw.assigned_by.last_name}\r\n                      </div>\r\n                      <div className=\"flex space-x-2\">\r\n                        <button \r\n                          className=\"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors\"\r\n                          onClick={() => handleViewHomework(hw.id)}\r\n                        >\r\n                          {hw.submission ? 'View Submission' : 'Start Assignment'}\r\n                        </button>\r\n                        {user?.role === 'TEACHER' && (\r\n                          <button \r\n                            className=\"px-4 py-2 border border-gray-300 text-sm rounded-lg hover:bg-gray-50 transition-colors\"\r\n                            onClick={() => {\r\n                              router.push(`/analytics?homework_id=${hw.id}`);\r\n                            }}\r\n                          >\r\n                            <TrendingUp className=\"h-4 w-4\" />\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Empty State */}\r\n          {filteredHomework.length === 0 && (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4\">\r\n                <FileText className=\"h-6 w-6 text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No homework found</h3>\r\n              <p className=\"text-gray-500 mb-4\">\r\n                {searchTerm ? 'Try adjusting your search terms' : 'No assignments match your criteria'}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\layout.tsx","messages":[{"ruleId":"@next/next/no-page-custom-font","severity":1,"message":"Custom fonts not added in `pages/_document.js` will only load for a single page. This is discouraged. See: https://nextjs.org/docs/messages/no-page-custom-font","line":31,"column":9,"nodeType":"JSXOpeningElement","endLine":31,"endColumn":119}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Metadata } from \"next\";\r\nimport { Geist, Geist_Mono } from \"next/font/google\";\r\nimport \"./globals.css\";\r\nimport { AuthProvider } from \"@/contexts/AuthContext\";\r\n\r\nconst geistSans = Geist({\r\n  variable: \"--font-geist-sans\",\r\n  subsets: [\"latin\"],\r\n});\r\n\r\nconst geistMono = Geist_Mono({\r\n  variable: \"--font-geist-mono\",\r\n  subsets: [\"latin\"],\r\n});\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"SAT Fergana - SAT Preparation Platform\",\r\n  description: \"Comprehensive SAT preparation platform with personalized learning, practice tests, and progress tracking\",\r\n};\r\n\r\nexport default function RootLayout({\r\n  children,\r\n}: Readonly<{\r\n  children: React.ReactNode;\r\n}>) {\r\n  return (\r\n    <html lang=\"en\">\r\n      <head>\r\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\r\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossOrigin=\"anonymous\" />\r\n        <link href=\"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap\" rel=\"stylesheet\" />\r\n      </head>\r\n      <body\r\n        className={`${geistSans.variable} ${geistMono.variable} antialiased`}\r\n      >\r\n        <AuthProvider>\r\n          {children}\r\n        </AuthProvider>\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\login\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":156,"column":18,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5824,5862],"text":"\r\n              Don&apos;t have an account?"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5824,5862],"text":"\r\n              Don&lsquo;t have an account?"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5824,5862],"text":"\r\n              Don&#39;t have an account?"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5824,5862],"text":"\r\n              Don&rsquo;t have an account?"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as yup from 'yup';\r\nimport { Eye, EyeOff, BookOpen } from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { handleApiError } from '../../utils/api';\r\nimport { cn } from '../../utils/helpers';\r\n\r\nconst loginSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email('Invalid email address')\r\n    .required('Email is required'),\r\n  password: yup\r\n    .string()\r\n    .min(8, 'Password must be at least 8 characters')\r\n    .required('Password is required'),\r\n});\r\n\r\ntype LoginFormData = yup.InferType<typeof loginSchema>;\r\n\r\nexport default function LoginPage() {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const router = useRouter();\r\n  const { login } = useAuth();\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm<LoginFormData>({\r\n    resolver: yupResolver(loginSchema),\r\n  });\r\n\r\n  const onSubmit = async (data: LoginFormData) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await login(data.email, data.password);\r\n      router.push('/dashboard');\r\n    } catch (err) {\r\n      setError(handleApiError(err));\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        {/* Header */}\r\n        <div className=\"text-center\">\r\n          <div className=\"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100\">\r\n            <BookOpen className=\"h-6 w-6 text-blue-600\" />\r\n          </div>\r\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">\r\n            Sign in to SAT Fergana\r\n          </h2>\r\n          <p className=\"mt-2 text-sm text-gray-600\">\r\n            Access your personalized SAT preparation dashboard\r\n          </p>\r\n        </div>\r\n\r\n        {/* Login Form */}\r\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit(onSubmit)}>\r\n          {/* Error Message */}\r\n          {error && (\r\n            <div className=\"rounded-md bg-red-50 p-4\">\r\n              <div className=\"text-sm text-red-800\">{error}</div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"space-y-4\">\r\n            {/* Email Field */}\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                data-testid=\"email-input\"\r\n                {...register('email')}\r\n                type=\"email\"\r\n                autoComplete=\"email\"\r\n                className={`mt-1 block w-full px-3 py-2 border ${errors.email ? 'border-red-300' : 'border-gray-300'} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm`}\r\n                placeholder=\"Enter your email\"\r\n              />\r\n              {errors.email && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.email.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Password Field */}\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                Password\r\n              </label>\r\n              <div className=\"mt-1 relative\">\r\n                <input\r\n                  id=\"password\"\r\n                  data-testid=\"password-input\"\r\n                  {...register('password')}\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  autoComplete=\"current-password\"\r\n                  className={cn(\r\n                    'block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm',\r\n                    errors.password && 'border-red-500 focus:ring-red-500 focus:border-red-500'\r\n                  )}\r\n                  placeholder=\"Enter your password\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                >\r\n                  {showPassword ? (\r\n                    <EyeOff className=\"h-4 w-4 text-gray-400\" />\r\n                  ) : (\r\n                    <Eye className=\"h-4 w-4 text-gray-400\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n              {errors.password && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.password.message}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Submit Button */}\r\n          <div>\r\n            <button\r\n              type=\"submit\"\r\n              data-testid=\"submit-button\"\r\n              disabled={isLoading}\r\n              className={cn(\r\n                'group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500',\r\n                isLoading && 'opacity-50 cursor-not-allowed'\r\n              )}\r\n            >\r\n              {isLoading ? 'Signing in...' : 'Sign in'}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Register Link */}\r\n          <div className=\"text-center\">\r\n            <span className=\"text-sm text-gray-600\">\r\n              Don't have an account?{' '}\r\n              <Link href=\"/register\" className=\"font-medium text-blue-600 hover:text-blue-500\">\r\n                Register here\r\n              </Link>\r\n            </span>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\mockexams\\[examId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":3,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useState"},"fix":{"range":[31,40],"text":""},"desc":"Remove unused variable \"useState\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[27,52],"text":""},"desc":"Remove unused variable \"useEffect\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport AuthGuard from '@/components/AuthGuard';\nimport DashboardLayout from '@/components/DashboardLayout';\n\nexport default function MockExamPage() {\n  const params = useParams();\n  const router = useRouter();\n  const examId = params.examId as string;\n\n  return (\n    <AuthGuard>\n      <DashboardLayout>\n        <div className=\"p-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"bg-white rounded-lg shadow p-6\">\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">\n                Mock Exam #{examId}\n              </h1>\n              <p className=\"text-gray-600\">\n                This is the traditional mock exam interface.\n              </p>\n              <div className=\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                <h3 className=\"font-semibold text-blue-900 mb-2\">Looking for Digital SAT?</h3>\n                <p className=\"text-sm text-blue-800 mb-4\">\n                  Try our new Digital SAT practice with adaptive modules and built-in calculator!\n                </p>\n                <button\n                  onClick={() => router.push('/mockexams/bluebook')}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  Go to Digital SAT\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </DashboardLayout>\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\mockexams\\bluebook\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timer' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Timer"},"fix":{"range":[219,228],"text":""},"desc":"Remove unused variable \"Timer\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[711,714],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[711,714],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2337,2340],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2337,2340],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":102,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":105,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2456,2459],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2456,2459],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'response' is assigned a value but never used.","line":93,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { toast } from 'react-hot-toast';\nimport { \n  Clock, \n  Target, \n  Play, \n  CheckCircle, \n  FileText,\n  Timer,\n  BookOpen,\n  Calendar\n} from 'lucide-react';\nimport DashboardLayout from '@/components/DashboardLayout';\nimport AuthGuard from '@/components/AuthGuard';\nimport { bluebookApi } from '@/utils/api';\n\n// Types\ninterface BluebookExam {\n  id: number;\n  title: string;\n  description: string;\n  is_active: boolean;\n  total_duration_minutes: number;\n  has_active_attempt: boolean;\n  completed_attempts: number;\n}\n\ninterface BluebookAttempt {\n  id: number;\n  exam: BluebookExam;\n  student: any;\n  started_at?: string;\n  submitted_at?: string;\n}\n\n// Main Component\nconst BluebookDigitalSATPage: React.FC = () => {\n  const router = useRouter();\n\n  const [exams, setExams] = useState<BluebookExam[]>([]);\n  const [attempts, setAttempts] = useState<BluebookAttempt[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'available' | 'attempts'>('available');\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    try {\n      setIsLoading(true);\n      const [examsResponse, attemptsResponse] = await Promise.all([\n        bluebookApi.getExams(),\n        bluebookApi.getAttempts()\n      ]);\n      \n      console.log('API Response - Exams:', examsResponse);\n      console.log('API Response - Attempts:', attemptsResponse);\n      console.log('Exams Response Type:', typeof examsResponse);\n      console.log('Exams Response isArray:', Array.isArray(examsResponse));\n      console.log('Attempts Response Type:', typeof attemptsResponse);\n      console.log('Attempts Response isArray:', Array.isArray(attemptsResponse));\n      \n      // Debug: Check if response has data property\n      if (examsResponse && typeof examsResponse === 'object' && 'data' in examsResponse) {\n        console.log('Exams Response has data property:', examsResponse.data);\n      }\n      if (attemptsResponse && typeof attemptsResponse === 'object' && 'data' in attemptsResponse) {\n        console.log('Attempts Response has data property:', attemptsResponse.data);\n      }\n      \n      const examsData = Array.isArray(examsResponse) ? examsResponse : (examsResponse as any)?.data || [];\n      const attemptsData = Array.isArray(attemptsResponse) ? attemptsResponse : (attemptsResponse as any)?.data || [];\n      \n      console.log('Processed Exams Data:', examsData);\n      console.log('Processed Attempts Data:', attemptsData);\n      \n      setExams(examsData);\n      setAttempts(attemptsData);\n    } catch (error) {\n      console.error('Error loading data:', error);\n      toast.error('Failed to load Digital SAT data');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const startExam = async (exam: BluebookExam) => {\n    try {\n      const response = await bluebookApi.startExam(exam.id);\n      router.push(`/mockexams/bluebook/${exam.id}`);\n    } catch (error) {\n      console.error('Error starting exam:', error);\n      toast.error('Failed to start exam');\n    }\n  };\n\n  const resumeExam = (attemptId: number) => {\n    router.push(`/mockexams/bluebook/${attemptId}`);\n  };\n\n  const formatDate = (dateString: string | undefined): string => {\n    if (!dateString) return 'N/A';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const formatDuration = (minutes: number): string => {\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    return hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;\n  };\n\n  if (isLoading) {\n    return (\n      <AuthGuard>\n        <DashboardLayout>\n          <div className=\"p-6\">\n            <div className=\"max-w-6xl mx-auto\">\n              <div className=\"text-center\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n                <p className=\"mt-4 text-gray-600\">Loading Digital SAT...</p>\n              </div>\n            </div>\n          </div>\n        </DashboardLayout>\n      </AuthGuard>\n    );\n  }\n\n  return (\n    <AuthGuard>\n      <DashboardLayout>\n        <div className=\"p-6\">\n          <div className=\"max-w-6xl mx-auto\">\n            {/* Header */}\n            <div className=\"mb-8\">\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Digital SAT Practice</h1>\n              <p className=\"text-gray-600\">\n                Experience the official Digital SAT format with adaptive modules and built-in calculator\n              </p>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"mb-6\">\n              <div className=\"border-b border-gray-200\">\n                <nav className=\"-mb-px flex space-x-8\">\n                  <button\n                    onClick={() => setActiveTab('available')}\n                    className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                      activeTab === 'available'\n                        ? 'border-blue-500 text-blue-600'\n                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                    }`}\n                  >\n                    Available Exams\n                  </button>\n                  <button\n                    onClick={() => setActiveTab('attempts')}\n                    className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                      activeTab === 'attempts'\n                        ? 'border-blue-500 text-blue-600'\n                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                    }`}\n                  >\n                    My Attempts\n                  </button>\n                </nav>\n              </div>\n            </div>\n\n            {/* Content */}\n            {activeTab === 'available' && (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {exams.map((exam) => (\n                  <div key={exam.id} className=\"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6\">\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-gray-900\">{exam.title}</h3>\n                        <p className=\"text-sm text-gray-600 mt-1\">{exam.description}</p>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        {exam.is_active && (\n                          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                            Active\n                          </span>\n                        )}\n                        {exam.has_active_attempt && (\n                          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\n                            In Progress\n                          </span>\n                        )}\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center text-sm text-gray-600\">\n                        <Clock className=\"h-4 w-4 mr-2\" />\n                        <span>{formatDuration(exam.total_duration_minutes)}</span>\n                      </div>\n                      \n                      <div className=\"flex items-center text-sm text-gray-600\">\n                        <Target className=\"h-4 w-4 mr-2\" />\n                        <span>{exam.completed_attempts} completed</span>\n                      </div>\n                    </div>\n\n                    <div className=\"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                      <h3 className=\"font-semibold text-blue-900 mb-2\">Official Digital SAT Structure:</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <p className=\"font-medium text-blue-800\">Reading & Writing (64 min):</p>\n                          <p className=\"text-gray-600\">â€¢ Module 1: 32 min (27 questions)</p>\n                          <p className=\"text-gray-600\">â€¢ Module 2: 32 min (27 questions)</p>\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-blue-800\">Math (70 min):</p>\n                          <p className=\"text-gray-600\">â€¢ Module 1: 35 min (22 questions)</p>\n                          <p className=\"text-gray-600\">â€¢ Module 2: 35 min (22 questions)</p>\n                        </div>\n                      </div>\n                      <div className=\"mt-3 p-3 bg-blue-100 rounded-lg border border-blue-300\">\n                        <p className=\"font-medium text-blue-900\">Key Features:</p>\n                        <p className=\"text-sm text-gray-700\">â€¢ 4 modules total (2 per section)</p>\n                        <p className=\"text-sm text-gray-700\">â€¢ 32 minutes per module</p>\n                        <p className=\"text-sm text-gray-700\">â€¢ Module 2 adapts based on Module 1 performance</p>\n                        <p className=\"text-sm text-gray-700\">â€¢ Calculator available in Math modules</p>\n                        <p className=\"text-sm text-gray-700\">â€¢ No cross-module navigation</p>\n                      </div>\n                    </div>\n\n                    <div className=\"mt-6 flex space-x-3\">\n                      <button\n                        onClick={() => startExam(exam)}\n                        disabled={exam.has_active_attempt}\n                        className=\"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                      >\n                        <Play className=\"h-4 w-4 mr-2\" />\n                        {exam.has_active_attempt ? 'Resume' : 'Start Exam'}\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {activeTab === 'attempts' && (\n              <div className=\"space-y-4\">\n                {attempts.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No attempts yet</h3>\n                    <p className=\"text-gray-600 mb-6\">\n                      Start your first Digital SAT practice exam to see your results here.\n                    </p>\n                    <button\n                      onClick={() => setActiveTab('available')}\n                      className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                    >\n                      <Play className=\"h-4 w-4 mr-2\" />\n                      Start First Exam\n                    </button>\n                  </div>\n                ) : (\n                  attempts.map((attempt) => (\n                    <div key={attempt.id} className=\"bg-white rounded-lg shadow-md p-6\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h3 className=\"text-lg font-semibold text-gray-900\">\n                            {attempt.exam.title}\n                          </h3>\n                          <div className=\"flex items-center space-x-4 mt-2 text-sm text-gray-600\">\n                            <div className=\"flex items-center\">\n                              <Calendar className=\"h-4 w-4 mr-1\" />\n                              Started: {formatDate(attempt.started_at)}\n                            </div>\n                            {attempt.submitted_at && (\n                              <div className=\"flex items-center\">\n                                <CheckCircle className=\"h-4 w-4 mr-1\" />\n                                Completed: {formatDate(attempt.submitted_at)}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                        \n                        <div className=\"flex items-center space-x-3\">\n                          {attempt.submitted_at ? (\n                            <button\n                              onClick={() => resumeExam(attempt.id)}\n                              className=\"flex items-center px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\"\n                            >\n                              <BookOpen className=\"h-4 w-4 mr-2\" />\n                              Review Results\n                            </button>\n                          ) : (\n                            <button\n                              onClick={() => resumeExam(attempt.id)}\n                              className=\"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                            >\n                              <Play className=\"h-4 w-4 mr-2\" />\n                              Resume Exam\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </DashboardLayout>\n    </AuthGuard>\n  );\n};\n\nexport default BluebookDigitalSATPage;\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\mockexams\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertCircle"},"fix":{"range":[253,270],"text":""},"desc":"Remove unused variable \"AlertCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[270,285],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":63,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2110,2113],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2110,2113],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":104,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":107,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2368,2371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2368,2371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'response' is assigned a value but never used.","line":98,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":98,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport AuthGuard from '@/components/AuthGuard';\r\nimport DashboardLayout from '@/components/DashboardLayout';\r\nimport { \r\n  Clock, \r\n  Target, \r\n  Play, \r\n  Pause, \r\n  Square, \r\n  CheckCircle, \r\n  AlertCircle,\r\n  TrendingUp,\r\n  Calendar,\r\n  BarChart3,\r\n  Timer,\r\n  FileText,\r\n  Award,\r\n  BookOpen\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { formatDate, formatDateTime, formatDuration, getSatScoreColor } from '@/utils/helpers';\r\nimport { mockExamsApi } from '@/utils/api';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface MockExam {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  exam_type: 'FULL' | 'MATH' | 'READING' | 'WRITING';\r\n  total_questions: number;\r\n  time_limit_minutes: number;\r\n  is_active: boolean;\r\n  created_at: string;\r\n}\r\n\r\ninterface MockExamAttempt {\r\n  id: number;\r\n  mock_exam: MockExam;\r\n  started_at: string;\r\n  submitted_at?: string;\r\n  is_completed: boolean;\r\n  sat_score: number;\r\n  math_score: number;\r\n  reading_writing_score: number;\r\n  section_scores: Record<string, number>;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\ninterface ExamSession {\r\n  id: number;\r\n  mock_exam: MockExam;\r\n  started_at: string;\r\n  current_section: string;\r\n  time_remaining: number;\r\n  questions_answered: number;\r\n  total_questions: number;\r\n}\r\n\r\nexport default function MockExamsPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [exams, setExams] = useState<MockExam[]>([]);\r\n  const [attempts, setAttempts] = useState<MockExamAttempt[]>([]);\r\n  const [currentSession, setCurrentSession] = useState<ExamSession | null>(null);\r\n  const [isExamMode, setIsExamMode] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        \r\n        // Fetch available exams\r\n        const examsResponse = await mockExamsApi.getExams();\r\n        const examsData = Array.isArray(examsResponse) ? examsResponse : (examsResponse as any)?.data || [];\r\n        setExams(examsData);\r\n\r\n        // Fetch user's attempts\r\n        const attemptsResponse = await mockExamsApi.getMyAttempts();\r\n        const attemptsData = Array.isArray(attemptsResponse) ? attemptsResponse : (attemptsResponse as any)?.data || [];\r\n        setAttempts(attemptsData);\r\n        \r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        console.error('Failed to fetch data:', error);\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const startExam = async (exam: MockExam) => {\r\n    try {\r\n      const response = await mockExamsApi.startExam(exam.id);\r\n      // Navigate to the Bluebook-style exam interface\r\n      router.push(`/mockexams/${exam.id}`);\r\n    } catch (error) {\r\n      console.error('Failed to start exam:', error);\r\n    }\r\n  };\r\n\r\n  const pauseExam = () => {\r\n    // TODO: Implement pause functionality\r\n    console.log('Pausing exam');\r\n  };\r\n\r\n  const submitExam = () => {\r\n    // TODO: Implement submit functionality\r\n    setIsExamMode(false);\r\n    setCurrentSession(null);\r\n  };\r\n\r\n  const getExamTypeColor = (type: string) => {\r\n    switch (type) {\r\n      case 'FULL':\r\n        return 'bg-purple-100 text-purple-800';\r\n      case 'MATH':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'READING':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'WRITING':\r\n        return 'bg-orange-100 text-orange-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getScoreColor = (score: number) => {\r\n    if (score >= 1400) return 'text-green-600';\r\n    if (score >= 1200) return 'text-blue-600';\r\n    if (score >= 1000) return 'text-yellow-600';\r\n    return 'text-red-600';\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {[...Array(4)].map((_, i) => (\r\n                <div key={i} className=\"bg-white rounded-lg shadow p-6\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-full mb-2\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  if (isExamMode && currentSession) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"max-w-6xl mx-auto\">\r\n            {/* Exam Header */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">{currentSession.mock_exam.title}</h1>\r\n                <div className=\"flex space-x-3\">\r\n                  <button\r\n                    onClick={pauseExam}\r\n                    className=\"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    <Pause className=\"h-4 w-4 mr-2\" />\r\n                    Pause\r\n                  </button>\r\n                  <button\r\n                    onClick={submitExam}\r\n                    className=\"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                  >\r\n                    <Square className=\"h-4 w-4 mr-2\" />\r\n                    Submit Exam\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Exam Stats */}\r\n              <div className=\"grid grid-cols-4 gap-4\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"flex items-center justify-center mb-2\">\r\n                    <Timer className=\"h-5 w-5 text-red-500 mr-2\" />\r\n                    <span className=\"text-2xl font-bold text-red-500\">\r\n                      {Math.floor(currentSession.time_remaining / 60)}:{(currentSession.time_remaining % 60).toString().padStart(2, '0')}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-500\">Time Remaining</p>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-2xl font-bold text-blue-600\">\r\n                    {currentSession.current_section}\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-500\">Current Section</p>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-2xl font-bold text-green-600\">\r\n                    {currentSession.questions_answered}/{currentSession.total_questions}\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-500\">Questions Answered</p>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-2xl font-bold text-purple-600\">\r\n                    {Math.round((currentSession.questions_answered / currentSession.total_questions) * 100)}%\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-500\">Progress</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Exam Content */}\r\n            <div className=\"bg-white rounded-lg shadow p-8\">\r\n              <div className=\"text-center py-16\">\r\n                <FileText className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\r\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Exam in Progress</h2>\r\n                <p className=\"text-gray-600 mb-6\">\r\n                  This is a placeholder for the actual exam interface. In a real implementation, this would contain:\r\n                </p>\r\n                <ul className=\"text-left text-gray-600 max-w-md mx-auto space-y-2\">\r\n                  <li>â€¢ Current question with multiple choice options</li>\r\n                  <li>â€¢ Navigation between questions</li>\r\n                  <li>â€¢ Section switching functionality</li>\r\n                  <li>â€¢ Real-time timer updates</li>\r\n                  <li>â€¢ Answer saving and validation</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Mock Exams</h1>\r\n              <p className=\"text-gray-600\">Practice with full-length SAT tests and section-specific exams</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Stats Overview */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Available Exams</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{exams.length}</p>\r\n                </div>\r\n                <FileText className=\"h-8 w-8 text-blue-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Completed</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {attempts.filter(a => a.is_completed).length}\r\n                  </p>\r\n                </div>\r\n                <CheckCircle className=\"h-8 w-8 text-green-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Average Score</p>\r\n                  <p className={`text-2xl font-bold ${getScoreColor(\r\n                    attempts.filter(a => a.is_completed).length > 0\r\n                      ? Math.round(attempts.filter(a => a.is_completed).reduce((sum, a) => sum + a.sat_score, 0) / attempts.filter(a => a.is_completed).length)\r\n                      : 0\r\n                  )}`}>\r\n                    {attempts.filter(a => a.is_completed).length > 0\r\n                      ? Math.round(attempts.filter(a => a.is_completed).reduce((sum, a) => sum + a.sat_score, 0) / attempts.filter(a => a.is_completed).length)\r\n                      : 0}\r\n                  </p>\r\n                </div>\r\n                <Award className=\"h-8 w-8 text-purple-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">In Progress</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {attempts.filter(a => !a.is_completed).length}\r\n                  </p>\r\n                </div>\r\n                <Clock className=\"h-8 w-8 text-orange-600\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Bluebook Digital SAT Section */}\r\n          <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"bg-blue-600 text-white p-2 rounded-lg\">\r\n                  <BookOpen className=\"h-6 w-6\" />\r\n                </div>\r\n                <div>\r\n                  <h2 className=\"text-xl font-bold text-gray-900\">Bluebook Digital SAT</h2>\r\n                  <p className=\"text-gray-600\">Official Digital SAT practice with adaptive difficulty</p>\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={() => router.push('/mockexams/bluebook')}\r\n                className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                <Play className=\"h-4 w-4 mr-2\" />\r\n                Start Digital SAT\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"bg-blue-600 text-white p-2 rounded-lg\">\r\n                  <Timer className=\"h-6 w-6\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold text-gray-900\">2h 14min</p>\r\n                  <p className=\"text-sm text-gray-600\">Total duration</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"bg-green-600 text-white p-2 rounded-lg\">\r\n                  <Target className=\"h-6 w-6\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold text-gray-900\">Adaptive</p>\r\n                  <p className=\"text-sm text-gray-600\">2 modules per section</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"bg-purple-600 text-white p-2 rounded-lg\">\r\n                  <BookOpen className=\"h-6 w-6\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold text-gray-900\">4 Modules</p>\r\n                  <p className=\"text-sm text-gray-600\">R&W + Math</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"bg-orange-600 text-white p-2 rounded-lg\">\r\n                  <CheckCircle className=\"h-6 w-6\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold text-gray-900\">400-1600</p>\r\n                  <p className=\"text-sm text-gray-600\">SAT scoring</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n              <h3 className=\"font-semibold text-gray-900 mb-2\">Digital SAT Structure:</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n                <div>\r\n                  <p className=\"font-medium text-blue-800\">Reading & Writing (64 min):</p>\r\n                  <p className=\"text-gray-600\">â€¢ Module 1: 32 min (27 questions)</p>\r\n                  <p className=\"text-gray-600\">â€¢ Module 2: 32 min (27 questions)</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-medium text-blue-800\">Math (70 min):</p>\r\n                  <p className=\"text-gray-600\">â€¢ Module 1: 35 min (22 questions)</p>\r\n                  <p className=\"text-gray-600\">â€¢ Module 2: 35 min (22 questions)</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-3 p-3 bg-blue-100 rounded-lg border border-blue-300\">\r\n                <p className=\"font-medium text-blue-900\">Official Digital SAT Format:</p>\r\n                <p className=\"text-sm text-gray-700\">â€¢ 4 modules total (2 per section)</p>\r\n                <p className=\"text-sm text-gray-700\">â€¢ 32 minutes per module</p>\r\n                <p className=\"text-sm text-gray-700\">â€¢ Module 2 adapts based on Module 1 performance</p>\r\n                <p className=\"text-sm text-gray-700\">â€¢ No cross-module navigation allowed</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Available Exams */}\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Available Exams</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {exams.map((exam) => (\r\n                <div key={exam.id} className=\"bg-white rounded-lg shadow hover:shadow-md transition-shadow\">\r\n                  <div className=\"p-6\">\r\n                    {/* Exam Header */}\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                      <h3 className=\"text-lg font-semibold text-gray-900\">{exam.title}</h3>\r\n                      <span className={`px-2 py-1 text-xs font-medium rounded-full ${getExamTypeColor(exam.exam_type)}`}>\r\n                        {exam.exam_type}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* Exam Description */}\r\n                    <p className=\"text-gray-600 mb-4\">{exam.description}</p>\r\n\r\n                    {/* Exam Details */}\r\n                    <div className=\"space-y-2 mb-4\">\r\n                      <div className=\"flex items-center text-sm text-gray-500\">\r\n                        <FileText className=\"h-4 w-4 mr-2\" />\r\n                        {exam.total_questions} questions\r\n                      </div>\r\n                      <div className=\"flex items-center text-sm text-gray-500\">\r\n                        <Clock className=\"h-4 w-4 mr-2\" />\r\n                        {formatDuration(exam.time_limit_minutes)}\r\n                      </div>\r\n                      <div className=\"flex items-center text-sm text-gray-500\">\r\n                        <Calendar className=\"h-4 w-4 mr-2\" />\r\n                        Created {formatDate(exam.created_at)}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Action */}\r\n                    <button\r\n                      onClick={() => startExam(exam)}\r\n                      className=\"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      <Play className=\"h-4 w-4 mr-2\" />\r\n                      Start Exam\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Recent Attempts */}\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent Attempts</h2>\r\n            <div className=\"space-y-4\">\r\n              {attempts.map((attempt) => (\r\n                <div key={attempt.id} className=\"bg-white rounded-lg shadow\">\r\n                  <div className=\"p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center mb-2\">\r\n                          <h3 className=\"text-lg font-semibold text-gray-900 mr-3\">\r\n                            {attempt.mock_exam.title}\r\n                          </h3>\r\n                          <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                            attempt.is_completed ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\r\n                          }`}>\r\n                            {attempt.is_completed ? 'Completed' : 'In Progress'}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center space-x-6 text-sm text-gray-500\">\r\n                          <div className=\"flex items-center\">\r\n                            <Calendar className=\"h-4 w-4 mr-1\" />\r\n                            Started {formatDateTime(attempt.started_at)}\r\n                          </div>\r\n                          {attempt.submitted_at && (\r\n                            <div className=\"flex items-center\">\r\n                              <CheckCircle className=\"h-4 w-4 mr-1\" />\r\n                              Submitted {formatDateTime(attempt.submitted_at)}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {attempt.is_completed && (\r\n                          <div className=\"mt-4 grid grid-cols-3 gap-4\">\r\n                            <div className=\"text-center\">\r\n                              <p className={`text-lg font-bold ${getSatScoreColor(attempt.sat_score)}`}>\r\n                                {attempt.sat_score}\r\n                              </p>\r\n                              <p className=\"text-xs text-gray-500\">Total Score</p>\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                              <p className=\"text-lg font-bold text-blue-600\">{attempt.math_score}</p>\r\n                              <p className=\"text-xs text-gray-500\">Math</p>\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                              <p className=\"text-lg font-bold text-green-600\">{attempt.reading_writing_score}</p>\r\n                              <p className=\"text-xs text-gray-500\">Reading & Writing</p>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div className=\"flex space-x-2\">\r\n                        {attempt.is_completed ? (\r\n                          <button className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\">\r\n                            <BarChart3 className=\"h-4 w-4\" />\r\n                          </button>\r\n                        ) : (\r\n                          <button\r\n                            onClick={() => {\r\n                              const session: ExamSession = {\r\n                                id: attempt.id,\r\n                                mock_exam: attempt.mock_exam,\r\n                                started_at: attempt.started_at,\r\n                                current_section: 'Math - No Calculator',\r\n                                time_remaining: 60 * 60, // 1 hour remaining\r\n                                questions_answered: 25,\r\n                                total_questions: attempt.mock_exam.total_questions\r\n                              };\r\n                              setCurrentSession(session);\r\n                              setIsExamMode(true);\r\n                            }}\r\n                            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                          >\r\n                            <Play className=\"h-4 w-4\" />\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\profile\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":43,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4299,4302],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4299,4302],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":132,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":132,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport AuthGuard from '../../components/AuthGuard';\r\nimport DashboardLayout from '../../components/DashboardLayout';\r\nimport { \r\n  User, \r\n  Mail, \r\n  Phone, \r\n  Calendar, \r\n  BookOpen, \r\n  Award,\r\n  Settings,\r\n  Save,\r\n  Camera\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { usersApi } from '../../utils/api';\r\nimport { formatDate } from '../../utils/helpers';\r\n\r\ninterface StudentProfile {\r\n  sat_exam_date: string | null;\r\n  weak_areas: { [key: string]: number };\r\n  target_sat_score: number;\r\n  estimated_current_score: number;\r\n}\r\n\r\ninterface ProfileData {\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  phone_number: string;\r\n  date_of_birth: string;\r\n  grade_level: number;\r\n  target_sat_score: number;\r\n  sat_exam_date: string | null;\r\n  bio: string;\r\n}\r\n\r\nexport default function ProfilePage() {\r\n  const { user, updateUser } = useAuth();\r\n  const router = useRouter();\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [studentProfile, setStudentProfile] = useState<StudentProfile | null>(null);\r\n  const [profileData, setProfileData] = useState<ProfileData>({\r\n    first_name: user?.first_name || '',\r\n    last_name: user?.last_name || '',\r\n    email: user?.email || '',\r\n    phone_number: user?.phone_number || '',\r\n    date_of_birth: user?.date_of_birth || '',\r\n    grade_level: user?.grade_level || 11,\r\n    target_sat_score: user?.target_sat_score || 1400,\r\n    sat_exam_date: null,\r\n    bio: user?.bio || ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Fetch student profile if user is a student\r\n    const fetchStudentProfile = async () => {\r\n      if (user?.role === 'STUDENT') {\r\n        try {\r\n          const profile = await usersApi.getStudentProfile() as StudentProfile;\r\n          setStudentProfile(profile);\r\n          setProfileData(prev => ({\r\n            ...prev,\r\n            sat_exam_date: profile.sat_exam_date,\r\n            target_sat_score: profile.target_sat_score\r\n          }));\r\n        } catch (error) {\r\n          console.log('Student profile not found:', error);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchStudentProfile();\r\n  }, [user]);\r\n\r\n  // Keep form in sync with latest user and studentProfile data when not editing\r\n  useEffect(() => {\r\n    if (user && !isEditing) {\r\n      setProfileData(prev => ({\r\n        ...prev,\r\n        first_name: user.first_name || '',\r\n        last_name: user.last_name || '',\r\n        email: user.email || '',\r\n        phone_number: user.phone_number || '',\r\n        date_of_birth: user.date_of_birth || '',\r\n        grade_level: user.grade_level || 11,\r\n        target_sat_score: studentProfile?.target_sat_score || user.target_sat_score || 1400,\r\n        sat_exam_date: studentProfile?.sat_exam_date || null,\r\n        bio: user.bio || ''\r\n      }));\r\n    }\r\n  }, [user, studentProfile, isEditing]);\r\n\r\n  const handleSave = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      // Update basic user profile\r\n      await usersApi.updateProfile({\r\n        first_name: profileData.first_name,\r\n        last_name: profileData.last_name,\r\n        email: profileData.email,\r\n        phone_number: profileData.phone_number,\r\n        date_of_birth: profileData.date_of_birth,\r\n        grade_level: profileData.grade_level,\r\n        bio: profileData.bio\r\n      });\r\n      \r\n      // Update student profile if user is a student\r\n      if (user?.role === 'STUDENT') {\r\n        // Update exam date if it changed\r\n        if (profileData.sat_exam_date !== studentProfile?.sat_exam_date) {\r\n          await usersApi.updateExamDate(profileData.sat_exam_date || '');\r\n        }\r\n        \r\n        // Update other student profile data\r\n        await usersApi.updateStudentProfile({\r\n          target_sat_score: profileData.target_sat_score,\r\n          estimated_current_score: studentProfile?.estimated_current_score || 1000,\r\n          weak_areas: studentProfile?.weak_areas || {}\r\n        });\r\n      }\r\n      \r\n      // Refresh user from backend and update local user context\r\n      if (user) {\r\n        try {\r\n          const updatedUser = await usersApi.getProfile();\r\n          updateUser(updatedUser as any);\r\n        } catch (err) {\r\n          updateUser({\r\n            ...user,\r\n            ...profileData\r\n          });\r\n        }\r\n      }\r\n      \r\n      // Refresh student profile\r\n      if (user?.role === 'STUDENT') {\r\n        const updatedProfile = await usersApi.getStudentProfile() as StudentProfile;\r\n        setStudentProfile(updatedProfile);\r\n      }\r\n      \r\n      setIsEditing(false);\r\n      // Show success message (you could replace this with a toast notification)\r\n      console.log('Profile updated successfully!');\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      // Show error message (you could replace this with a toast notification)\r\n      console.error('Error updating profile. Please try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field: keyof ProfileData, value: string | number) => {\r\n    setProfileData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    // Reset to original user data\r\n    if (user) {\r\n      setProfileData({\r\n        first_name: user.first_name,\r\n        last_name: user.last_name,\r\n        email: user.email,\r\n        phone_number: user.phone_number || '',\r\n        date_of_birth: user.date_of_birth || '',\r\n        grade_level: user.grade_level || 11,\r\n        target_sat_score: studentProfile?.target_sat_score || user.target_sat_score || 1400,\r\n        sat_exam_date: studentProfile?.sat_exam_date || null,\r\n        bio: user.bio || ''\r\n      });\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"max-w-4xl mx-auto space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Profile Settings</h1>\r\n              <p className=\"text-gray-600\">Manage your personal information and preferences</p>\r\n            </div>\r\n            <div className=\"flex space-x-2\">\r\n              {isEditing ? (\r\n                <>\r\n                  <button\r\n                    onClick={handleCancel}\r\n                    className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleSave}\r\n                    disabled={isLoading}\r\n                    className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n                  >\r\n                    <Save className=\"h-4 w-4 mr-2\" />\r\n                    {isLoading ? 'Saving...' : 'Save Changes'}\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <button\r\n                  onClick={() => setIsEditing(true)}\r\n                  className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  <Settings className=\"h-4 w-4 mr-2\" />\r\n                  Edit Profile\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Profile Content */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n            {/* Profile Picture & Basic Info */}\r\n            <div className=\"lg:col-span-1\">\r\n              <div className=\"bg-white rounded-lg shadow p-6\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"relative inline-block\">\r\n                    <div className=\"h-24 w-24 rounded-full bg-blue-100 flex items-center justify-center\">\r\n                      <User className=\"h-12 w-12 text-blue-600\" />\r\n                    </div>\r\n                    {isEditing && (\r\n                      <button className=\"absolute bottom-0 right-0 bg-blue-600 rounded-full p-2 text-white hover:bg-blue-700\">\r\n                        <Camera className=\"h-4 w-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                  <h2 className=\"mt-4 text-xl font-semibold text-gray-900\">\r\n                    {user.first_name} {user.last_name}\r\n                  </h2>\r\n                  <p className=\"text-gray-600\">{user.role === 'STUDENT' ? 'Student' : user.role === 'TEACHER' ? 'Teacher' : 'Admin'}</p>\r\n                  <p className=\"text-sm text-gray-500 mt-1\">Member since {formatDate(user.created_at || '')}</p>\r\n                </div>\r\n\r\n                {/* Quick Stats */}\r\n                <div className=\"mt-6 space-y-3\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-gray-600\">Study Streak</span>\r\n                    <span className=\"text-sm font-medium text-gray-900\">12 days</span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-gray-600\">Completed</span>\r\n                    <span className=\"text-sm font-medium text-gray-900\">87%</span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-gray-600\">SAT Score</span>\r\n                    <span className=\"text-sm font-medium text-gray-900\">1250</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Detailed Information */}\r\n            <div className=\"lg:col-span-2\">\r\n              <div className=\"bg-white rounded-lg shadow\">\r\n                <div className=\"p-6 space-y-6\">\r\n                  {/* Personal Information */}\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Personal Information</h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          First Name\r\n                        </label>\r\n                        {isEditing ? (\r\n                          <input\r\n                            type=\"text\"\r\n                            value={profileData.first_name}\r\n                            onChange={(e) => handleInputChange('first_name', e.target.value)}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                          />\r\n                        ) : (\r\n                          <p className=\"text-gray-900\">{user.first_name}</p>\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Last Name\r\n                        </label>\r\n                        {isEditing ? (\r\n                          <input\r\n                            type=\"text\"\r\n                            value={profileData.last_name}\r\n                            onChange={(e) => handleInputChange('last_name', e.target.value)}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                          />\r\n                        ) : (\r\n                          <p className=\"text-gray-900\">{user.last_name}</p>\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Email\r\n                        </label>\r\n                        <div className=\"flex items-center\">\r\n                          <Mail className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                          {isEditing ? (\r\n                            <input\r\n                              type=\"email\"\r\n                              value={profileData.email}\r\n                              onChange={(e) => handleInputChange('email', e.target.value)}\r\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            />\r\n                          ) : (\r\n                            <p className=\"text-gray-900\">{user.email}</p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Phone Number\r\n                        </label>\r\n                        <div className=\"flex items-center\">\r\n                          <Phone className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                          {isEditing ? (\r\n                            <input\r\n                              type=\"tel\"\r\n                              value={profileData.phone_number}\r\n                              onChange={(e) => handleInputChange('phone_number', e.target.value)}\r\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            />\r\n                          ) : (\r\n                            <p className=\"text-gray-900\">{user.phone_number || 'Not provided'}</p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Date of Birth\r\n                        </label>\r\n                        <div className=\"flex items-center\">\r\n                          <Calendar className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                          {isEditing ? (\r\n                            <input\r\n                              type=\"date\"\r\n                              value={profileData.date_of_birth}\r\n                              onChange={(e) => handleInputChange('date_of_birth', e.target.value)}\r\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            />\r\n                          ) : (\r\n                            <p className=\"text-gray-900\">{user.date_of_birth ? formatDate(user.date_of_birth) : 'Not provided'}</p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Grade Level\r\n                        </label>\r\n                        <div className=\"flex items-center\">\r\n                          <BookOpen className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                          {isEditing ? (\r\n                            <select\r\n                              value={profileData.grade_level}\r\n                              onChange={(e) => handleInputChange('grade_level', parseInt(e.target.value))}\r\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            >\r\n                              {[9, 10, 11, 12].map(grade => (\r\n                                <option key={grade} value={grade}>Grade {grade}</option>\r\n                              ))}\r\n                            </select>\r\n                          ) : (\r\n                            <p className=\"text-gray-900\">Grade {user.grade_level || 'Not specified'}</p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Academic Information */}\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Academic Information</h3>\r\n                    <div className=\"space-y-4\">\r\n                      {user?.role === 'STUDENT' && (\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            SAT Exam Date\r\n                          </label>\r\n                          <div className=\"flex items-center\">\r\n                            <Calendar className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                            {isEditing ? (\r\n                              <input\r\n                                type=\"datetime-local\"\r\n                                value={profileData.sat_exam_date ? new Date(profileData.sat_exam_date).toISOString().slice(0, 16) : ''}\r\n                                onChange={(e) => handleInputChange('sat_exam_date', e.target.value)}\r\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                              />\r\n                            ) : (\r\n                              <p className=\"text-gray-900\">\r\n                                {studentProfile?.sat_exam_date \r\n                                  ? new Date(studentProfile.sat_exam_date).toLocaleDateString() + ' at ' + new Date(studentProfile.sat_exam_date).toLocaleTimeString()\r\n                                  : 'Not set'\r\n                                }\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                          {!isEditing && (\r\n                            <p className=\"text-xs text-gray-500 mt-1\">\r\n                              This date is used for the countdown timer on your dashboard\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Target SAT Score\r\n                        </label>\r\n                        <div className=\"flex items-center\">\r\n                          <Award className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                          {isEditing ? (\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"400\"\r\n                              max=\"1600\"\r\n                              value={profileData.target_sat_score}\r\n                              onChange={(e) => handleInputChange('target_sat_score', parseInt(e.target.value))}\r\n                              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            />\r\n                          ) : (\r\n                            <p className=\"text-gray-900\">{studentProfile?.target_sat_score || user.target_sat_score || 'Not set'}</p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Bio\r\n                        </label>\r\n                        {isEditing ? (\r\n                          <textarea\r\n                            value={profileData.bio}\r\n                            onChange={(e) => handleInputChange('bio', e.target.value)}\r\n                            rows={4}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            placeholder=\"Tell us about yourself...\"\r\n                          />\r\n                        ) : (\r\n                          <p className=\"text-gray-900\">{user.bio || 'No bio provided'}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\questionbank\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[191,203],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[225,236],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[266,281],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":46,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport AuthGuard from '@/components/AuthGuard';\r\nimport DashboardLayout from '@/components/DashboardLayout';\r\nimport { \r\n  Brain, \r\n  Filter, \r\n  Search, \r\n  Play, \r\n  Clock, \r\n  CheckCircle, \r\n  XCircle,\r\n  TrendingUp,\r\n  BarChart3,\r\n  RefreshCw,\r\n  BookOpen\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { getSubjectColor, getDifficultyColor } from '@/utils/helpers';\r\nimport { questionBankApi } from '@/utils/api';\r\n\r\ninterface Question {\r\n  id: number;\r\n  question_text: string;\r\n  question_type: 'MULTIPLE_CHOICE' | 'TEXT' | 'MATH';\r\n  subject: 'MATH' | 'READING' | 'WRITING';\r\n  difficulty: 'EASY' | 'MEDIUM' | 'HARD';\r\n  correct_answer: string;\r\n  explanation: string;\r\n  options?: string[];\r\n  tags: string[];\r\n  attempt_count: number;\r\n  accuracy_rate: number;\r\n}\r\n\r\ninterface PracticeSession {\r\n  id: number;\r\n  started_at: string;\r\n  questions_answered: number;\r\n  correct_answers: number;\r\n  time_spent: number;\r\n}\r\n\r\nexport default function QuestionBankPage() {\r\n  const { user } = useAuth();\r\n  const [questions, setQuestions] = useState<Question[]>([]);\r\n  const [currentQuestion, setCurrentQuestion] = useState<Question | null>(null);\r\n  const [selectedAnswer, setSelectedAnswer] = useState<string>('');\r\n  const [showExplanation, setShowExplanation] = useState(false);\r\n  const [isPracticeMode, setIsPracticeMode] = useState(false);\r\n  const [sessionStats, setSessionStats] = useState<PracticeSession | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterSubject, setFilterSubject] = useState<string>('all');\r\n  const [filterDifficulty, setFilterDifficulty] = useState<string>('all');\r\n  const [filterType, setFilterType] = useState<string>('all');\r\n\r\n  useEffect(() => {\r\n    const fetchQuestions = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const response = await questionBankApi.getQuestions({\r\n          subject: filterSubject !== 'all' ? filterSubject : undefined,\r\n          difficulty: filterDifficulty !== 'all' ? filterDifficulty : undefined,\r\n          question_type: filterType !== 'all' ? filterType : undefined,\r\n          search: searchTerm || undefined\r\n        });\r\n        setQuestions(response.results || response);\r\n      } catch (error) {\r\n        console.error('Error fetching questions:', error);\r\n        setQuestions([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchQuestions();\r\n  }, [filterSubject, filterDifficulty, filterType, searchTerm]);\r\n\r\n  const filteredQuestions = questions.filter(q => {\r\n    const matchesSearch = q.question_text.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         q.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));\r\n    \r\n    const matchesSubject = filterSubject === 'all' || q.subject === filterSubject;\r\n    const matchesDifficulty = filterDifficulty === 'all' || q.difficulty === filterDifficulty;\r\n    const matchesType = filterType === 'all' || q.question_type === filterType;\r\n    \r\n    return matchesSearch && matchesSubject && matchesDifficulty && matchesType;\r\n  });\r\n\r\n  const startPractice = () => {\r\n    const availableQuestions = filteredQuestions.length > 0 ? filteredQuestions : questions;\r\n    if (availableQuestions.length > 0) {\r\n      const randomQuestion = availableQuestions[Math.floor(Math.random() * availableQuestions.length)];\r\n      setCurrentQuestion(randomQuestion);\r\n      setIsPracticeMode(true);\r\n      setSelectedAnswer('');\r\n      setShowExplanation(false);\r\n      setSessionStats({\r\n        id: Date.now(),\r\n        started_at: new Date().toISOString(),\r\n        questions_answered: 0,\r\n        correct_answers: 0,\r\n        time_spent: 0\r\n      });\r\n    }\r\n  };\r\n\r\n  const submitAnswer = async () => {\r\n    if (!currentQuestion || !selectedAnswer) return;\r\n\r\n    const isCorrect = selectedAnswer === currentQuestion.correct_answer;\r\n    setShowExplanation(true);\r\n\r\n    // Save attempt to backend\r\n    try {\r\n      await questionBankApi.submitAttempt({\r\n        question: currentQuestion.id,\r\n        selected_answer: selectedAnswer,\r\n        time_taken_seconds: sessionStats ? Math.floor((Date.now() - new Date(sessionStats.started_at).getTime()) / 1000) : 0,\r\n        attempt_type: 'PRACTICE'\r\n      });\r\n    } catch (error) {\r\n      console.error('Error saving attempt:', error);\r\n    }\r\n\r\n    setSessionStats(prev => prev ? {\r\n      ...prev,\r\n      questions_answered: prev.questions_answered + 1,\r\n      correct_answers: prev.correct_answers + (isCorrect ? 1 : 0)\r\n    } : null);\r\n  };\r\n\r\n  const nextQuestion = () => {\r\n    const availableQuestions = filteredQuestions.length > 0 ? filteredQuestions : questions;\r\n    const remainingQuestions = availableQuestions.filter(q => q.id !== currentQuestion?.id);\r\n    \r\n    if (remainingQuestions.length > 0) {\r\n      const randomQuestion = remainingQuestions[Math.floor(Math.random() * remainingQuestions.length)];\r\n      setCurrentQuestion(randomQuestion);\r\n      setSelectedAnswer('');\r\n      setShowExplanation(false);\r\n    } else {\r\n      // End practice session\r\n      setIsPracticeMode(false);\r\n      setCurrentQuestion(null);\r\n    }\r\n  };\r\n\r\n  const endPractice = () => {\r\n    setIsPracticeMode(false);\r\n    setCurrentQuestion(null);\r\n    setSelectedAnswer('');\r\n    setShowExplanation(false);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {[...Array(6)].map((_, i) => (\r\n                <div key={i} className=\"bg-white rounded-lg shadow p-6\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-full mb-2\"></div>\r\n                  <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  if (isPracticeMode && currentQuestion) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            {/* Practice Header */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Practice Mode</h1>\r\n                <button\r\n                  onClick={endPractice}\r\n                  className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                >\r\n                  Exit Practice\r\n                </button>\r\n              </div>\r\n              \r\n              {sessionStats && (\r\n                <div className=\"grid grid-cols-3 gap-4\">\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-2xl font-bold text-blue-600\">{sessionStats.questions_answered}</p>\r\n                    <p className=\"text-sm text-gray-500\">Questions Answered</p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-2xl font-bold text-green-600\">\r\n                      {sessionStats.questions_answered > 0 \r\n                        ? Math.round((sessionStats.correct_answers / sessionStats.questions_answered) * 100)\r\n                        : 0}%\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-500\">Accuracy</p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-2xl font-bold text-purple-600\">{sessionStats.correct_answers}</p>\r\n                    <p className=\"text-sm text-gray-500\">Correct Answers</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Question Card */}\r\n            <div className=\"bg-white rounded-lg shadow p-8\">\r\n              {/* Question Header */}\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <span className={`px-2 py-1 text-xs font-medium rounded-full ${getSubjectColor(currentQuestion.subject)}`}>\r\n                    {currentQuestion.subject}\r\n                  </span>\r\n                  <span className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(currentQuestion.difficulty)}`}>\r\n                    {currentQuestion.difficulty}\r\n                  </span>\r\n                  <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800\">\r\n                    {currentQuestion.question_type.replace('_', ' ')}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\r\n                  <Brain className=\"h-4 w-4\" />\r\n                  <span>Accuracy: {currentQuestion.accuracy_rate}%</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Question Text */}\r\n              <div className=\"mb-8\">\r\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\r\n                  {currentQuestion.question_text}\r\n                </h2>\r\n\r\n                {/* Answer Options */}\r\n                {currentQuestion.question_type === 'MULTIPLE_CHOICE' && currentQuestion.options && (\r\n                  <div className=\"space-y-3\">\r\n                    {currentQuestion.options.map((option, index) => (\r\n                      <label\r\n                        key={index}\r\n                        className={`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors ${\r\n                          selectedAnswer === option\r\n                            ? 'border-blue-500 bg-blue-50'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                        } ${showExplanation && option === currentQuestion.correct_answer ? 'border-green-500 bg-green-50' : ''}\r\n                          ${showExplanation && selectedAnswer === option && option !== currentQuestion.correct_answer ? 'border-red-500 bg-red-50' : ''}\r\n                        `}\r\n                      >\r\n                        <input\r\n                          type=\"radio\"\r\n                          name=\"answer\"\r\n                          value={option}\r\n                          checked={selectedAnswer === option}\r\n                          onChange={(e) => setSelectedAnswer(e.target.value)}\r\n                          disabled={showExplanation}\r\n                          className=\"mr-3\"\r\n                        />\r\n                        <span className=\"flex-1\">{option}</span>\r\n                        {showExplanation && option === currentQuestion.correct_answer && (\r\n                          <CheckCircle className=\"h-5 w-5 text-green-500\" />\r\n                        )}\r\n                        {showExplanation && selectedAnswer === option && option !== currentQuestion.correct_answer && (\r\n                          <XCircle className=\"h-5 w-5 text-red-500\" />\r\n                        )}\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {currentQuestion.question_type === 'TEXT' && (\r\n                  <textarea\r\n                    value={selectedAnswer}\r\n                    onChange={(e) => setSelectedAnswer(e.target.value)}\r\n                    disabled={showExplanation}\r\n                    placeholder=\"Type your answer here...\"\r\n                    className=\"w-full p-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200\"\r\n                    rows={4}\r\n                  />\r\n                )}\r\n              </div>\r\n\r\n              {/* Explanation */}\r\n              {showExplanation && (\r\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6\">\r\n                  <h3 className=\"font-semibold text-blue-900 mb-2\">Explanation</h3>\r\n                  <p className=\"text-blue-800\">{currentQuestion.explanation}</p>\r\n                </div>\r\n              )}\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex justify-between\">\r\n                <div className=\"text-sm text-gray-500\">\r\n                  Question {currentQuestion.id} â€¢ {currentQuestion.attempt_count} attempts\r\n                </div>\r\n                <div className=\"flex space-x-3\">\r\n                  {!showExplanation ? (\r\n                    <button\r\n                      onClick={submitAnswer}\r\n                      disabled={!selectedAnswer}\r\n                      className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                    >\r\n                      Submit Answer\r\n                    </button>\r\n                  ) : (\r\n                    <button\r\n                      onClick={nextQuestion}\r\n                      className=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                    >\r\n                      Next Question\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Question Bank</h1>\r\n              <p className=\"text-gray-600\">Practice with thousands of SAT questions</p>\r\n            </div>\r\n            <button\r\n              onClick={startPractice}\r\n              className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              <Play className=\"h-4 w-4 mr-2\" />\r\n              Start Practice\r\n            </button>\r\n          </div>\r\n\r\n          {/* Stats Overview */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Total Questions</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{questions.length}</p>\r\n                </div>\r\n                <BookOpen className=\"h-8 w-8 text-blue-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Math</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {questions.filter(q => q.subject === 'MATH').length}\r\n                  </p>\r\n                </div>\r\n                <BarChart3 className=\"h-8 w-8 text-green-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Reading</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {questions.filter(q => q.subject === 'READING').length}\r\n                  </p>\r\n                </div>\r\n                <Brain className=\"h-8 w-8 text-purple-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Writing</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {questions.filter(q => q.subject === 'WRITING').length}\r\n                  </p>\r\n                </div>\r\n                <RefreshCw className=\"h-8 w-8 text-orange-600\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Search and Filter */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search questions...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n              <select\r\n                value={filterSubject}\r\n                onChange={(e) => setFilterSubject(e.target.value)}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Subjects</option>\r\n                <option value=\"MATH\">Math</option>\r\n                <option value=\"READING\">Reading</option>\r\n                <option value=\"WRITING\">Writing</option>\r\n              </select>\r\n              <select\r\n                value={filterDifficulty}\r\n                onChange={(e) => setFilterDifficulty(e.target.value)}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Difficulties</option>\r\n                <option value=\"EASY\">Easy</option>\r\n                <option value=\"MEDIUM\">Medium</option>\r\n                <option value=\"HARD\">Hard</option>\r\n              </select>\r\n              <select\r\n                value={filterType}\r\n                onChange={(e) => setFilterType(e.target.value)}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">All Types</option>\r\n                <option value=\"MULTIPLE_CHOICE\">Multiple Choice</option>\r\n                <option value=\"TEXT\">Text Response</option>\r\n                <option value=\"MATH\">Math Entry</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Questions Grid */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {filteredQuestions.map((question) => (\r\n              <div key={question.id} className=\"bg-white rounded-lg shadow hover:shadow-md transition-shadow\">\r\n                <div className=\"p-6\">\r\n                  {/* Question Header */}\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className={`px-2 py-1 text-xs font-medium rounded-full ${getSubjectColor(question.subject)}`}>\r\n                        {question.subject}\r\n                      </span>\r\n                      <span className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(question.difficulty)}`}>\r\n                        {question.difficulty}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-1 text-xs text-gray-500\">\r\n                      <Brain className=\"h-3 w-3\" />\r\n                      <span>{question.accuracy_rate}%</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Question Text */}\r\n                  <h3 className=\"text-sm font-medium text-gray-900 mb-3 line-clamp-3\">\r\n                    {question.question_text}\r\n                  </h3>\r\n\r\n                  {/* Tags */}\r\n                  <div className=\"flex flex-wrap gap-1 mb-4\">\r\n                    {question.tags.map((tag, index) => (\r\n                      <span\r\n                        key={index}\r\n                        className=\"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded\"\r\n                      >\r\n                        {tag}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {/* Stats */}\r\n                  <div className=\"flex items-center justify-between text-xs text-gray-500 mb-4\">\r\n                    <span>{question.attempt_count} attempts</span>\r\n                    <span>{question.question_type.replace('_', ' ')}</span>\r\n                  </div>\r\n\r\n                  {/* Actions */}\r\n                  <button\r\n                    onClick={() => {\r\n                      setCurrentQuestion(question);\r\n                      setIsPracticeMode(true);\r\n                      setSelectedAnswer('');\r\n                      setShowExplanation(false);\r\n                    }}\r\n                    className=\"w-full px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    Practice Question\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Empty State */}\r\n          {filteredQuestions.length === 0 && (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4\">\r\n                <Brain className=\"h-6 w-6 text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No questions found</h3>\r\n              <p className=\"text-gray-500\">\r\n                {searchTerm || filterSubject !== 'all' || filterDifficulty !== 'all' || filterType !== 'all'\r\n                  ? 'Try adjusting your filters'\r\n                  : 'Start practicing to see questions here'}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\rankings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[237,251],"text":""},"desc":"Remove unused variable \"Calendar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[297,308],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Star' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":7,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Star"},"fix":{"range":[329,338],"text":""},"desc":"Remove unused variable \"Star\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2954,2957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2954,2957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used.","line":98,"column":70,"nodeType":"Identifier","messageId":"unusedVar","endLine":98,"endColumn":75},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used.","line":335,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":335,"endColumn":53},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":366,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[14411,14442],"text":"\r\n                            &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[14411,14442],"text":"\r\n                            &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[14411,14442],"text":"\r\n                            &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[14411,14442],"text":"\r\n                            &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":366,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[14461,14490],"text":"&quot;\r\n                          "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[14461,14490],"text":"&ldquo;\r\n                          "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[14461,14490],"text":"&#34;\r\n                          "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[14461,14490],"text":"&rdquo;\r\n                          "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport AuthGuard from '@/components/AuthGuard';\r\nimport DashboardLayout from '@/components/DashboardLayout';\r\nimport { \r\n  Trophy, \r\n  TrendingUp, \r\n  TrendingDown, \r\n  Minus, \r\n  Calendar, \r\n  Award,\r\n  Users,\r\n  Target,\r\n  BarChart3,\r\n  Filter,\r\n  Search,\r\n  Medal,\r\n  Star,\r\n  Crown\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { formatDate } from '@/utils/helpers';\r\n\r\ninterface LeaderboardEntry {\r\n  student: {\r\n    id: number;\r\n    first_name: string;\r\n    last_name: string;\r\n    email: string;\r\n    bio?: string;\r\n  };\r\n  points: number;\r\n  rank: number;\r\n  period_type: 'WEEKLY' | 'MONTHLY' | 'ALL_TIME';\r\n  trend: 'up' | 'down' | 'stable';\r\n  previous_rank?: number;\r\n  class_name?: string;\r\n  study_time_minutes?: number;\r\n  homework_completion_rate?: number;\r\n  homework_accuracy?: number;\r\n  mock_exam_count?: number;\r\n}\r\n\r\ninterface RankingPeriod {\r\n  type: 'WEEKLY' | 'MONTHLY' | 'ALL_TIME';\r\n  label: string;\r\n  description: string;\r\n  start_date: string;\r\n  end_date: string;\r\n}\r\n\r\nexport default function RankingsPage() {\r\n  const { user } = useAuth();\r\n  const [leaderboard, setLeaderboard] = useState<LeaderboardEntry[]>([]);\r\n  const [selectedPeriod, setSelectedPeriod] = useState<'WEEKLY' | 'MONTHLY' | 'ALL_TIME'>('WEEKLY');\r\n  const [selectedClass, setSelectedClass] = useState<string>('all');\r\n  const [availableClasses, setAvailableClasses] = useState<string[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const periods: RankingPeriod[] = [\r\n    {\r\n      type: 'WEEKLY',\r\n      label: 'Weekly',\r\n      description: 'This week\\'s top performers',\r\n      start_date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\r\n      end_date: new Date().toISOString()\r\n    },\r\n    {\r\n      type: 'MONTHLY',\r\n      label: 'Monthly',\r\n      description: 'This month\\'s top performers',\r\n      start_date: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\r\n      end_date: new Date().toISOString()\r\n    },\r\n    {\r\n      type: 'ALL_TIME',\r\n      label: 'All Time',\r\n      description: 'All-time highest achievers',\r\n      start_date: new Date(new Date().getFullYear(), 0, 1).toISOString(), // Start of current year\r\n      end_date: new Date().toISOString()\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const fetchRankings = async () => {\r\n      try {\r\n        const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api'}/rankings/leaderboard/?period_type=${selectedPeriod}&limit=50`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const transformedData = data.leaderboard?.map((entry: any, index: number) => ({\r\n            student: {\r\n              id: entry.student_id,\r\n              first_name: entry.student_name?.split(' ')[0] || 'Student',\r\n              last_name: entry.student_name?.split(' ').slice(1).join(' ') || '',\r\n              email: entry.student_email,\r\n              bio: entry.student_bio\r\n            },\r\n            points: entry.total_points,\r\n            rank: entry.rank,\r\n            period_type: selectedPeriod,\r\n            trend: entry.rank_change_display || 'stable',\r\n            previous_rank: entry.rank_change !== 0 ? entry.rank - entry.rank_change : undefined,\r\n            class_name: entry.class_name || 'General',\r\n            study_time_minutes: entry.study_time_minutes || 0,\r\n            homework_completion_rate: entry.homework_completion_rate || 0,\r\n            homework_accuracy: entry.homework_accuracy || 0,\r\n            mock_exam_count: entry.mock_exam_count || 0\r\n          })) || [];\r\n          \r\n          setLeaderboard(transformedData);\r\n          \r\n          // Extract unique classes from the data\r\n          const uniqueClasses = [...new Set(transformedData.map((entry: LeaderboardEntry) => entry.class_name).filter(Boolean))] as string[];\r\n          setAvailableClasses(uniqueClasses);\r\n        } else {\r\n          setLeaderboard([]);\r\n          setAvailableClasses([]);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching rankings:', error);\r\n        setLeaderboard([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRankings();\r\n  }, [selectedPeriod]);\r\n\r\n  const filteredLeaderboard = leaderboard.filter(entry =>\r\n    entry.student.first_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    entry.student.last_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    (entry.class_name && entry.class_name.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n    (entry.class_name && entry.class_name === selectedClass)\r\n  );\r\n\r\n  const getTrendIcon = (trend: string) => {\r\n    switch (trend) {\r\n      case 'up':\r\n        return <TrendingUp className=\"h-4 w-4 text-green-500\" />;\r\n      case 'down':\r\n        return <TrendingDown className=\"h-4 w-4 text-red-500\" />;\r\n      default:\r\n        return <Minus className=\"h-4 w-4 text-gray-500\" />;\r\n    }\r\n  };\r\n\r\n  const getTrendColor = (trend: string) => {\r\n    switch (trend) {\r\n      case 'up':\r\n        return 'text-green-600';\r\n      case 'down':\r\n        return 'text-red-600';\r\n      default:\r\n        return 'text-gray-600';\r\n    }\r\n  };\r\n\r\n  const getRankIcon = (rank: number) => {\r\n    switch (rank) {\r\n      case 1:\r\n        return <Crown className=\"h-6 w-6 text-yellow-500\" />;\r\n      case 2:\r\n        return <Medal className=\"h-6 w-6 text-gray-400\" />;\r\n      case 3:\r\n        return <Medal className=\"h-6 w-6 text-orange-600\" />;\r\n      default:\r\n        return <div className=\"h-6 w-6 rounded-full bg-gray-200 flex items-center justify-center text-xs font-bold text-gray-600\">\r\n          {rank}\r\n        </div>;\r\n    }\r\n  };\r\n\r\n  const getRankBadgeColor = (rank: number) => {\r\n    switch (rank) {\r\n      case 1:\r\n        return 'bg-yellow-100 text-yellow-800 border-yellow-300';\r\n      case 2:\r\n        return 'bg-gray-100 text-gray-800 border-gray-300';\r\n      case 3:\r\n        return 'bg-orange-100 text-orange-800 border-orange-300';\r\n      default:\r\n        return 'bg-white text-gray-800 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const currentUserRank = leaderboard.find(entry => entry.student.id === user?.id);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AuthGuard>\r\n        <DashboardLayout>\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"space-y-4\">\r\n              {[...Array(8)].map((_, i) => (\r\n                <div key={i} className=\"bg-white rounded-lg shadow p-6\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-4\">\r\n                      <div className=\"h-8 w-8 bg-gray-200 rounded-full\"></div>\r\n                      <div className=\"h-4 bg-gray-200 rounded w-32\"></div>\r\n                      <div className=\"h-4 bg-gray-200 rounded w-24\"></div>\r\n                    </div>\r\n                    <div className=\"h-4 bg-gray-200 rounded w-16\"></div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </DashboardLayout>\r\n      </AuthGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"space-y-6\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Rankings</h1>\r\n              <p className=\"text-gray-600\">Compete with students and track your progress</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Period Selection */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Select Period</h2>\r\n              <div className=\"text-sm text-gray-500\">\r\n                {formatDate(periods.find(p => p.type === selectedPeriod)?.start_date || '')} - {formatDate(periods.find(p => p.type === selectedPeriod)?.end_date || '')}\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              {periods.map((period) => (\r\n                <button\r\n                  key={period.type}\r\n                  onClick={() => setSelectedPeriod(period.type)}\r\n                  className={`p-4 rounded-lg border-2 transition-colors ${\r\n                    selectedPeriod === period.type\r\n                      ? 'border-blue-500 bg-blue-50'\r\n                      : 'border-gray-200 hover:border-gray-300'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"font-semibold text-gray-900\">{period.label}</h3>\r\n                    {selectedPeriod === period.type && (\r\n                      <div className=\"h-2 w-2 bg-blue-500 rounded-full\"></div>\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-600\">{period.description}</p>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Search and Filter */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search students...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n            <select\r\n              value={selectedClass}\r\n              onChange={(e) => setSelectedClass(e.target.value)}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"all\">All Classes</option>\r\n              {availableClasses.map((className) => (\r\n                <option key={className} value={className}>\r\n                  {className}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Current User Rank */}\r\n          {currentUserRank && (\r\n            <div className=\"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow p-6 text-white\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"text-lg font-semibold mb-1\">Your Current Rank</h3>\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <div className=\"flex items-center\">\r\n                      {getRankIcon(currentUserRank.rank)}\r\n                      <span className=\"ml-2 text-2xl font-bold\">#{currentUserRank.rank}</span>\r\n                    </div>\r\n                    <div className=\"text-sm\">\r\n                      <p className=\"opacity-90\">{currentUserRank.points} points</p>\r\n                      <div className=\"flex items-center mt-1\">\r\n                        {getTrendIcon(currentUserRank.trend)}\r\n                        <span className=\"ml-1\">\r\n                          {currentUserRank.trend === 'stable' ? 'No change' : \r\n                           currentUserRank.trend === 'up' ? `â†‘ from #${currentUserRank.previous_rank}` :\r\n                           `â†“ from #${currentUserRank.previous_rank}`}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Trophy className=\"h-5 w-5\" />\r\n                    <span className=\"text-sm opacity-90\">Top {Math.round((currentUserRank.rank / leaderboard.length) * 100)}%</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Leaderboard */}\r\n          <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n            <div className=\"px-6 py-4 border-b border-gray-200\">\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                {periods.find(p => p.type === selectedPeriod)?.label} Leaderboard\r\n              </h2>\r\n            </div>\r\n            \r\n            <div className=\"divide-y divide-gray-200\">\r\n              {filteredLeaderboard.map((entry, index) => (\r\n                <div\r\n                  key={entry.student.id}\r\n                  className={`p-6 hover:bg-gray-50 transition-colors ${\r\n                    entry.student.id === user?.id ? 'bg-blue-50' : ''\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-4\">\r\n                      {/* Rank */}\r\n                      <div className=\"flex items-center justify-center w-12\">\r\n                        {getRankIcon(entry.rank)}\r\n                      </div>\r\n\r\n                      {/* Student Info */}\r\n                      <div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                            {entry.student.first_name} {entry.student.last_name}\r\n                          </h3>\r\n                          {entry.student.id === user?.id && (\r\n                            <span className=\"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full\">\r\n                              You\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        {entry.class_name && (\r\n                          <p className=\"text-sm text-gray-500\">{entry.class_name}</p>\r\n                        )}\r\n                        {entry.student.bio && (\r\n                          <p className=\"text-xs text-gray-400 italic max-w-xs truncate\" title={entry.student.bio}>\r\n                            \"{entry.student.bio}\"\r\n                          </p>\r\n                        )}\r\n                        {entry.study_time_minutes && entry.study_time_minutes > 0 && (\r\n                          <p className=\"text-xs text-gray-400\">\r\n                            ðŸ“š {Math.floor(entry.study_time_minutes / 60)}h {entry.study_time_minutes % 60}m study time\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Stats */}\r\n                    <div className=\"flex items-center space-x-6\">\r\n                      {/* Trend */}\r\n                      <div className=\"text-center\">\r\n                        <div className=\"flex items-center space-x-1\">\r\n                          {getTrendIcon(entry.trend)}\r\n                          <span className={`text-sm font-medium ${getTrendColor(entry.trend)}`}>\r\n                            {entry.trend === 'stable' ? 'â€”' :\r\n                             entry.trend === 'up' ? `+${entry.previous_rank! - entry.rank}` :\r\n                             `-${entry.rank - entry.previous_rank!}`}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-xs text-gray-500\">vs last period</p>\r\n                      </div>\r\n\r\n                      {/* Points */}\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-2xl font-bold text-gray-900\">{entry.points}</p>\r\n                        <p className=\"text-sm text-gray-500\">points</p>\r\n                      </div>\r\n\r\n                      {/* Rank Badge */}\r\n                      <div className={`px-3 py-1 rounded-full border-2 text-sm font-medium ${getRankBadgeColor(entry.rank)}`}>\r\n                        #{entry.rank}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Empty State */}\r\n          {filteredLeaderboard.length === 0 && (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4\">\r\n                <Trophy className=\"h-6 w-6 text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No rankings found</h3>\r\n              <p className=\"text-gray-500\">\r\n                {searchTerm ? 'Try adjusting your search terms' : 'No rankings available for this period'}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Stats Overview */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-5 gap-6\">\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Total Participants</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{leaderboard.length}</p>\r\n                </div>\r\n                <Users className=\"h-8 w-8 text-blue-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Highest Score</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {leaderboard.length > 0 ? Math.max(...leaderboard.map(e => e.points)) : 0}\r\n                  </p>\r\n                </div>\r\n                <Target className=\"h-8 w-8 text-green-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Average Score</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {leaderboard.length > 0 ? Math.round(leaderboard.reduce((sum, e) => sum + e.points, 0) / leaderboard.length) : 0}\r\n                  </p>\r\n                </div>\r\n                <BarChart3 className=\"h-8 w-8 text-purple-600\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Total Study Time</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {leaderboard.length > 0 ? \r\n                      (() => {\r\n                        const totalMinutes = leaderboard.reduce((sum, e) => sum + (e.study_time_minutes || 0), 0);\r\n                        const hours = Math.floor(totalMinutes / 60);\r\n                        const minutes = totalMinutes % 60;\r\n                        return hours > 0 ? `${hours}h ${minutes}m` : `${minutes}m`;\r\n                      })() : '0m'\r\n                    }\r\n                  </p>\r\n                </div>\r\n                <div className=\"h-8 w-8 rounded-full bg-orange-100 flex items-center justify-center\">\r\n                  <span className=\"text-lg\">ðŸ“š</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">Top 10% Cutoff</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    {leaderboard.length > 0 ? leaderboard[Math.ceil(leaderboard.length * 0.1) - 1]?.points || 0 : 0}\r\n                  </p>\r\n                </div>\r\n                <Award className=\"h-8 w-8 text-orange-600\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\test-api\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\test-rankings-debug\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\test-rankings-debug\\page.tsx:16:5\n  14 |\n  15 |   useEffect(() => {\n> 16 |     addLog('Starting debug test...');\n     |     ^^^^^^ Avoid calling setState() directly within an effect\n  17 |     \n  18 |     // Test 1: Check if localStorage is available\n  19 |     if (typeof window !== 'undefined') {","line":16,"column":5,"nodeType":null,"endLine":16,"endColumn":11}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport AuthGuard from '@/components/AuthGuard';\r\nimport DashboardLayout from '@/components/DashboardLayout';\r\n\r\nexport default function TestRankingsDebug() {\r\n  const [logs, setLogs] = useState<string[]>([]);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const addLog = (message: string) => {\r\n    setLogs(prev => [...prev, `${new Date().toLocaleTimeString()}: ${message}`]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    addLog('Starting debug test...');\r\n    \r\n    // Test 1: Check if localStorage is available\r\n    if (typeof window !== 'undefined') {\r\n      addLog('âœ… Window object available');\r\n      \r\n      // Check for token\r\n      const token = localStorage.getItem('access_token');\r\n      if (token) {\r\n        addLog(`âœ… Token found: ${token.substring(0, 20)}...`);\r\n      } else {\r\n        addLog('âŒ No token found in localStorage');\r\n      }\r\n    } else {\r\n      addLog('âŒ Window object not available');\r\n    }\r\n\r\n    // Test 2: Check API URL\r\n    const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api';\r\n    addLog(`ðŸŒ API URL: ${apiUrl}`);\r\n\r\n    // Test 3: Try to fetch rankings\r\n    const fetchRankings = async () => {\r\n      try {\r\n        addLog('ðŸ”„ Starting API fetch...');\r\n        \r\n        const token = typeof window !== 'undefined' ? localStorage.getItem('access_token') : null;\r\n        \r\n        if (!token) {\r\n          addLog('âŒ Cannot fetch: No authentication token');\r\n          setError('No authentication token found');\r\n          return;\r\n        }\r\n\r\n        const response = await fetch(`${apiUrl}/rankings/leaderboard/?period_type=WEEKLY&limit=5`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        addLog(`ðŸ“¡ Response status: ${response.status}`);\r\n        addLog(`ðŸ“¡ Response ok: ${response.ok}`);\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          addLog(`âœ… Data received: ${JSON.stringify(data, null, 2).substring(0, 200)}...`);\r\n          \r\n          if (data.leaderboard) {\r\n            addLog(`âœ… Leaderboard entries: ${data.leaderboard.length}`);\r\n            if (data.leaderboard.length > 0) {\r\n              const first = data.leaderboard[0];\r\n              addLog(`ðŸ‘¤ First student: ${first.student_name} (bio: ${first.student_bio || 'None'})`);\r\n            }\r\n          } else {\r\n            addLog('âŒ No leaderboard field in response');\r\n          }\r\n        } else {\r\n          const errorText = await response.text();\r\n          addLog(`âŒ Error response: ${errorText}`);\r\n          setError(`API Error: ${response.status} - ${errorText}`);\r\n        }\r\n      } catch (err) {\r\n        addLog(`âŒ Fetch error: ${err}`);\r\n        setError(`Fetch error: ${err}`);\r\n      }\r\n    };\r\n\r\n    // Delay fetch to ensure DOM is ready\r\n    setTimeout(fetchRankings, 1000);\r\n\r\n  }, []);\r\n\r\n  return (\r\n    <AuthGuard>\r\n      <DashboardLayout>\r\n        <div className=\"p-6\">\r\n          <h1 className=\"text-2xl font-bold mb-6\" style={{ color: '#111827' }}>Rankings Debug Test</h1>\r\n          \r\n          {error && (\r\n            <div className=\"bg-red-100 border border-red-400 px-4 py-3 rounded mb-4\">\r\n              <strong style={{ color: '#7f1d1d' }}>Error:</strong>{' '}\r\n              <span style={{ color: '#991b1b' }}>{error}</span>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <h2 className=\"text-lg font-semibold mb-4\" style={{ color: '#111827' }}>Debug Logs:</h2>\r\n            <div \r\n              className=\"rounded p-4 font-mono text-sm max-h-96 overflow-y-auto\" \r\n              style={{ \r\n                backgroundColor: '#111827',\r\n                color: '#4ade80'\r\n              }}\r\n            >\r\n              {logs.map((log, index) => (\r\n                <div key={index} className=\"mb-1\" style={{ color: '#4ade80' }}>\r\n                  {log}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    </AuthGuard>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\app\\test-rankings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\AuthGuard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\BluebookSATInterface.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[250,256],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":9,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":63,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"X"},"fix":{"range":[300,303],"text":""},"desc":"Remove unused variable \"X\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1359,1362],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1359,1362],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1698,1701],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1698,1701],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1858,1861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1858,1861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2021,2024],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2021,2024],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2188,2191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2188,2191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2444,2447],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2444,2447],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2742,2745],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2742,2745],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":104,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2964,2967],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2964,2967],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'moduleStartTime' is assigned a value but never used.","line":129,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":129,"endColumn":24},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'initializeExam'. Either include it or remove the dependency array.","line":137,"column":6,"nodeType":"ArrayExpression","endLine":137,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [initializeExam]","fix":{"range":[4287,4289],"text":"[initializeExam]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'submitCurrentModule'. Either include it or remove the dependency array.","line":188,"column":6,"nodeType":"ArrayExpression","endLine":188,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [examPhase, submitCurrentModule, timeRemaining]","fix":{"range":[5594,5620],"text":"[examPhase, submitCurrentModule, timeRemaining]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":531,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":531,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19333,19336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19333,19336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":539,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":539,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19708,19711],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19708,19711],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":545,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":545,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20036,20039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20036,20039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Bluebook Digital SAT Interface Component\n * Follows the exact structure and rules of the official Digital SAT\n */\n'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Clock, ChevronLeft, ChevronRight, Flag, Calculator, X } from 'lucide-react';\nimport DesmosCalculator from './DesmosCalculator';\nimport { toast } from 'react-hot-toast';\n\n// Types for Bluebook Digital SAT\ninterface BluebookExam {\n  id: number;\n  title: string;\n  description: string;\n  total_duration_minutes: number;\n}\n\ninterface BluebookSection {\n  id: number;\n  exam: BluebookExam;\n  section_type: 'READING_WRITING' | 'MATH';\n  section_order: number;\n  total_duration_minutes: number;\n}\n\ninterface BluebookModule {\n  id: number;\n  section: BluebookSection;\n  module_order: number;\n  time_limit_minutes: number;\n  difficulty_level: 'BASELINE' | 'EASIER' | 'HARDER';\n  is_adaptive: boolean;\n  questions: BluebookQuestion[];\n}\n\ninterface BluebookQuestion {\n  id: number;\n  question_text: string;\n  question_type: 'MATH' | 'READING' | 'WRITING';\n  options: Record<string, string>;\n  correct_answer: string;\n  passage?: string;\n  explanation?: string;\n  difficulty: number;\n  estimated_time_seconds: number;\n  is_active: boolean;\n}\n\ninterface BluebookExamAttempt {\n  id: number;\n  exam: BluebookExam;\n  student: any;\n  started_at?: string;\n  submitted_at?: string;\n  is_completed: boolean;\n  current_section?: BluebookSection;\n  current_module?: BluebookModule;\n  completed_modules: BluebookModule[];\n  current_module_time_remaining: number;\n  current_progress: number;\n}\n\n// API Service\nclass BluebookAPI {\n  async startExam(examId: number): Promise<any> {\n    const { bluebookApi } = await import('@/utils/api');\n    return bluebookApi.startExam(examId);\n  }\n\n  async startAttempt(attemptId: number): Promise<any> {\n    const { bluebookApi } = await import('@/utils/api');\n    return bluebookApi.startAttempt(attemptId);\n  }\n\n  async getStatus(attemptId: number): Promise<any> {\n    const { bluebookApi } = await import('@/utils/api');\n    return bluebookApi.getStatus(attemptId);\n  }\n\n  async getCurrentModule(attemptId: number): Promise<any> {\n    const { bluebookApi } = await import('@/utils/api');\n    return bluebookApi.getCurrentModule(attemptId);\n  }\n\n  async submitModule(attemptId: number, data: { \n    answers: Record<string, string>; \n    flagged_questions?: number[] \n  }): Promise<any> {\n    const { bluebookApi } = await import('@/utils/api');\n    return bluebookApi.submitModule(attemptId, { answers: data.answers, flagged_questions: data.flagged_questions });\n  }\n\n  async flagQuestion(attemptId: number, data: { \n    question_id: number; \n    flagged: boolean \n  }): Promise<any> {\n    const { bluebookApi } = await import('@/utils/api');\n    return bluebookApi.flagQuestion(attemptId, { question_id: data.question_id, flagged: data.flagged });\n  }\n\n  async getResults(attemptId: number): Promise<any> {\n    const { bluebookApi } = await import('@/utils/api');\n    return bluebookApi.getResults(attemptId);\n  }\n}\n\n// Main Component\nconst BluebookSATInterface: React.FC<{ examId: number }> = ({ examId }) => {\n  const router = useRouter();\n  const api = new BluebookAPI();\n  \n  // State management\n  const [attempt, setAttempt] = useState<BluebookExamAttempt | null>(null);\n  const [currentModule, setCurrentModule] = useState<BluebookModule | null>(null);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [answers, setAnswers] = useState<Record<string, string>>({});\n  const [flaggedQuestions, setFlaggedQuestions] = useState<number[]>([]);\n  const [timeRemaining, setTimeRemaining] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [examPhase, setExamPhase] = useState<'instructions' | 'taking' | 'completed' | 'results'>('instructions');\n  const [calculatorVisible, setCalculatorVisible] = useState(false);\n  const [calculatorMinimized, setCalculatorMinimized] = useState(false);\n  \n  // Timer ref\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n  const moduleStartTime = useRef<Date | null>(null);\n\n  // Initialize exam\n  useEffect(() => {\n    initializeExam();\n    return () => {\n      if (timerRef.current) clearInterval(timerRef.current);\n    };\n  }, []);\n\n  const initializeExam = async () => {\n    try {\n      setIsLoading(true);\n      \n      // Start exam attempt\n      const attemptData = await api.startExam(examId);\n      setAttempt(attemptData);\n      \n      // Start the exam\n      const statusData = await api.startAttempt(attemptData.id);\n      setAttempt(statusData);\n      \n      // Get current module\n      const moduleData = await api.getCurrentModule(attemptData.id);\n      setCurrentModule(moduleData);\n      \n      // Set time remaining\n      if (moduleData) {\n        setTimeRemaining(moduleData.time_limit_minutes * 60);\n      }\n      \n      setExamPhase('taking');\n    } catch (error) {\n      console.error('Error initializing exam:', error);\n      toast.error('Failed to start exam');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Timer effect\n  useEffect(() => {\n    if (examPhase === 'taking' && timeRemaining > 0) {\n      timerRef.current = setInterval(() => {\n        setTimeRemaining(prev => {\n          if (prev <= 1) {\n            submitCurrentModule();\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n    } else {\n      if (timerRef.current) clearInterval(timerRef.current);\n    }\n\n    return () => {\n      if (timerRef.current) clearInterval(timerRef.current);\n    };\n  }, [examPhase, timeRemaining]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const getTimeColor = () => {\n    if (timeRemaining <= 300) return 'text-red-600';\n    if (timeRemaining <= 600) return 'text-orange-600';\n    return 'text-green-600';\n  };\n\n  const navigateToQuestion = (index: number) => {\n    if (index >= 0 && index < (currentModule?.questions.length || 0)) {\n      setCurrentQuestionIndex(index);\n    }\n  };\n\n  const selectAnswer = (questionId: number, answer: string) => {\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: answer\n    }));\n  };\n\n  const toggleFlaggedQuestion = (questionId: number) => {\n    setFlaggedQuestions(prev => \n      prev.includes(questionId) \n        ? prev.filter(id => id !== questionId)\n        : [...prev, questionId]\n    );\n  };\n\n  const isQuestionFlagged = (questionId: number) => {\n    return flaggedQuestions.includes(questionId);\n  };\n\n  const submitCurrentModule = async () => {\n    if (!attempt || !currentModule) return;\n    \n    try {\n      setIsLoading(true);\n      \n      // Submit current module\n      const newStatus = await api.submitModule(\n        attempt.id,\n        { answers, flagged_questions: flaggedQuestions }\n      );\n      \n      setAttempt(newStatus);\n      \n      // Check if exam is completed\n      if (newStatus.is_completed) {\n        setExamPhase('completed');\n        const results = await api.getResults(attempt.id);\n        setAttempt(results);\n      } else {\n        // Get next module\n        const nextModule = await api.getCurrentModule(attempt.id);\n        setCurrentModule(nextModule);\n        setTimeRemaining(nextModule.time_limit_minutes * 60);\n        setCurrentQuestionIndex(0);\n      }\n      \n      toast.success('Module submitted successfully');\n    } catch (error) {\n      console.error('Error submitting module:', error);\n      toast.error('Failed to submit module');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const currentQuestion = currentModule?.questions[currentQuestionIndex];\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading Digital SAT...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Instructions Phase\n  if (examPhase === 'instructions') {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-lg shadow-lg max-w-2xl w-full p-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Digital SAT Instructions</h1>\n          \n          <div className=\"space-y-6\">\n            <div>\n              <h2 className=\"text-xl font-semibold mb-4\">Test Structure</h2>\n              <div className=\"space-y-2 text-gray-700\">\n                <p>â€¢ Reading & Writing: 2 modules, 32 minutes each</p>\n                <p>â€¢ Math: 2 modules, 35 minutes each</p>\n                <p>â€¢ Total time: 2 hours 14 minutes</p>\n                <p>â€¢ Module 2 adapts based on Module 1 performance</p>\n              </div>\n            </div>\n            \n            <div>\n              <h2 className=\"text-xl font-semibold mb-4\">Rules</h2>\n              <div className=\"space-y-2 text-gray-700\">\n                <p>â€¢ You cannot return to previous modules</p>\n                <p>â€¢ Calculator available in Math modules only</p>\n                <p>â€¢ Flag questions to review later</p>\n                <p>â€¢ Time continues even if you leave the test</p>\n              </div>\n            </div>\n            \n            <div>\n              <h2 className=\"text-xl font-semibold mb-4\">Scoring</h2>\n              <div className=\"space-y-2 text-gray-700\">\n                <p>â€¢ Total score: 400-1600</p>\n                <p>â€¢ Reading & Writing: 200-800</p>\n                <p>â€¢ Math: 200-800</p>\n                <p>â€¢ Adaptive difficulty affects score potential</p>\n              </div>\n            </div>\n          </div>\n          \n          <button\n            onClick={() => setExamPhase('taking')}\n            className=\"mt-8 w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50\"\n          >\n            {isLoading ? 'Starting...' : 'Start Test'}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Taking Phase\n  if (examPhase === 'taking' && currentModule && currentQuestion) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex flex-col\">\n        {/* Header */}\n        <div className=\"bg-white shadow-sm border-b border-gray-200 px-4 py-3\">\n          <div className=\"flex items-center justify-between max-w-7xl mx-auto\">\n            <div className=\"flex items-center space-x-4\">\n              <h1 className=\"text-lg font-semibold text-gray-900\">\n                {currentModule.section.section_type === 'READING_WRITING' ? 'Reading & Writing' : 'Math'} - Module {currentModule.module_order}\n              </h1>\n              {currentModule.is_adaptive && (\n                <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800\">\n                  {currentModule.difficulty_level}\n                </span>\n              )}\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              {currentModule.section.section_type === 'MATH' && (\n                <button\n                  onClick={() => setCalculatorVisible(true)}\n                  className=\"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                  title=\"Open Desmos Calculator\"\n                >\n                  <Calculator className=\"h-4 w-4 mr-2\" />\n                  Calculator\n                </button>\n              )}\n              \n              <div className={`text-2xl font-mono ${getTimeColor()}`}>\n                {formatTime(timeRemaining)}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex flex-1 max-w-7xl mx-auto w-full\">\n          {/* Question Grid Sidebar */}\n          <div className=\"w-20 bg-white border-r border-gray-200 p-4\">\n            <div className=\"grid grid-cols-5 gap-1\">\n              {currentModule.questions.map((question, index) => {\n                const isAnswered = answers[question.id];\n                const isFlagged = isQuestionFlagged(question.id);\n                let bgColor = 'bg-gray-200';\n                \n                if (isFlagged) bgColor = 'bg-yellow-500';\n                else if (isAnswered) bgColor = 'bg-green-500';\n                else if (index === currentQuestionIndex) bgColor = 'bg-blue-500';\n                \n                return (\n                  <button\n                    key={question.id}\n                    onClick={() => navigateToQuestion(index)}\n                    className={`w-8 h-8 text-xs font-medium rounded text-white ${bgColor} ${\n                      index === currentQuestionIndex ? 'ring-2 ring-blue-500' : ''\n                    }`}\n                  >\n                    {index + 1}\n                  </button>\n                );\n              })}\n            </div>\n            \n            <div className=\"mt-4 space-y-2\">\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-green-500 rounded\"></div>\n                <span className=\"text-xs text-gray-600\">Answered</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-yellow-500 rounded\"></div>\n                <span className=\"text-xs text-gray-600\">Flagged</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-gray-200 rounded\"></div>\n                <span className=\"text-xs text-gray-600\">Unanswered</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"flex-1 flex flex-col\">\n            {/* Question */}\n            <div className=\"flex-1 bg-white m-4 rounded-lg shadow-sm p-6\">\n              <div className=\"mb-4\">\n                <span className=\"text-sm font-medium text-gray-500\">\n                  Question {currentQuestionIndex + 1} of {currentModule.questions.length}\n                </span>\n              </div>\n              \n              {currentQuestion.passage && (\n                <div className=\"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200\">\n                  <p className=\"text-gray-800 whitespace-pre-wrap\">{currentQuestion.passage}</p>\n                </div>\n              )}\n              \n              <div className=\"mb-6\">\n                <p className=\"text-lg text-gray-900 font-medium\">{currentQuestion.question_text}</p>\n              </div>\n              \n              <div className=\"space-y-3\">\n                {Object.entries(currentQuestion.options).map(([key, value]) => (\n                  <label\n                    key={key}\n                    className={`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-colors ${\n                      answers[currentQuestion.id] === key\n                        ? 'border-blue-500 bg-blue-50'\n                        : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name=\"answer\"\n                      value={key}\n                      checked={answers[currentQuestion.id] === key}\n                      onChange={() => selectAnswer(currentQuestion.id, key)}\n                      className=\"mr-3\"\n                    />\n                    <span className=\"text-gray-900\">\n                      <span className=\"font-medium mr-2\">{key}.</span>\n                      {value}\n                    </span>\n                  </label>\n                ))}\n              </div>\n            </div>\n\n            {/* Navigation */}\n            <div className=\"bg-white border-t border-gray-200 px-4 py-3\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-4\">\n                  <button\n                    onClick={() => toggleFlaggedQuestion(currentQuestion.id)}\n                    className={`flex items-center px-3 py-2 rounded-lg transition-colors ${\n                      isQuestionFlagged(currentQuestion.id)\n                        ? 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200'\n                        : 'bg-gray-100 text-gray-800 hover:bg-gray-200'\n                    }`}\n                  >\n                    <Flag className=\"h-4 w-4 mr-2\" />\n                    {isQuestionFlagged(currentQuestion.id) ? 'Flagged' : 'Flag'}\n                  </button>\n                </div>\n\n                <div className=\"flex items-center space-x-3\">\n                  <button\n                    onClick={() => navigateToQuestion(currentQuestionIndex - 1)}\n                    disabled={currentQuestionIndex === 0}\n                    className=\"flex items-center px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <ChevronLeft className=\"h-4 w-4 mr-1\" />\n                    Previous\n                  </button>\n                  \n                  <span className=\"text-sm text-gray-600\">\n                    {currentQuestionIndex + 1} / {currentModule.questions.length}\n                  </span>\n                  \n                  <button\n                    onClick={() => navigateToQuestion(currentQuestionIndex + 1)}\n                    disabled={currentQuestionIndex === currentModule.questions.length - 1}\n                    className=\"flex items-center px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Next\n                    <ChevronRight className=\"h-4 w-4 ml-1\" />\n                  </button>\n                  \n                  {currentQuestionIndex === currentModule.questions.length - 1 && (\n                    <button\n                      onClick={submitCurrentModule}\n                      disabled={isLoading}\n                      className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n                    >\n                      {isLoading ? 'Submitting...' : 'Submit Module'}\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Desmos Calculator */}\n        <DesmosCalculator\n          isVisible={calculatorVisible}\n          onClose={() => setCalculatorVisible(false)}\n          isMinimized={calculatorMinimized}\n          onMinimize={() => setCalculatorMinimized(true)}\n          onMaximize={() => setCalculatorMinimized(false)}\n        />\n      </div>\n    );\n  }\n\n  // Results Phase\n  if (examPhase === 'completed' && attempt) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-lg shadow-lg max-w-2xl w-full p-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Test Completed!</h1>\n          \n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <div className=\"text-5xl font-bold text-blue-600 mb-2\">\n                {(attempt as any).total_score || 0}\n              </div>\n              <div className=\"text-gray-600\">Total Score (400-1600)</div>\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                <div className=\"text-2xl font-semibold text-gray-900\">\n                  {(attempt as any).reading_writing_score || 0}\n                </div>\n                <div className=\"text-sm text-gray-600\">Reading & Writing</div>\n              </div>\n              <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n                <div className=\"text-2xl font-semibold text-gray-900\">\n                  {(attempt as any).math_score || 0}\n                </div>\n                <div className=\"text-sm text-gray-600\">Math</div>\n              </div>\n            </div>\n            \n            <div className=\"border-t pt-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Performance Analysis</h3>\n              <div className=\"space-y-2 text-gray-700\">\n                <p>â€¢ Review your incorrect answers to identify improvement areas</p>\n                <p>â€¢ Focus on sections where you scored below 600</p>\n                <p>â€¢ Practice time management for faster completion</p>\n              </div>\n            </div>\n            \n            <button\n              onClick={() => router.push('/dashboard')}\n              className=\"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700\"\n            >\n              Return to Dashboard\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n      <div className=\"text-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n        <p className=\"mt-4 text-gray-600\">Loading Digital SAT...</p>\n      </div>\n    </div>\n  );\n};\n\nexport default BluebookSATInterface;\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\ConnectionStatus.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Wifi' is defined but never used.","line":4,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":40,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Wifi"},"fix":{"range":[103,109],"text":""},"desc":"Remove unused variable \"Wifi\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { AlertCircle, CheckCircle, Wifi, WifiOff, RefreshCw } from 'lucide-react';\r\nimport { healthCheck } from '@/utils/api';\r\n\r\ninterface ConnectionStatusProps {\r\n  showDetails?: boolean;\r\n  compact?: boolean;\r\n  className?: string;\r\n}\r\n\r\ninterface ConnectionStatus {\r\n  isOnline: boolean;\r\n  isBackendHealthy: boolean;\r\n  lastChecked: Date | null;\r\n  error?: string;\r\n}\r\n\r\nexport default function ConnectionStatus({ \r\n  showDetails = false, \r\n  compact = false, \r\n  className = '' \r\n}: ConnectionStatusProps) {\r\n  const [status, setStatus] = useState<ConnectionStatus>({\r\n    isOnline: navigator.onLine,\r\n    isBackendHealthy: false,\r\n    lastChecked: null,\r\n  });\r\n  const [isChecking, setIsChecking] = useState(false);\r\n\r\n  const checkConnection = async () => {\r\n    setIsChecking(true);\r\n    try {\r\n      const isBackendHealthy = await healthCheck();\r\n      setStatus({\r\n        isOnline: navigator.onLine,\r\n        isBackendHealthy,\r\n        lastChecked: new Date(),\r\n      });\r\n    } catch (error) {\r\n      setStatus({\r\n        isOnline: navigator.onLine,\r\n        isBackendHealthy: false,\r\n        lastChecked: new Date(),\r\n        error: error instanceof Error ? error.message : 'Unknown error',\r\n      });\r\n    } finally {\r\n      setIsChecking(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Check connection on mount\r\n    checkConnection();\r\n\r\n    // Check connection periodically\r\n    const interval = setInterval(checkConnection, 30000); // Every 30 seconds\r\n\r\n    // Listen for online/offline events\r\n    const handleOnline = () => {\r\n      setStatus(prev => ({ ...prev, isOnline: true }));\r\n      checkConnection();\r\n    };\r\n\r\n    const handleOffline = () => {\r\n      setStatus(prev => ({ ...prev, isOnline: false }));\r\n    };\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  const getStatusIcon = () => {\r\n    if (!status.isOnline) {\r\n      return <WifiOff className=\"h-4 w-4 text-red-500\" />;\r\n    }\r\n    \r\n    if (!status.isBackendHealthy) {\r\n      return <AlertCircle className=\"h-4 w-4 text-orange-500\" />;\r\n    }\r\n    \r\n    return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\r\n  };\r\n\r\n  const getStatusColor = () => {\r\n    if (!status.isOnline) return 'text-red-600';\r\n    if (!status.isBackendHealthy) return 'text-orange-600';\r\n    return 'text-green-600';\r\n  };\r\n\r\n  const getStatusText = () => {\r\n    if (!status.isOnline) return 'Offline';\r\n    if (!status.isBackendHealthy) return 'Backend Issues';\r\n    return 'Connected';\r\n  };\r\n\r\n  const getStatusMessage = () => {\r\n    if (!status.isOnline) {\r\n      return 'No internet connection';\r\n    }\r\n    \r\n    if (!status.isBackendHealthy) {\r\n      return status.error || 'Backend server is not responding';\r\n    }\r\n    \r\n    return 'All systems operational';\r\n  };\r\n\r\n  if (compact) {\r\n    return (\r\n      <div className={`flex items-center space-x-2 ${className}`}>\r\n        {getStatusIcon()}\r\n        <span className={`text-sm font-medium ${getStatusColor()}`}>\r\n          {getStatusText()}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`bg-white rounded-lg shadow p-4 ${className}`}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          {getStatusIcon()}\r\n          <div>\r\n            <h3 className={`font-semibold ${getStatusColor()}`}>\r\n              {getStatusText()}\r\n            </h3>\r\n            <p className=\"text-sm text-gray-600\">\r\n              {getStatusMessage()}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          {showDetails && status.lastChecked && (\r\n            <span className=\"text-xs text-gray-500\">\r\n              Last checked: {status.lastChecked.toLocaleTimeString()}\r\n            </span>\r\n          )}\r\n          \r\n          <button\r\n            onClick={checkConnection}\r\n            disabled={isChecking}\r\n            className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\"\r\n            title=\"Refresh connection\"\r\n          >\r\n            <RefreshCw className={`h-4 w-4 ${isChecking ? 'animate-spin' : ''}`} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {showDetails && (\r\n        <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n            <div>\r\n              <span className=\"text-gray-500\">Network:</span>\r\n              <span className={`font-medium ${status.isOnline ? 'text-green-600' : 'text-red-600'}`}>\r\n                {status.isOnline ? 'Online' : 'Offline'}\r\n              </span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-gray-500\">Backend:</span>\r\n              <span className={`font-medium ${status.isBackendHealthy ? 'text-green-600' : 'text-orange-600'}`}>\r\n                {status.isBackendHealthy ? 'Healthy' : 'Issues'}\r\n              </span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-gray-500\">API URL:</span>\r\n              <span className=\"font-medium text-gray-900\">\r\n                {process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api'}\r\n              </span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-gray-500\">User Agent:</span>\r\n              <span className=\"font-medium text-gray-900 text-xs\">\r\n                {typeof window !== 'undefined' ? navigator.userAgent.slice(0, 30) + '...' : 'N/A'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          {status.error && (\r\n            <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-sm text-red-800\">\r\n                <strong>Error Details:</strong> {status.error}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\DashboardLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":18,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":59,"column":121,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":122},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":72,"column":125,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":126}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { ReactNode, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { BookOpen, LogOut, User, Settings, BarChart3, Home, Clock, Trophy, Brain, ChevronsLeft, ChevronsRight, Target } from 'lucide-react';\r\n\r\ninterface LayoutProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport default function DashboardLayout({ children }: LayoutProps) {\r\n  const [collapsed, setCollapsed] = useState(() => {\r\n    try {\r\n      const stored = localStorage.getItem('dashboard-collapsed');\r\n      return stored === 'true';\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  });\r\n  const { user, logout } = useAuth();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  // Initialized synchronously from localStorage to avoid sidebar width flash on navigation\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    router.push('/login');\r\n  };\r\n\r\n  const navigation = [\r\n    { name: 'Dashboard', href: '/dashboard', icon: Home },\r\n    { name: 'Classes', href: '/classes', icon: User },\r\n    { name: 'Homework', href: '/homework', icon: Clock },\r\n    { name: 'Question Bank', href: '/questionbank', icon: Brain },\r\n    { name: 'Mock Exams', href: '/mockexams', icon: BarChart3 },\r\n    { name: 'Digital SAT', href: '/mockexams/bluebook', icon: Target },\r\n    { name: 'Flashcards', href: '/flashcards', icon: BookOpen },\r\n    { name: 'Rankings', href: '/rankings', icon: Trophy },\r\n    { name: 'Analytics', href: '/analytics', icon: BarChart3 },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className={`fixed inset-y-0 left-0 z-50 ${collapsed ? 'w-20' : 'w-64'} bg-white shadow-lg transition-all duration-300 ease-in-out`}>\r\n        <div className=\"flex flex-col h-full\">\r\n          <div className={`flex items-center ${collapsed ? 'h-16 px-4 justify-center' : 'h-16 px-4 justify-between border-b-2 border-gray-300'} transition-all duration-300`}>\r\n            <div className=\"flex items-center\">\r\n              <BookOpen className=\"h-8 w-8 text-blue-600 flex-shrink-0\" />\r\n              <span className={`font-bold text-xl text-gray-900 ml-2 transition-all duration-300 ${collapsed ? 'opacity-0 w-0 overflow-hidden' : 'opacity-100'}`}>\r\n                SAT Fergana\r\n              </span>\r\n            </div>\r\n            \r\n            {!collapsed && (\r\n              <button\r\n                onClick={() => { setCollapsed(true); try { localStorage.setItem('dashboard-collapsed','true'); } catch (e) {} }}\r\n                aria-label=\"Collapse sidebar\"\r\n                className=\"text-blue-600 p-2 rounded-md cursor-pointer bg-white border border-blue-200 shadow-sm hover:bg-blue-50 transition-colors flex-shrink-0\"\r\n              >\r\n                <ChevronsLeft className=\"h-6 w-6\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <nav className=\"flex-1 px-4 py-4 space-y-2\">\r\n            {collapsed && (\r\n              <div className=\"flex justify-center mb-2\">\r\n                <button\r\n                  onClick={() => { setCollapsed(false); try { localStorage.setItem('dashboard-collapsed','false'); } catch (e) {} }}\r\n                  aria-label=\"Expand sidebar\"\r\n                  className=\"w-12 h-12 flex items-center justify-center text-blue-600 rounded-md cursor-pointer bg-white border border-blue-200 shadow-sm hover:bg-blue-50 transition-colors\"\r\n                >\r\n                  <ChevronsRight className=\"h-6 w-6\" />\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {navigation.map((item) => {\r\n              const isActive = pathname === item.href;\r\n              return (\r\n                <Link\r\n                  key={item.name}\r\n                  href={item.href}\r\n                  className={`flex items-center justify-center ${collapsed ? 'w-12 h-12 mx-auto' : 'px-4 py-3 justify-start'} text-base font-medium rounded-md transition-colors duration-200 ${\r\n                    isActive\r\n                      ? 'bg-blue-100 text-blue-700'\r\n                      : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'\r\n                  }`}\r\n                >\r\n                  <item.icon className={`h-6 w-6 ${collapsed ? '' : 'flex-shrink-0'}`} />\r\n                  <span className={`ml-3 transition-all duration-300 ${collapsed ? 'opacity-0 w-0 overflow-hidden absolute' : 'opacity-100'}`}>\r\n                    {item.name}\r\n                  </span>\r\n                </Link>\r\n              );\r\n            })}\r\n          </nav>\r\n\r\n          {/* User Menu */}\r\n          <div className=\"border-t border-gray-200 px-4 py-3\">\r\n            <div className=\"flex flex-col space-y-2\">\r\n              <button\r\n                onClick={() => router.push('/profile')}\r\n                className={`flex items-center justify-center ${collapsed ? 'w-12 h-12 mx-auto' : 'px-4 py-3 justify-start'} text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors cursor-pointer`}\r\n                title=\"Settings\"\r\n              >\r\n                <Settings className={`h-6 w-6 ${collapsed ? '' : 'flex-shrink-0'}`} />\r\n                <span className={`ml-3 transition-all duration-300 ${collapsed ? 'opacity-0 w-0 overflow-hidden absolute' : 'opacity-100'}`}>\r\n                  Settings\r\n                </span>\r\n              </button>\r\n\r\n              <button\r\n                onClick={handleLogout}\r\n                className={`flex items-center justify-center ${collapsed ? 'w-12 h-12 mx-auto' : 'px-4 py-3 justify-start'} text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors cursor-pointer`}\r\n                title=\"Logout\"\r\n              >\r\n                <LogOut className={`h-6 w-6 ${collapsed ? '' : 'flex-shrink-0'}`} />\r\n                <span className={`ml-3 transition-all duration-300 ${collapsed ? 'opacity-0 w-0 overflow-hidden absolute' : 'opacity-100'}`}>\r\n                  Logout\r\n                </span>\r\n              </button>\r\n            </div>\r\n          </div> \r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className={`${collapsed ? 'pl-20' : 'pl-64'} transition-all duration-300`}>\r\n        {/* Top Bar */}\r\n        <header className=\"bg-white shadow-sm border-b border-gray-200\">\r\n          <div className=\"px-6 py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">\r\n                  Welcome back, {user?.first_name}!\r\n                </h1>\r\n                <p className=\"text-sm text-gray-600\">\r\n                  Track your SAT preparation progress and improve your scores\r\n                </p>\r\n              </div>\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"text-right\">\r\n                  <p className=\"text-sm font-medium text-gray-900\">\r\n                    {user?.role === 'STUDENT' ? 'Student' : user?.role === 'TEACHER' ? 'Teacher' : 'Admin'}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    {new Date().toLocaleDateString('en-US', { \r\n                      weekday: 'long', \r\n                      year: 'numeric', \r\n                      month: 'long', \r\n                      day: 'numeric' \r\n                    })}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Page Content */}\r\n        <main className=\"p-6\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\DesmosCalculator.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[392,395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[392,395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[400,403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[400,403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[875,878],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[875,878],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Desmos Graphing Calculator Component\n * Built-in calculator for Digital SAT math modules\n */\n'use client';\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Calculator, X, Minimize2, Maximize2 } from 'lucide-react';\n\n// Type declarations for Desmos API\ndeclare global {\n  interface Window {\n    Desmos?: {\n      GraphingCalculator: (element: HTMLElement, options?: any) => any;\n    };\n  }\n}\n\ninterface DesmosCalculatorProps {\n  isVisible: boolean;\n  onClose: () => void;\n  isMinimized?: boolean;\n  onMinimize?: () => void;\n  onMaximize?: () => void;\n}\n\nconst DesmosCalculator: React.FC<DesmosCalculatorProps> = ({\n  isVisible,\n  onClose,\n  isMinimized = false,\n  onMinimize,\n  onMaximize\n}) => {\n  const calculatorRef = useRef<HTMLDivElement>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [calculator, setCalculator] = useState<any>(null);\n\n  useEffect(() => {\n    if (isVisible && !isLoaded && calculatorRef.current) {\n      // Load Desmos API\n      const script = document.createElement('script');\n      const apiKey = process.env.NEXT_PUBLIC_DESMOS_API_KEY || 'dcb3171b9316b08f25d96636ab1fdc95';\n      script.src = `https://www.desmos.com/api/v1.8/calculator.js?apiKey=${apiKey}`;\n      script.async = true;\n      \n      script.onload = () => {\n        if (window.Desmos && calculatorRef.current) {\n          // Create Desmos calculator instance\n          const calc = window.Desmos.GraphingCalculator(calculatorRef.current, {\n            settingsMenu: false,\n            expressions: false,\n            lockViewport: false,\n            showGrid: true,\n            showXAxis: true,\n            showYAxis: true,\n            xAxisNumbers: true,\n            yAxisNumbers: true,\n            polarMode: false,\n            trace: false,\n            border: false,\n            paste: true,\n            pointsOfInterest: true,\n            settings: {\n              trace: false,\n              lockViewport: false,\n              showGrid: true,\n              showXAxis: true,\n              showYAxis: true,\n              xAxisNumbers: true,\n              yAxisNumbers: true,\n              polarMode: false,\n              degrees: true,\n              projectorMode: false,\n              squareAspect: false,\n              restrictGridToFirstQuadrant: false,\n              showTrace: false,\n              showLabels: true,\n              showBrackets: true,\n              showKoreanLabels: false\n            }\n          });\n\n          // Set up calculator for SAT use\n          calc.setMathSettings({\n            degrees: true,\n            restrictGridToFirstQuadrant: false\n          });\n\n          // Add basic functions and constants\n          calc.setExpression({\n            id: 'pi',\n            latex: 'Ï€ â‰ˆ 3.14159'\n          });\n\n          calc.setExpression({\n            id: 'e',\n            latex: 'e â‰ˆ 2.71828'\n          });\n\n          setCalculator(calc);\n          setIsLoaded(true);\n        }\n      };\n\n      document.head.appendChild(script);\n\n      return () => {\n        if (document.head.contains(script)) {\n          document.head.removeChild(script);\n        }\n      };\n    }\n  }, [isVisible, isLoaded]);\n\n  useEffect(() => {\n    if (!isVisible && calculator) {\n      // Clear calculator when hidden\n      calculator.setBlank();\n    }\n  }, [isVisible, calculator]);\n\n  if (!isVisible) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center\">\n      <div className={`bg-white rounded-lg shadow-2xl ${isMinimized ? 'w-96' : 'w-full max-w-4xl h-full max-h-screen'} flex flex-col`}>\n        {/* Header */}\n        <div className=\"bg-gray-800 text-white px-4 py-3 rounded-t-lg flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <Calculator className=\"h-5 w-5\" />\n            <h3 className=\"font-semibold\">Desmos Graphing Calculator</h3>\n            <span className=\"text-sm text-gray-300\">Digital SAT Math Tool</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            {onMinimize && onMaximize && (\n              <button\n                onClick={isMinimized ? onMaximize : onMinimize}\n                className=\"p-1 hover:bg-gray-700 rounded transition-colors\"\n                title={isMinimized ? \"Maximize\" : \"Minimize\"}\n              >\n                {isMinimized ? <Maximize2 className=\"h-4 w-4\" /> : <Minimize2 className=\"h-4 w-4\" />}\n              </button>\n            )}\n            <button\n              onClick={onClose}\n              className=\"p-1 hover:bg-gray-700 rounded transition-colors\"\n              title=\"Close Calculator\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Calculator Content */}\n        <div className=\"flex-1 bg-white\">\n          {!isMinimized ? (\n            <div className=\"h-full\">\n              {/* Quick Tips */}\n              <div className=\"bg-blue-50 border-b border-blue-200 px-4 py-2\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <div className=\"flex items-center space-x-4\">\n                    <span className=\"font-medium text-blue-800\">Quick Tips:</span>\n                    <span className=\"text-gray-600\">Type expressions like y = x^2</span>\n                    <span className=\"text-gray-600\">Use Ï€ for pi, âˆš for square root</span>\n                    <span className=\"text-gray-600\">Click graph to add points</span>\n                  </div>\n                  <button\n                    onClick={() => {\n                      if (calculator) {\n                        calculator.setBlank();\n                        // Re-add constants\n                        calculator.setExpression({ id: 'pi', latex: 'Ï€ â‰ˆ 3.14159' });\n                        calculator.setExpression({ id: 'e', latex: 'e â‰ˆ 2.71828' });\n                      }\n                    }}\n                    className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs\"\n                  >\n                    Clear All\n                  </button>\n                </div>\n              </div>\n              \n              {/* Desmos Calculator Container */}\n              <div \n                ref={calculatorRef} \n                className=\"w-full\" \n                style={{ height: isMinimized ? '200px' : '500px' }}\n              />\n            </div>\n          ) : (\n            /* Minimized View */\n            <div className=\"p-4\">\n              <div className=\"text-center text-gray-600\">\n                <Calculator className=\"h-12 w-12 mx-auto mb-2 text-gray-400\" />\n                <p className=\"text-sm\">Calculator minimized</p>\n                <p className=\"text-xs text-gray-500\">Click maximize to expand</p>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"bg-gray-100 px-4 py-2 rounded-b-lg border-t border-gray-200\">\n          <div className=\"flex items-center justify-between text-xs text-gray-600\">\n            <div className=\"flex items-center space-x-4\">\n              <span>â€¢ Graph functions and equations</span>\n              <span>â€¢ Find points of interest</span>\n              <span>â€¢ Scientific calculator functions</span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <span>Powered by Desmos</span>\n              <span>â€¢</span>\n              <span>Digital SAT Approved</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DesmosCalculator;\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\ExamCountdown.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\ExamCountdown.tsx:23:5\n  21 |\n  22 |   useEffect(() => {\n> 23 |     setMounted(true);\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  24 |   }, []);\n  25 |\n  26 |   useEffect(() => {","line":23,"column":5,"nodeType":null,"endLine":23,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Calendar, Clock } from 'lucide-react';\r\n\r\ninterface ExamCountdownProps {\r\n  examDate: string | null;\r\n  className?: string;\r\n}\r\n\r\ninterface TimeLeft {\r\n  days: number;\r\n  hours: number;\r\n  minutes: number;\r\n  seconds: number;\r\n}\r\n\r\nexport default function ExamCountdown({ examDate, className = '' }: ExamCountdownProps) {\r\n  const [timeLeft, setTimeLeft] = useState<TimeLeft>({ days: 0, hours: 0, minutes: 0, seconds: 0 });\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!examDate || !mounted) return;\r\n\r\n    const calculateTimeLeft = () => {\r\n      const difference = new Date(examDate).getTime() - new Date().getTime();\r\n      \r\n      if (difference > 0) {\r\n        const days = Math.floor(difference / (1000 * 60 * 60 * 24));\r\n        const hours = Math.floor((difference / (1000 * 60 * 60)) % 24);\r\n        const minutes = Math.floor((difference / 1000 / 60) % 60);\r\n        const seconds = Math.floor((difference / 1000) % 60);\r\n        \r\n        setTimeLeft({ days, hours, minutes, seconds });\r\n      } else {\r\n        setTimeLeft({ days: 0, hours: 0, minutes: 0, seconds: 0 });\r\n      }\r\n    };\r\n\r\n    calculateTimeLeft();\r\n    const timer = setInterval(calculateTimeLeft, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [examDate, mounted]);\r\n\r\n  if (!mounted) {\r\n    return (\r\n      <div className={className}>\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n          <div className=\"h-8 bg-gray-200 rounded w-1/2\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!examDate) {\r\n    return (\r\n      <div className={className}>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-sm font-medium text-gray-600\">Days Until Exam</p>\r\n            <p className=\"text-2xl font-bold text-gray-400\">--</p>\r\n            <p className=\"text-xs text-gray-500\">No exam set</p>\r\n          </div>\r\n          <Calendar className=\"h-8 w-8 text-gray-400\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const totalDays = timeLeft.days;\r\n  const urgencyColor = totalDays === 0 ? 'text-red-600' : \r\n                      totalDays <= 7 ? 'text-red-600' : \r\n                      totalDays <= 30 ? 'text-orange-600' : \r\n                      totalDays <= 60 ? 'text-yellow-600' : 'text-green-600';\r\n  \r\n  const urgencyLevel = totalDays === 0 ? 'Exam Day!' : \r\n                       totalDays <= 7 ? 'Urgent' : \r\n                       totalDays <= 30 ? 'High Priority' : \r\n                       totalDays <= 60 ? 'Medium Priority' : 'Low Priority';\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className=\"text-sm font-medium text-gray-600\">Days Until Exam</p>\r\n          <p className={`text-2xl font-bold ${urgencyColor}`}>\r\n            {totalDays}\r\n          </p>\r\n          <p className=\"text-xs text-gray-500\">{urgencyLevel}</p>\r\n          {totalDays > 0 && (\r\n            <div className=\"flex items-center mt-1 text-xs text-gray-400\">\r\n              <Clock className=\"h-3 w-3 mr-1\" />\r\n              {timeLeft.hours}h {timeLeft.minutes}m {timeLeft.seconds}s\r\n            </div>\r\n          )}\r\n        </div>\r\n        <Calendar className=\"h-8 w-8 text-gray-400\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\FlashcardReview.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":204,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6429,6430],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6429,6430],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6429,6430],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6429,6430],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":204,"column":83,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6457,6458],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6457,6458],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6457,6458],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6457,6458],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { RotateCcw, CheckCircle, XCircle, SkipForward, Volume2 } from 'lucide-react';\r\n\r\ninterface FlashcardData {\r\n  id: number;\r\n  word: string;\r\n  definition: string;\r\n  pronunciation?: string;\r\n  exampleSentence: string;\r\n  subject?: string;\r\n  difficulty?: 'EASY' | 'MEDIUM' | 'HARD';\r\n  tags?: string[];\r\n}\r\n\r\ninterface FlashcardReviewProps {\r\n  flashcard: FlashcardData;\r\n  onCorrect?: () => void;\r\n  onIncorrect?: () => void;\r\n  onSkip?: () => void;\r\n  showResult?: boolean;\r\n  userAnswer?: 'correct' | 'incorrect' | 'skipped';\r\n  isFlipped?: boolean;\r\n  onFlip?: () => void;\r\n  compact?: boolean;\r\n  interactive?: boolean;\r\n  showProgress?: boolean;\r\n  currentIndex?: number;\r\n  totalCards?: number;\r\n}\r\n\r\nexport default function FlashcardReview({\r\n  flashcard,\r\n  onCorrect,\r\n  onIncorrect,\r\n  onSkip,\r\n  showResult = false,\r\n  userAnswer,\r\n  isFlipped = false,\r\n  onFlip,\r\n  compact = false,\r\n  interactive = true,\r\n  showProgress = true,\r\n  currentIndex = 0,\r\n  totalCards = 1\r\n}: FlashcardReviewProps) {\r\n  const [localFlipped, setLocalFlipped] = useState(isFlipped);\r\n  const [showPronunciation, setShowPronunciation] = useState(false);\r\n\r\n  const handleFlip = () => {\r\n    if (!interactive) return;\r\n    setLocalFlipped(!localFlipped);\r\n    if (onFlip) {\r\n      onFlip();\r\n    }\r\n  };\r\n\r\n  const handleCorrect = () => {\r\n    if (onCorrect) onCorrect();\r\n  };\r\n\r\n  const handleIncorrect = () => {\r\n    if (onIncorrect) onIncorrect();\r\n  };\r\n\r\n  const handleSkip = () => {\r\n    if (onSkip) onSkip();\r\n  };\r\n\r\n  const getDifficultyColor = (difficulty?: string) => {\r\n    switch (difficulty) {\r\n      case 'EASY':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'MEDIUM':\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      case 'HARD':\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getSubjectColor = (subject?: string) => {\r\n    switch (subject) {\r\n      case 'MATH':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'READING':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'WRITING':\r\n        return 'bg-purple-100 text-purple-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getResultIcon = () => {\r\n    switch (userAnswer) {\r\n      case 'correct':\r\n        return <CheckCircle className=\"h-5 w-5 text-green-500\" />;\r\n      case 'incorrect':\r\n        return <XCircle className=\"h-5 w-5 text-red-500\" />;\r\n      case 'skipped':\r\n        return <SkipForward className=\"h-5 w-5 text-gray-500\" />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getResultColor = () => {\r\n    switch (userAnswer) {\r\n      case 'correct':\r\n        return 'border-green-500 bg-green-50';\r\n      case 'incorrect':\r\n        return 'border-red-500 bg-red-50';\r\n      case 'skipped':\r\n        return 'border-gray-500 bg-gray-50';\r\n      default:\r\n        return 'border-gray-200';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`bg-white rounded-lg shadow ${compact ? 'p-4' : 'p-6'} ${showResult ? getResultColor() : ''}`}>\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          {flashcard.subject && (\r\n            <span className={`px-2 py-1 text-xs font-medium rounded-full ${getSubjectColor(flashcard.subject)}`}>\r\n              {flashcard.subject}\r\n            </span>\r\n          )}\r\n          {flashcard.difficulty && (\r\n            <span className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(flashcard.difficulty)}`}>\r\n              {flashcard.difficulty}\r\n            </span>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          {showProgress && (\r\n            <span className=\"text-sm text-gray-500\">\r\n              {currentIndex + 1}/{totalCards}\r\n            </span>\r\n          )}\r\n          {showResult && getResultIcon()}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      {showProgress && totalCards > 1 && (\r\n        <div className=\"mb-4\">\r\n          <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n            <div\r\n              className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n              style={{ width: `${((currentIndex + 1) / totalCards) * 100}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Flashcard Content */}\r\n      <div className={`${compact ? 'min-h-[200px]' : 'min-h-[300px]'} flex flex-col items-center justify-center`}>\r\n        {!localFlipped ? (\r\n          // Front of card - Word\r\n          <div className=\"text-center\">\r\n            <h2 className={`font-bold text-gray-900 mb-4 ${compact ? 'text-2xl' : 'text-3xl'}`}>\r\n              {flashcard.word}\r\n            </h2>\r\n            \r\n            {flashcard.pronunciation && (\r\n              <div className=\"flex items-center justify-center mb-4 space-x-2\">\r\n                <span className=\"text-gray-600\">{flashcard.pronunciation}</span>\r\n                <button\r\n                  onClick={() => setShowPronunciation(!showPronunciation)}\r\n                  className=\"p-1 text-gray-400 hover:text-gray-600 transition-colors\"\r\n                  title=\"Play pronunciation\"\r\n                >\r\n                  <Volume2 className=\"h-4 w-4\" />\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {interactive && (\r\n              <button\r\n                onClick={handleFlip}\r\n                className=\"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                <RotateCcw className=\"h-4 w-4 mr-2\" />\r\n                Flip Card\r\n              </button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          // Back of card - Definition\r\n          <div className=\"text-center w-full\">\r\n            <div className=\"bg-gray-50 rounded-lg p-6 mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Definition</h3>\r\n              <p className=\"text-gray-700 mb-4\">{flashcard.definition}</p>\r\n              \r\n              {flashcard.exampleSentence && (\r\n                <div className=\"border-t pt-4\">\r\n                  <h4 className=\"text-sm font-semibold text-gray-900 mb-2\">Example</h4>\r\n                  <p className=\"text-gray-600 italic\">\"{flashcard.exampleSentence}\"</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {interactive && (\r\n              <div className=\"flex justify-center space-x-4\">\r\n                <button\r\n                  onClick={handleIncorrect}\r\n                  className=\"flex items-center px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                >\r\n                  <XCircle className=\"h-4 w-4 mr-2\" />\r\n                  Incorrect\r\n                </button>\r\n                <button\r\n                  onClick={handleSkip}\r\n                  className=\"flex items-center px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                >\r\n                  <SkipForward className=\"h-4 w-4 mr-2\" />\r\n                  Skip\r\n                </button>\r\n                <button\r\n                  onClick={handleCorrect}\r\n                  className=\"flex items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                >\r\n                  <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                  Correct\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tags */}\r\n      {flashcard.tags && flashcard.tags.length > 0 && !compact && (\r\n        <div className=\"mt-4 flex flex-wrap gap-1\">\r\n          {flashcard.tags.map((tag, index) => (\r\n            <span\r\n              key={index}\r\n              className=\"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded\"\r\n            >\r\n              {tag}\r\n            </span>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Result Message */}\r\n      {showResult && userAnswer && (\r\n        <div className={`mt-4 p-3 rounded-lg text-sm ${\r\n          userAnswer === 'correct' ? 'bg-green-100 text-green-800' :\r\n          userAnswer === 'incorrect' ? 'bg-red-100 text-red-800' :\r\n          'bg-gray-100 text-gray-800'\r\n        }`}>\r\n          <div className=\"flex items-center\">\r\n            {getResultIcon()}\r\n            <span className=\"ml-2 font-medium\">\r\n              {userAnswer === 'correct' ? 'Marked as correct' :\r\n               userAnswer === 'incorrect' ? 'Marked as incorrect - will review again soon' :\r\n               'Skipped - will see again later'}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\Leaderboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Award' is defined but never used.","line":4,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":37,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Award"},"fix":{"range":[74,81],"text":""},"desc":"Remove unused variable \"Award\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getTrendIcon' is assigned a value but never used.","line":54,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React from 'react';\r\nimport { Trophy, Medal, Crown, Award } from 'lucide-react';\r\n\r\ninterface LeaderboardEntry {\r\n  rank: number;\r\n  student_id: number;\r\n  student_name: string;\r\n  student_email: string;\r\n  student_bio?: string | null;\r\n  rank_change: number;\r\n  rank_change_display: string;\r\n  total_points: number;\r\n  homework_completion_rate: number;\r\n  homework_accuracy: number;\r\n  average_sat_score: number;\r\n  highest_sat_score: number;\r\n  mock_exam_count: number;\r\n  study_time_minutes: number;\r\n  isCurrentUser?: boolean;\r\n}\r\n\r\ninterface LeaderboardProps {\r\n  entries: LeaderboardEntry[];\r\n  title?: string;\r\n  showTrend?: boolean;\r\n  maxEntries?: number;\r\n  compact?: boolean;\r\n}\r\n\r\nexport default function Leaderboard({ \r\n  entries, \r\n  title = 'Leaderboard', \r\n  showTrend = true,\r\n  maxEntries = 10,\r\n  compact = false \r\n}: LeaderboardProps) {\r\n  const getRankIcon = (rank: number) => {\r\n    switch (rank) {\r\n      case 1:\r\n        return <Crown className=\"h-5 w-5 text-yellow-500\" />;\r\n      case 2:\r\n        return <Medal className=\"h-5 w-5 text-gray-400\" />;\r\n      case 3:\r\n        return <Medal className=\"h-5 w-5 text-orange-600\" />;\r\n      default:\r\n        return <div className=\"h-5 w-5 rounded-full bg-gray-200 flex items-center justify-center text-xs font-bold text-gray-600\">\r\n          {rank}\r\n        </div>;\r\n    }\r\n  };\r\n\r\n  const getTrendIcon = (trend: string) => {\r\n    switch (trend) {\r\n      case 'up':\r\n        return <span className=\"text-green-500 text-xs\">â†‘</span>;\r\n      case 'down':\r\n        return <span className=\"text-red-500 text-xs\">â†“</span>;\r\n      default:\r\n        return <span className=\"text-gray-500 text-xs\">â€”</span>;\r\n    }\r\n  };\r\n\r\n  const displayEntries = entries.slice(0, maxEntries);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\r\n            <Trophy className=\"h-5 w-5 mr-2 text-yellow-500\" />\r\n            {title}\r\n          </h3>\r\n          <span className=\"text-sm text-gray-500\">\r\n            {displayEntries.length} participants\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Entries */}\r\n      <div className=\"divide-y divide-gray-200\">\r\n        {displayEntries.map((entry) => (\r\n          <div\r\n            key={`${entry.student_email}-${entry.rank}`}\r\n            className={`px-6 py-4 hover:bg-gray-50 transition-colors ${\r\n              entry.isCurrentUser ? 'bg-blue-50' : ''\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                {/* Rank */}\r\n                <div className=\"flex items-center justify-center w-8\">\r\n                  {getRankIcon(entry.rank)}\r\n                </div>\r\n\r\n                {/* Student Info */}\r\n                  <div className={compact ? 'flex-1' : ''}>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <p className={`font-medium text-gray-900 ${compact ? 'text-sm' : ''}`}>\r\n                      {entry.student_name}\r\n                    </p>\r\n                    {entry.student_bio && (\r\n                      <p className=\"text-sm text-gray-500 italic\">({entry.student_bio})</p>\r\n                    )}\r\n                    {entry.isCurrentUser && (\r\n                      <span className=\"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full\">\r\n                        You\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  {!compact && (\r\n                    <p className=\"text-sm text-gray-500\">{entry.student_email}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Stats */}\r\n              <div className=\"flex items-center space-x-4\">\r\n                {showTrend && (\r\n                  <div className=\"text-center\">\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <span className={`text-xs ${\r\n                        entry.rank_change > 0 ? 'text-green-500' :\r\n                        entry.rank_change < 0 ? 'text-red-500' :\r\n                        'text-gray-500'\r\n                      }`}>\r\n                        {entry.rank_change > 0 ? 'â†‘' :\r\n                         entry.rank_change < 0 ? 'â†“' :\r\n                         'â€”'}\r\n                      </span>\r\n                      <span className=\"text-xs text-gray-500\">\r\n                        {entry.rank_change_display}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"text-right\">\r\n                  <p className={`font-bold text-gray-900 ${compact ? 'text-sm' : ''}`}>\r\n                    {entry.total_points}\r\n                  </p>\r\n                  <p className={`text-xs text-gray-500 ${compact ? 'hidden' : ''}`}>points</p>\r\n                </div>\r\n\r\n                {/* Rank Badge */}\r\n                <div className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                  entry.rank === 1 ? 'bg-yellow-100 text-yellow-800' :\r\n                  entry.rank === 2 ? 'bg-gray-100 text-gray-800' :\r\n                  entry.rank === 3 ? 'bg-orange-100 text-orange-800' :\r\n                  'bg-gray-100 text-gray-800'\r\n                }`}>\r\n                  #{entry.rank}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      {entries.length > maxEntries && (\r\n        <div className=\"px-6 py-3 border-t border-gray-200 bg-gray-50\">\r\n          <p className=\"text-sm text-gray-500 text-center\">\r\n            Showing {maxEntries} of {entries.length} entries\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\MockExamSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Play' is defined but never used.","line":4,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Play"},"fix":{"range":[91,97],"text":""},"desc":"Remove unused variable \"Play\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SkipForward' is defined but never used.","line":4,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":49,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"SkipForward"},"fix":{"range":[105,118],"text":""},"desc":"Remove unused variable \"SkipForward\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showSectionMenu' is assigned a value but never used.","line":57,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowSectionMenu' is assigned a value but never used.","line":57,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Clock, Pause, Play, Square, SkipForward, CheckCircle, AlertCircle } from 'lucide-react';\r\n\r\ninterface Section {\r\n  name: string;\r\n  totalQuestions: number;\r\n  timeLimit: number; // in minutes\r\n  order: number;\r\n}\r\n\r\ninterface Question {\r\n  id: number;\r\n  section: string;\r\n  questionText: string;\r\n  options?: string[];\r\n  timeSpent?: number;\r\n  answered?: boolean;\r\n  markedForReview?: boolean;\r\n}\r\n\r\ninterface MockExamSectionProps {\r\n  sections: Section[];\r\n  questions: Question[];\r\n  currentSection: number;\r\n  currentQuestion: number;\r\n  timeRemaining: number;\r\n  onSectionChange?: (sectionIndex: number) => void;\r\n  onQuestionChange?: (questionIndex: number) => void;\r\n  onPause?: () => void;\r\n  onSubmit?: () => void;\r\n  onTimeUp?: () => void;\r\n  isPaused?: boolean;\r\n  isSubmitted?: boolean;\r\n  compact?: boolean;\r\n  showNavigation?: boolean;\r\n}\r\n\r\nexport default function MockExamSection({\r\n  sections,\r\n  questions,\r\n  currentSection,\r\n  currentQuestion,\r\n  timeRemaining,\r\n  onSectionChange,\r\n  onQuestionChange,\r\n  onPause,\r\n  onSubmit,\r\n  onTimeUp,\r\n  isPaused = false,\r\n  isSubmitted = false,\r\n  compact = false,\r\n  showNavigation = true\r\n}: MockExamSectionProps) {\r\n  const [localTimeRemaining, setLocalTimeRemaining] = useState(timeRemaining);\r\n  const [showSectionMenu, setShowSectionMenu] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLocalTimeRemaining(timeRemaining);\r\n  }, [timeRemaining]);\r\n\r\n  useEffect(() => {\r\n    if (localTimeRemaining <= 0 && !isSubmitted && onTimeUp) {\r\n      onTimeUp();\r\n    }\r\n  }, [localTimeRemaining, isSubmitted, onTimeUp]);\r\n\r\n  useEffect(() => {\r\n    if (!isPaused && !isSubmitted && localTimeRemaining > 0) {\r\n      const timer = setInterval(() => {\r\n        setLocalTimeRemaining(prev => Math.max(0, prev - 1));\r\n      }, 1000);\r\n\r\n      return () => clearInterval(timer);\r\n    }\r\n  }, [isPaused, isSubmitted, localTimeRemaining]);\r\n\r\n  // Auto-submit when time is up\r\n  useEffect(() => {\r\n    if (localTimeRemaining <= 0 && !isSubmitted && onSubmit) {\r\n      onSubmit();\r\n    }\r\n  }, [isPaused, isSubmitted, localTimeRemaining, onSubmit]);\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const hours = Math.floor(seconds / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    const secs = seconds % 60;\r\n    \r\n    if (hours > 0) {\r\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const getTimeColor = () => {\r\n    const percentage = (localTimeRemaining / (sections[currentSection]?.timeLimit * 60 || 1)) * 100;\r\n    if (percentage <= 10) return 'text-red-600';\r\n    if (percentage <= 25) return 'text-orange-600';\r\n    return 'text-green-600';\r\n  };\r\n\r\n  const getSectionProgress = (sectionIndex: number) => {\r\n    const sectionQuestions = questions.filter(q => q.section === sections[sectionIndex]?.name);\r\n    const answeredQuestions = sectionQuestions.filter(q => q.answered).length;\r\n    return {\r\n      answered: answeredQuestions,\r\n      total: sectionQuestions.length,\r\n      percentage: sectionQuestions.length > 0 ? (answeredQuestions / sectionQuestions.length) * 100 : 0\r\n    };\r\n  };\r\n\r\n  const getOverallProgress = () => {\r\n    const totalAnswered = questions.filter(q => q.answered).length;\r\n    return {\r\n      answered: totalAnswered,\r\n      total: questions.length,\r\n      percentage: (totalAnswered / questions.length) * 100\r\n    };\r\n  };\r\n\r\n  const currentSectionData = sections[currentSection];\r\n  const sectionProgress = getSectionProgress(currentSection);\r\n  const overallProgress = getOverallProgress();\r\n\r\n  if (isSubmitted) {\r\n    return (\r\n      <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-center\">\r\n          <CheckCircle className=\"h-8 w-8 text-green-600 mr-3\" />\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-green-900\">Exam Submitted</h3>\r\n            <p className=\"text-green-700\">Your answers have been successfully submitted.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`bg-white rounded-lg shadow ${compact ? 'p-4' : 'p-6'}`}>\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <div>\r\n            <h3 className={`font-semibold text-gray-900 ${compact ? 'text-base' : 'text-lg'}`}>\r\n              {currentSectionData?.name}\r\n            </h3>\r\n            {!compact && (\r\n              <p className=\"text-sm text-gray-500\">\r\n                Question {currentQuestion + 1} of {sectionProgress.total}\r\n              </p>\r\n            )}\r\n          </div>\r\n          \r\n          {isPaused && (\r\n            <div className=\"flex items-center text-orange-600\">\r\n              <Pause className=\"h-4 w-4 mr-1\" />\r\n              <span className=\"text-sm font-medium\">Paused</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Timer */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          <div className={`flex items-center ${getTimeColor()}`}>\r\n            <Clock className=\"h-5 w-5 mr-2\" />\r\n            <span className={`font-mono font-bold ${compact ? 'text-lg' : 'text-xl'}`}>\r\n              {formatTime(localTimeRemaining)}\r\n            </span>\r\n          </div>\r\n          \r\n          {/* Control Buttons */}\r\n          <div className=\"flex space-x-2\">\r\n            {onPause && !isPaused && (\r\n              <button\r\n                onClick={onPause}\r\n                className=\"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                title=\"Pause Exam\"\r\n              >\r\n                <Pause className=\"h-4 w-4\" />\r\n              </button>\r\n            )}\r\n            {onSubmit && (\r\n              <button\r\n                onClick={onSubmit}\r\n                className=\"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n              >\r\n                <Square className=\"h-4 w-4 mr-2\" />\r\n                Submit\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bars */}\r\n      {!compact && (\r\n        <div className=\"space-y-3 mb-6\">\r\n          {/* Section Progress */}\r\n          <div>\r\n            <div className=\"flex items-center justify-between text-sm mb-1\">\r\n              <span className=\"text-gray-600\">Section Progress</span>\r\n              <span className=\"font-medium text-gray-900\">\r\n                {sectionProgress.answered}/{sectionProgress.total} ({Math.round(sectionProgress.percentage)}%)\r\n              </span>\r\n            </div>\r\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n              <div\r\n                className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${sectionProgress.percentage}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Overall Progress */}\r\n          <div>\r\n            <div className=\"flex items-center justify-between text-sm mb-1\">\r\n              <span className=\"text-gray-600\">Overall Progress</span>\r\n              <span className=\"font-medium text-gray-900\">\r\n                {overallProgress.answered}/{overallProgress.total} ({Math.round(overallProgress.percentage)}%)\r\n              </span>\r\n            </div>\r\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n              <div\r\n                className=\"bg-green-600 h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${overallProgress.percentage}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Navigation */}\r\n      {showNavigation && sections.length > 1 && (\r\n        <div className=\"border-t border-gray-200 pt-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-sm text-gray-600\">Sections:</span>\r\n              {sections.map((section, index) => {\r\n                const progress = getSectionProgress(index);\r\n                const isActive = index === currentSection;\r\n                const isCompleted = progress.percentage === 100;\r\n                \r\n                return (\r\n                  <button\r\n                    key={index}\r\n                    onClick={() => onSectionChange && onSectionChange(index)}\r\n                    disabled={!onSectionChange}\r\n                    className={`px-3 py-2 rounded-lg border-2 transition-colors ${\r\n                      isActive\r\n                        ? 'border-blue-500 bg-blue-50'\r\n                        : isCompleted\r\n                        ? 'border-green-500 bg-green-50'\r\n                        : 'border-gray-200 hover:border-gray-300'\r\n                    } ${!onSectionChange ? 'cursor-not-allowed' : ''}`}\r\n                  >\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className=\"text-sm font-medium\">{section.name}</span>\r\n                      {isCompleted && (\r\n                        <CheckCircle className=\"h-3 w-3 text-green-600\" />\r\n                      )}\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-500\">\r\n                      {progress.answered}/{progress.total}\r\n                    </div>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Question Navigation */}\r\n            {onQuestionChange && (\r\n              <div className=\"flex items-center space-x-2\">\r\n                <button\r\n                  onClick={() => onQuestionChange(Math.max(0, currentQuestion - 1))}\r\n                  disabled={currentQuestion === 0}\r\n                  className=\"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  â†\r\n                </button>\r\n                <span className=\"text-sm text-gray-600\">\r\n                  {currentQuestion + 1} / {sectionProgress.total}\r\n                </span>\r\n                <button\r\n                  onClick={() => onQuestionChange(Math.min(sectionProgress.total - 1, currentQuestion + 1))}\r\n                  disabled={currentQuestion === sectionProgress.total - 1}\r\n                  className=\"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  â†’\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Time Warning */}\r\n      {localTimeRemaining <= 300 && localTimeRemaining > 0 && (\r\n        <div className=\"mt-4 bg-orange-50 border border-orange-200 rounded-lg p-3\">\r\n          <div className=\"flex items-center\">\r\n            <AlertCircle className=\"h-4 w-4 text-orange-600 mr-2\" />\r\n            <span className=\"text-sm text-orange-800\">\r\n              Less than 5 minutes remaining in this section!\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\ProgressChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\QuestionCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BookOpen' is defined but never used.","line":4,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":47,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"BookOpen"},"fix":{"range":[95,105],"text":""},"desc":"Remove unused variable \"BookOpen\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { CheckCircle, XCircle, Clock, BookOpen, Eye, EyeOff } from 'lucide-react';\r\n\r\ninterface QuestionOption {\r\n  id: string;\r\n  text: string;\r\n  isCorrect?: boolean;\r\n}\r\n\r\ninterface Question {\r\n  id: number;\r\n  questionText: string;\r\n  questionType: 'MULTIPLE_CHOICE' | 'TEXT' | 'MATH';\r\n  options?: QuestionOption[];\r\n  correctAnswer?: string;\r\n  explanation?: string;\r\n  subject?: string;\r\n  difficulty?: 'EASY' | 'MEDIUM' | 'HARD';\r\n  timeLimit?: number;\r\n  points?: number;\r\n}\r\n\r\ninterface QuestionCardProps {\r\n  question: Question;\r\n  onAnswer?: (answer: string) => void;\r\n  onSkip?: () => void;\r\n  showResult?: boolean;\r\n  selectedAnswer?: string;\r\n  userAnswer?: string;\r\n  isCorrect?: boolean;\r\n  timeRemaining?: number;\r\n  compact?: boolean;\r\n  interactive?: boolean;\r\n}\r\n\r\nexport default function QuestionCard({\r\n  question,\r\n  onAnswer,\r\n  onSkip,\r\n  showResult = false,\r\n  selectedAnswer,\r\n  userAnswer,\r\n  isCorrect,\r\n  timeRemaining,\r\n  compact = false,\r\n  interactive = true\r\n}: QuestionCardProps) {\r\n  const [localAnswer, setLocalAnswer] = useState(selectedAnswer || '');\r\n  const [showExplanation, setShowExplanation] = useState(false);\r\n\r\n  const handleAnswerSelect = (answer: string) => {\r\n    if (!interactive) return;\r\n    \r\n    setLocalAnswer(answer);\r\n    if (onAnswer) {\r\n      onAnswer(answer);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (localAnswer && onAnswer) {\r\n      onAnswer(localAnswer);\r\n    }\r\n  };\r\n\r\n  const getDifficultyColor = (difficulty?: string) => {\r\n    switch (difficulty) {\r\n      case 'EASY':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'MEDIUM':\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      case 'HARD':\r\n        return 'bg-red-100 text-red-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getSubjectColor = (subject?: string) => {\r\n    switch (subject) {\r\n      case 'MATH':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'READING':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'WRITING':\r\n        return 'bg-purple-100 text-purple-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const renderOptions = () => {\r\n    if (question.questionType === 'MULTIPLE_CHOICE' && question.options) {\r\n      return (\r\n        <div className=\"space-y-3\">\r\n          {question.options.map((option) => {\r\n            const isSelected = localAnswer === option.id;\r\n            const isCorrect = option.isCorrect;\r\n            const showCorrect = showResult && option.isCorrect;\r\n            const showIncorrect = showResult && isSelected && !isCorrect;\r\n\r\n            return (\r\n              <label\r\n                key={option.id}\r\n                className={`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${\r\n                  !interactive ? 'cursor-not-allowed' : 'hover:border-gray-300'\r\n                } ${\r\n                  isSelected && !showResult ? 'border-blue-500 bg-blue-50' : 'border-gray-200'\r\n                } ${\r\n                  showCorrect ? 'border-green-500 bg-green-50' : ''\r\n                } ${\r\n                  showIncorrect ? 'border-red-500 bg-red-50' : ''\r\n                }`}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name={`question-${question.id}`}\r\n                  value={option.id}\r\n                  checked={isSelected}\r\n                  onChange={() => handleAnswerSelect(option.id)}\r\n                  disabled={!interactive}\r\n                  className=\"mr-3\"\r\n                />\r\n                <span className=\"flex-1\">{option.text}</span>\r\n                {showCorrect && (\r\n                  <CheckCircle className=\"h-5 w-5 text-green-500 ml-2\" />\r\n                )}\r\n                {showIncorrect && (\r\n                  <XCircle className=\"h-5 w-5 text-red-500 ml-2\" />\r\n                )}\r\n              </label>\r\n            );\r\n          })}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (question.questionType === 'TEXT') {\r\n      return (\r\n        <textarea\r\n          value={localAnswer}\r\n          onChange={(e) => setLocalAnswer(e.target.value)}\r\n          disabled={!interactive}\r\n          placeholder=\"Type your answer here...\"\r\n          className=\"w-full p-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 disabled:bg-gray-50\"\r\n          rows={compact ? 3 : 4}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (question.questionType === 'MATH') {\r\n      return (\r\n        <textarea\r\n          value={localAnswer}\r\n          onChange={(e) => setLocalAnswer(e.target.value)}\r\n          disabled={!interactive}\r\n          placeholder=\"Enter your mathematical answer...\"\r\n          className=\"w-full p-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 disabled:bg-gray-50 font-mono\"\r\n          rows={compact ? 2 : 3}\r\n        />\r\n      );\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className={`bg-white rounded-lg shadow ${compact ? 'p-4' : 'p-6'}`}>\r\n      {/* Question Header */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          {question.subject && (\r\n            <span className={`px-2 py-1 text-xs font-medium rounded-full ${getSubjectColor(question.subject)}`}>\r\n              {question.subject}\r\n            </span>\r\n          )}\r\n          {question.difficulty && (\r\n            <span className={`px-2 py-1 text-xs font-medium rounded-full ${getDifficultyColor(question.difficulty)}`}>\r\n              {question.difficulty}\r\n            </span>\r\n          )}\r\n          {question.points && (\r\n            <span className=\"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full\">\r\n              {question.points} pts\r\n            </span>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          {timeRemaining !== undefined && (\r\n            <div className=\"flex items-center text-sm text-orange-600\">\r\n              <Clock className=\"h-4 w-4 mr-1\" />\r\n              {Math.floor(timeRemaining / 60)}:{(timeRemaining % 60).toString().padStart(2, '0')}\r\n            </div>\r\n          )}\r\n          {showResult && question.explanation && (\r\n            <button\r\n              onClick={() => setShowExplanation(!showExplanation)}\r\n              className=\"flex items-center text-sm text-blue-600 hover:text-blue-700\"\r\n            >\r\n              {showExplanation ? <EyeOff className=\"h-4 w-4 mr-1\" /> : <Eye className=\"h-4 w-4 mr-1\" />}\r\n              {showExplanation ? 'Hide' : 'Show'} Explanation\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Question Text */}\r\n      <div className=\"mb-6\">\r\n        <h3 className={`font-semibold text-gray-900 ${compact ? 'text-base' : 'text-lg'} mb-2`}>\r\n          {compact ? (\r\n            <span className=\"line-clamp-2\">{question.questionText}</span>\r\n          ) : (\r\n            question.questionText\r\n          )}\r\n        </h3>\r\n        {!compact && question.questionType === 'MULTIPLE_CHOICE' && (\r\n          <p className=\"text-sm text-gray-500\">Choose the best answer</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Answer Options */}\r\n      <div className=\"mb-6\">\r\n        {renderOptions()}\r\n      </div>\r\n\r\n      {/* Explanation */}\r\n      {showResult && showExplanation && question.explanation && (\r\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n          <h4 className=\"font-semibold text-blue-900 mb-2\">Explanation</h4>\r\n          <p className=\"text-blue-800\">{question.explanation}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Result Feedback */}\r\n      {showResult && userAnswer && (\r\n        <div className={`rounded-lg p-4 mb-6 ${\r\n          isCorrect ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'\r\n        }`}>\r\n          <div className=\"flex items-center\">\r\n            {isCorrect ? (\r\n              <CheckCircle className=\"h-5 w-5 text-green-500 mr-2\" />\r\n            ) : (\r\n              <XCircle className=\"h-5 w-5 text-red-500 mr-2\" />\r\n            )}\r\n            <span className={`font-medium ${isCorrect ? 'text-green-800' : 'text-red-800'}`}>\r\n              {isCorrect ? 'Correct!' : 'Incorrect'}\r\n            </span>\r\n          </div>\r\n          {!isCorrect && question.correctAnswer && (\r\n            <p className=\"text-sm mt-2 text-red-700\">\r\n              Correct answer: {question.correctAnswer}\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Actions */}\r\n      {interactive && !showResult && (\r\n        <div className=\"flex justify-between\">\r\n          <div className=\"text-sm text-gray-500\">\r\n            Question {question.id}\r\n          </div>\r\n          <div className=\"flex space-x-3\">\r\n            {onSkip && (\r\n              <button\r\n                onClick={onSkip}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Skip\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={handleSubmit}\r\n              disabled={!localAnswer}\r\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n            >\r\n              Submit\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\StudySessionTracker.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Pause' is defined but never used.","line":4,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":21,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Pause"},"fix":{"range":[76,83],"text":""},"desc":"Remove unused variable \"Pause\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1287,1290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1287,1290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1742,1745],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1742,1745],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Play, Pause, Square, Clock, Target, Brain, BookOpen } from 'lucide-react';\r\nimport { analyticsApi } from '../utils/api';\r\n\r\ninterface ActiveSession {\r\n  id: number;\r\n  session_type: string;\r\n  started_at: string;\r\n  current_duration_minutes: number;\r\n}\r\n\r\ninterface StudySessionTrackerProps {\r\n  onSessionUpdate?: () => void;\r\n  className?: string;\r\n}\r\n\r\nexport default function StudySessionTracker({ onSessionUpdate, className = '' }: StudySessionTrackerProps) {\r\n  const [activeSession, setActiveSession] = useState<ActiveSession | null>(null);\r\n  const [currentDuration, setCurrentDuration] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    checkActiveSession();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n    \r\n    if (activeSession) {\r\n      interval = setInterval(() => {\r\n        setCurrentDuration(prev => prev + 1);\r\n      }, 60000); // Update every minute\r\n    }\r\n    \r\n    return () => clearInterval(interval);\r\n  }, [activeSession]);\r\n\r\n  const checkActiveSession = async () => {\r\n    try {\r\n      const response = await analyticsApi.getActiveSession() as any;\r\n      if (response.active_session) {\r\n        setActiveSession(response.active_session);\r\n        setCurrentDuration(response.active_session.current_duration_minutes);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to check active session:', error);\r\n    }\r\n  };\r\n\r\n  const startSession = async (sessionType: string) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await analyticsApi.startStudySession(sessionType) as any;\r\n      if (response) {\r\n        setActiveSession(response);\r\n        setCurrentDuration(0);\r\n        onSessionUpdate?.();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to start session:', error);\r\n      alert('Failed to start study session. Please try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const endSession = async () => {\r\n    if (!activeSession) return;\r\n    \r\n    setIsLoading(true);\r\n    try {\r\n      await analyticsApi.endStudySession(activeSession.id);\r\n      setActiveSession(null);\r\n      setCurrentDuration(0);\r\n      \r\n      // Call the callback to refresh dashboard data\r\n      onSessionUpdate?.();\r\n      \r\n      // Show success message\r\n      const message = `Great job! You studied for ${formatTime(currentDuration)}.`;\r\n      if (typeof window !== 'undefined') {\r\n        // Create a simple notification instead of alert\r\n        const notification = document.createElement('div');\r\n        notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';\r\n        notification.textContent = message;\r\n        document.body.appendChild(notification);\r\n        \r\n        setTimeout(() => {\r\n          document.body.removeChild(notification);\r\n        }, 3000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to end session:', error);\r\n      alert('Failed to end study session. Please try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatTime = (minutes: number): string => {\r\n    if (minutes < 60) return `${minutes}m`;\r\n    const hours = Math.floor(minutes / 60);\r\n    const mins = minutes % 60;\r\n    return `${hours}h ${mins}m`;\r\n  };\r\n\r\n  const getSessionIcon = (sessionType: string) => {\r\n    switch (sessionType) {\r\n      case 'practice':\r\n        return <Target className=\"h-4 w-4\" />;\r\n      case 'homework':\r\n        return <BookOpen className=\"h-4 w-4\" />;\r\n      case 'mock_exam':\r\n        return <Brain className=\"h-4 w-4\" />;\r\n      default:\r\n        return <Play className=\"h-4 w-4\" />;\r\n    }\r\n  };\r\n\r\n  const getSessionLabel = (sessionType: string) => {\r\n    switch (sessionType) {\r\n      case 'practice':\r\n        return 'Practice Questions';\r\n      case 'homework':\r\n        return 'Homework';\r\n      case 'mock_exam':\r\n        return 'Mock Exam';\r\n      default:\r\n        return 'Study Session';\r\n    }\r\n  };\r\n\r\n  if (!mounted) {\r\n    return (\r\n      <div className={className}>\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-10 bg-gray-200 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (activeSession) {\r\n    return (\r\n      <div className={className}>\r\n        <div className=\"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <div className=\"w-3 h-3 bg-green-500 rounded-full animate-pulse\"></div>\r\n              <span className=\"text-sm font-medium text-green-800\">Active Session</span>\r\n              {getSessionIcon(activeSession.session_type)}\r\n              <span className=\"text-sm text-gray-700\">{getSessionLabel(activeSession.session_type)}</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2 text-green-700\">\r\n              <Clock className=\"h-4 w-4\" />\r\n              <span className=\"font-mono text-sm font-medium\">{formatTime(currentDuration)}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <button\r\n            onClick={endSession}\r\n            disabled={isLoading}\r\n            className=\"w-full flex items-center justify-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50\"\r\n          >\r\n            <Square className=\"h-4 w-4\" />\r\n            <span>{isLoading ? 'Ending...' : 'End Session'}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\r\n        <div className=\"mb-3\">\r\n          <h3 className=\"text-sm font-medium text-gray-900 mb-2\">Start Study Session</h3>\r\n          <p className=\"text-xs text-gray-600\">Track your study time and maintain your streak!</p>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          <button\r\n            onClick={() => startSession('practice')}\r\n            disabled={isLoading}\r\n            className=\"flex items-center justify-center space-x-2 bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm\"\r\n          >\r\n            <Target className=\"h-4 w-4\" />\r\n            <span>{isLoading ? 'Starting...' : 'Practice'}</span>\r\n          </button>\r\n          \r\n          <button\r\n            onClick={() => startSession('homework')}\r\n            disabled={isLoading}\r\n            className=\"flex items-center justify-center space-x-2 bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 text-sm\"\r\n          >\r\n            <BookOpen className=\"h-4 w-4\" />\r\n            <span>{isLoading ? 'Starting...' : 'Homework'}</span>\r\n          </button>\r\n          \r\n          <button\r\n            onClick={() => startSession('mock_exam')}\r\n            disabled={isLoading}\r\n            className=\"flex items-center justify-center space-x-2 bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 text-sm\"\r\n          >\r\n            <Brain className=\"h-4 w-4\" />\r\n            <span>{isLoading ? 'Starting...' : 'Mock Exam'}</span>\r\n          </button>\r\n          \r\n          <button\r\n            onClick={() => startSession('general')}\r\n            disabled={isLoading}\r\n            className=\"flex items-center justify-center space-x-2 bg-gray-600 text-white px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50 text-sm\"\r\n          >\r\n            <Play className=\"h-4 w-4\" />\r\n            <span>{isLoading ? 'Starting...' : 'General'}</span>\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"mt-3 p-2 bg-blue-50 rounded-lg\">\r\n          <p className=\"text-xs text-blue-800\">\r\n            ðŸ’¡ Tip: Even 15 minutes counts toward your daily streak!\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\StudyStreak.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":4,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":32,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[84,94],"text":""},"desc":"Remove unused variable \"Calendar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":4,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":51,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[106,113],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setStreakData' is assigned a value but never used.","line":23,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":35},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\components\\StudyStreak.tsx:33:5\n  31 |\n  32 |   useEffect(() => {\n> 33 |     setMounted(true);\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  34 |   }, []);\n  35 |\n  36 |   const getStreakColor = (days: number): string => {","line":33,"column":5,"nodeType":null,"endLine":33,"endColumn":15},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":107,"column":58,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3683,3696],"text":"Today&apos;s Study"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3683,3696],"text":"Today&lsquo;s Study"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3683,3696],"text":"Today&#39;s Study"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3683,3696],"text":"Today&rsquo;s Study"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":193,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7326,7420],"text":"\r\n              ðŸ† Incredible consistency! You&apos;re building amazing study habits.\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7326,7420],"text":"\r\n              ðŸ† Incredible consistency! You&lsquo;re building amazing study habits.\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7326,7420],"text":"\r\n              ðŸ† Incredible consistency! You&#39;re building amazing study habits.\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7326,7420],"text":"\r\n              ðŸ† Incredible consistency! You&rsquo;re building amazing study habits.\r\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Award, Flame, Calendar, TrendingUp, Clock } from 'lucide-react';\r\n\r\ninterface StudyStreakProps {\r\n  streakDays: number;\r\n  studyTimeToday: number;\r\n  className?: string;\r\n}\r\n\r\ninterface StreakData {\r\n  currentStreak: number;\r\n  longestStreak: number;\r\n  totalStudyDays: number;\r\n  averageDailyTime: number;\r\n  thisWeekStudy: number;\r\n  lastWeekStudy: number;\r\n}\r\n\r\nexport default function StudyStreak({ streakDays, studyTimeToday, className = '' }: StudyStreakProps) {\r\n  const [mounted, setMounted] = useState(false);\r\n  const [streakData, setStreakData] = useState<StreakData>({\r\n    currentStreak: streakDays,\r\n    longestStreak: 0,\r\n    totalStudyDays: 0,\r\n    averageDailyTime: 0,\r\n    thisWeekStudy: 0,\r\n    lastWeekStudy: 0\r\n  });\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  const getStreakColor = (days: number): string => {\r\n    if (days >= 30) return 'text-purple-600';\r\n    if (days >= 14) return 'text-blue-600';\r\n    if (days >= 7) return 'text-green-600';\r\n    if (days >= 3) return 'text-yellow-600';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const getStreakMessage = (days: number): string => {\r\n    if (days === 0) return 'Start your streak today!';\r\n    if (days === 1) return 'Great start! Keep it going!';\r\n    if (days < 7) return `${days} day streak! Building momentum!`;\r\n    if (days < 14) return `${days} day streak! You're on fire!`;\r\n    if (days < 30) return `${days} day streak! Incredible consistency!`;\r\n    return `${days} day streak! You're a study legend!`;\r\n  };\r\n\r\n  const getStreakIcon = (days: number) => {\r\n    if (days >= 30) return <Flame className=\"h-6 w-6 text-purple-600\" />;\r\n    if (days >= 14) return <Flame className=\"h-6 w-6 text-blue-600\" />;\r\n    if (days >= 7) return <Flame className=\"h-6 w-6 text-green-600\" />;\r\n    if (days >= 3) return <Flame className=\"h-6 w-6 text-yellow-600\" />;\r\n    return <Flame className=\"h-6 w-6 text-gray-400\" />;\r\n  };\r\n\r\n  const getWeeklyProgress = () => {\r\n    if (streakData.lastWeekStudy === 0) return 100;\r\n    return Math.round(((streakData.thisWeekStudy - streakData.lastWeekStudy) / streakData.lastWeekStudy) * 100);\r\n  };\r\n\r\n  const formatTime = (minutes: number): string => {\r\n    if (minutes < 60) return `${minutes}m`;\r\n    const hours = Math.floor(minutes / 60);\r\n    const mins = minutes % 60;\r\n    return `${hours}h ${mins}m`;\r\n  };\r\n\r\n  if (!mounted) {\r\n    return (\r\n      <div className={className}>\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n          <div className=\"h-8 bg-gray-200 rounded w-1/2\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const weeklyProgress = getWeeklyProgress();\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div>\r\n            <p className=\"text-sm font-medium text-gray-600\">Study Streak</p>\r\n            <div className=\"flex items-center space-x-2\">\r\n              {getStreakIcon(streakDays)}\r\n              <p className={`text-2xl font-bold ${getStreakColor(streakDays)}`}>\r\n                {streakDays} days\r\n              </p>\r\n            </div>\r\n            <p className=\"text-xs text-gray-500\">{getStreakMessage(streakDays)}</p>\r\n          </div>\r\n          <Award className=\"h-8 w-8 text-gray-400\" />\r\n        </div>\r\n\r\n        {/* Today's Progress */}\r\n        <div className=\"border-t pt-4 mb-4\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-gray-600\">Today's Study</span>\r\n            <span className=\"text-sm font-medium text-gray-900\">\r\n              {formatTime(studyTimeToday)}\r\n            </span>\r\n          </div>\r\n          <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n            <div \r\n              className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n              style={{ \r\n                width: `${Math.min((studyTimeToday / 120) * 100, 100)}%` \r\n              }}\r\n            ></div>\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 mt-1\">Goal: 2 hours</p>\r\n        </div>\r\n\r\n        {/* Weekly Comparison */}\r\n        <div className=\"border-t pt-4 mb-4\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm text-gray-600\">This Week vs Last Week</span>\r\n            <div className=\"flex items-center space-x-1\">\r\n              {weeklyProgress > 0 ? (\r\n                <TrendingUp className=\"h-4 w-4 text-green-500\" />\r\n              ) : (\r\n                <TrendingUp className=\"h-4 w-4 text-red-500 rotate-180\" />\r\n              )}\r\n              <span className={`text-sm font-medium ${\r\n                weeklyProgress > 0 ? 'text-green-600' : 'text-red-600'\r\n              }`}>\r\n                {weeklyProgress > 0 ? '+' : ''}{weeklyProgress}%\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Streak Milestones */}\r\n        <div className=\"border-t pt-4\">\r\n          <p className=\"text-sm font-medium text-gray-700 mb-3\">Milestones</p>\r\n          <div className=\"space-y-2\">\r\n            {[\r\n              { days: 3, label: '3 Days', achieved: streakDays >= 3, color: 'bg-yellow-100 text-yellow-800' },\r\n              { days: 7, label: '1 Week', achieved: streakDays >= 7, color: 'bg-green-100 text-green-800' },\r\n              { days: 14, label: '2 Weeks', achieved: streakDays >= 14, color: 'bg-blue-100 text-blue-800' },\r\n              { days: 30, label: '1 Month', achieved: streakDays >= 30, color: 'bg-purple-100 text-purple-800' },\r\n            ].map((milestone) => (\r\n              <div key={milestone.days} className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className={`w-3 h-3 rounded-full ${\r\n                    milestone.achieved ? 'bg-green-500' : 'bg-gray-300'\r\n                  }`}></div>\r\n                  <span className={`text-sm ${\r\n                    milestone.achieved ? 'text-gray-900 font-medium' : 'text-gray-500'\r\n                  }`}>\r\n                    {milestone.label}\r\n                  </span>\r\n                </div>\r\n                {milestone.achieved && (\r\n                  <span className={`text-xs px-2 py-1 rounded-full ${milestone.color}`}>\r\n                    âœ“\r\n                  </span>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Motivational Message */}\r\n        {streakDays === 0 && (\r\n          <div className=\"mt-4 p-3 bg-blue-50 rounded-lg\">\r\n            <p className=\"text-sm text-blue-800\">\r\n              ðŸ’ª Start your study streak today! Even 15 minutes counts.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {streakDays >= 1 && streakDays < 7 && (\r\n          <div className=\"mt-4 p-3 bg-green-50 rounded-lg\">\r\n            <p className=\"text-sm text-green-800\">\r\n              ðŸ”¥ Great momentum! Keep the streak going!\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {streakDays >= 7 && (\r\n          <div className=\"mt-4 p-3 bg-purple-50 rounded-lg\">\r\n            <p className=\"text-sm text-purple-800\">\r\n              ðŸ† Incredible consistency! You're building amazing study habits.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\config\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AuthResponse' is defined but never used.","line":4,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AuthResponse"},"fix":{"range":[110,124],"text":""},"desc":"Remove unused variable \"AuthResponse\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'usersApi' is defined but never used.","line":5,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"usersApi"},"fix":{"range":[161,171],"text":""},"desc":"Remove unused variable \"usersApi\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4476,4479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4476,4479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { User, AuthResponse } from '../types';\r\nimport { authApi, usersApi, handleApiError, healthCheck } from '../utils/api';\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  isLoading: boolean;\r\n  login: (email: string, password: string) => Promise<void>;\r\n  register: (userData: {\r\n    email: string;\r\n    password: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    invitation_code: string;\r\n  }) => Promise<void>;\r\n  logout: () => void;\r\n  updateUser: (user: User) => void;\r\n  refreshUser: () => Promise<void>;\r\n  isBackendHealthy: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface AuthProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isBackendHealthy, setIsBackendHealthy] = useState(false);\r\n\r\n  // Check backend health on mount\r\n  useEffect(() => {\r\n    const checkBackendHealth = async () => {\r\n      try {\r\n        const isHealthy = await healthCheck();\r\n        setIsBackendHealthy(isHealthy);\r\n      } catch (error) {\r\n        console.error('Backend health check failed:', error);\r\n        setIsBackendHealthy(false);\r\n      }\r\n    };\r\n\r\n    checkBackendHealth();\r\n    const interval = setInterval(checkBackendHealth, 30000); // Check every 30 seconds\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Check if user is authenticated on mount\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      if (typeof window === 'undefined') return;\r\n      \r\n      const token = localStorage.getItem('access_token');\r\n      if (token) {\r\n        try {\r\n          const userData = await authApi.getUserProfile();\r\n          setUser(userData as User);\r\n        } catch (error) {\r\n          console.error('Auth check failed:', error);\r\n          // Clear invalid tokens\r\n          localStorage.removeItem('access_token');\r\n          localStorage.removeItem('refresh_token');\r\n        }\r\n      }\r\n      setIsLoading(false);\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const login = async (email: string, password: string) => {\r\n    try {\r\n      const response = await authApi.login(email, password);\r\n      const { tokens, user: userData } = response;\r\n      \r\n      // Store tokens\r\n      localStorage.setItem('access_token', tokens.access);\r\n      localStorage.setItem('refresh_token', tokens.refresh);\r\n      \r\n      // Set user\r\n      setUser(userData);\r\n    } catch (error) {\r\n      const errorMessage = handleApiError(error);\r\n      throw new Error(errorMessage);\r\n    }\r\n  };\r\n\r\n  const register = async (userData: {\r\n    email: string;\r\n    password: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    invitation_code: string;\r\n  }) => {\r\n    try {\r\n      const response = await authApi.register(userData);\r\n      const { tokens, user: registeredUser } = response;\r\n      \r\n      // Store tokens\r\n      localStorage.setItem('access_token', tokens.access);\r\n      localStorage.setItem('refresh_token', tokens.refresh);\r\n      \r\n      // Set user\r\n      setUser(registeredUser);\r\n    } catch (error) {\r\n      const errorMessage = handleApiError(error);\r\n      throw new Error(errorMessage);\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    // Clear tokens\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('refresh_token');\r\n    \r\n    // Clear user\r\n    setUser(null);\r\n    \r\n    // Redirect to login page\r\n    if (typeof window !== 'undefined') {\r\n      window.location.href = '/login';\r\n    }\r\n  };\r\n\r\n  const updateUser = (userData: User) => {\r\n    setUser(userData);\r\n  };\r\n\r\n  const refreshUser = async () => {\r\n    try {\r\n      const userData = await authApi.getUserProfile();\r\n      setUser(userData as User);\r\n    } catch (error) {\r\n      console.error('Failed to refresh user data:', error);\r\n      // Don't automatically logout - let the user continue with existing session\r\n      // Only logout if it's a clear authentication error (401)\r\n      if (error && typeof error === 'object' && 'response' in error && \r\n          (error as any).response?.status === 401) {\r\n        logout();\r\n      }\r\n    }\r\n  };\r\n\r\n  const value: AuthContextType = {\r\n    user,\r\n    isLoading,\r\n    login,\r\n    register,\r\n    logout,\r\n    updateUser,\r\n    refreshUser,\r\n    isBackendHealthy,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\types\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1765,1768],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1765,1768],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// User Types\r\nexport interface User {\r\n  id: number;\r\n  email: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  role: 'STUDENT' | 'TEACHER' | 'ADMIN';\r\n  invitation_code?: string;\r\n  phone_number?: string;\r\n  date_of_birth?: string;\r\n  grade_level?: number;\r\n  target_sat_score?: number;\r\n  bio?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface StudentProfile {\r\n  id: number;\r\n  user: number;\r\n  target_sat_score: number;\r\n  sat_exam_date: string;\r\n  study_hours_per_day: number;\r\n  weak_subjects: string[];\r\n  preferred_study_times: string[];\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface Invitation {\r\n  id: number;\r\n  code: string;\r\n  invited_by: number;\r\n  email: string;\r\n  role: 'STUDENT' | 'TEACHER';\r\n  is_used: boolean;\r\n  expires_at: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Class Types\r\nexport interface Class {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  teacher: number;\r\n  students: number[];\r\n  is_active: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface ClassLeaderboard {\r\n  student: User;\r\n  total_points: number;\r\n  weekly_points: number;\r\n  rank: number;\r\n  weekly_rank: number;\r\n}\r\n\r\n// Homework Types\r\nexport interface Homework {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  class_obj: number;\r\n  assigned_by: number;\r\n  due_date: string;\r\n  is_published: boolean;\r\n  total_questions: number;\r\n  difficulty_level: 'EASY' | 'MEDIUM' | 'HARD';\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface HomeworkSubmission {\r\n  id: number;\r\n  homework: number;\r\n  student: number;\r\n  submitted_at: string;\r\n  score: number;\r\n  max_score: number;\r\n  is_late: boolean;\r\n  answers: Record<string, any>;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Question Bank Types\r\nexport interface Question {\r\n  id: number;\r\n  question_text: string;\r\n  question_type: 'MULTIPLE_CHOICE' | 'TEXT' | 'MATH';\r\n  subject: 'MATH' | 'READING' | 'WRITING';\r\n  difficulty: 'EASY' | 'MEDIUM' | 'HARD';\r\n  correct_answer: string;\r\n  explanation: string;\r\n  options?: string[];\r\n  tags: string[];\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface QuestionAttempt {\r\n  id: number;\r\n  question: number;\r\n  student: number;\r\n  selected_answer: string;\r\n  is_correct: boolean;\r\n  time_taken_seconds: number;\r\n  attempt_type: 'PRACTICE' | 'HOMEWORK' | 'MOCK_EXAM';\r\n  created_at: string;\r\n}\r\n\r\n// Mock Exam Types\r\nexport interface MockExam {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  exam_type: 'FULL' | 'MATH' | 'READING' | 'WRITING';\r\n  total_questions: number;\r\n  time_limit_minutes: number;\r\n  is_active: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface MockExamAttempt {\r\n  id: number;\r\n  mock_exam: number;\r\n  student: number;\r\n  started_at: string;\r\n  submitted_at?: string;\r\n  is_completed: boolean;\r\n  sat_score: number;\r\n  math_score: number;\r\n  reading_writing_score: number;\r\n  section_scores: Record<string, number>;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Flashcard Types\r\nexport interface Flashcard {\r\n  id: number;\r\n  word: string;\r\n  definition: string;\r\n  pronunciation?: string;\r\n  example_sentence: string;\r\n  difficulty: 'EASY' | 'MEDIUM' | 'HARD';\r\n  subject: 'MATH' | 'READING' | 'WRITING';\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface FlashcardProgress {\r\n  id: number;\r\n  flashcard: number;\r\n  student: number;\r\n  easiness_factor: number;\r\n  repetition_count: number;\r\n  interval_days: number;\r\n  next_review_date: string;\r\n  last_reviewed_at?: string;\r\n  is_mastered: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Rankings Types\r\nexport interface Ranking {\r\n  id: number;\r\n  student: number;\r\n  period_type: 'WEEKLY' | 'MONTHLY' | 'ALL_TIME';\r\n  points: number;\r\n  rank: number;\r\n  period_start: string;\r\n  period_end: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface LeaderboardEntry {\r\n  student: User;\r\n  points: number;\r\n  rank: number;\r\n  period_type: 'WEEKLY' | 'MONTHLY' | 'ALL_TIME';\r\n  trend: 'up' | 'down' | 'stable';\r\n}\r\n\r\n// Analytics Types\r\nexport interface StudentProgress {\r\n  id: number;\r\n  student: number;\r\n  date: string;\r\n  homework_completed: number;\r\n  homework_total: number;\r\n  homework_completion_rate: number;\r\n  homework_accuracy: number;\r\n  mock_exams_taken: number;\r\n  latest_sat_score: number;\r\n  average_sat_score: number;\r\n  flashcards_mastered: number;\r\n  flashcards_total: number;\r\n  study_time_minutes: number;\r\n  streak_days: number;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface WeakArea {\r\n  id: number;\r\n  student: number;\r\n  subject: string;\r\n  subcategory: string;\r\n  accuracy_rate: number;\r\n  total_attempts: number;\r\n  improvement_suggestion: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface StudySession {\r\n  id: number;\r\n  student: number;\r\n  session_type: 'HOMEWORK' | 'MOCK_EXAM' | 'FLASHCARDS' | 'QUESTION_PRACTICE' | 'REVIEW';\r\n  started_at: string;\r\n  ended_at?: string;\r\n  duration_minutes: number;\r\n  questions_attempted: number;\r\n  questions_correct: number;\r\n  flashcards_reviewed: number;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// API Response Types\r\nexport interface ApiResponse<T> {\r\n  count: number;\r\n  next?: string;\r\n  previous?: string;\r\n  results: T[];\r\n}\r\n\r\nexport interface PaginatedResponse<T> {\r\n  data: T[];\r\n  pagination: {\r\n    page: number;\r\n    pageSize: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\n// Auth Types\r\nexport interface LoginRequest {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nexport interface RegisterRequest {\r\n  email: string;\r\n  password: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  invitation_code: string;\r\n}\r\n\r\nexport interface AuthResponse {\r\n  user: User;\r\n  tokens: {\r\n    access: string;\r\n    refresh: string;\r\n  };\r\n}\r\n\r\n// Form Types\r\nexport interface FormErrors {\r\n  [key: string]: string[];\r\n}\r\n\r\nexport interface ApiError {\r\n  detail: string;\r\n  code?: string;\r\n  field?: string;\r\n}\r\n\r\n// Chart Data Types\r\nexport interface ProgressChartData {\r\n  date: string;\r\n  homework_completion: number;\r\n  sat_score: number;\r\n  study_time: number;\r\n  flashcard_mastery: number;\r\n}\r\n\r\nexport interface SubjectPerformance {\r\n  subject: string;\r\n  accuracy: number;\r\n  total_questions: number;\r\n  improvement: number;\r\n}\r\n\r\n// Utility Types\r\nexport type Optional<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;\r\nexport type RequiredFields<T, K extends keyof T> = T & Required<Pick<T, K>>;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\utils\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[898,901],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[898,901],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1991,1994],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1991,1994],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2535,2538],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2535,2538],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2709,2712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2709,2712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2875,2878],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2875,2878],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3044,3047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3044,3047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3954,3957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3954,3957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":143,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4316,4319],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4316,4319],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4583,4586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4583,4586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5050,5053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5050,5053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":195,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5624,5627],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5624,5627],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":199,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5730,5733],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5730,5733],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":226,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6438,6441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6438,6441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6548,6551],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6548,6551],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":572,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":572,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16619,16622],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16619,16622],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios, { AxiosInstance, AxiosResponse, AxiosError } from 'axios';\r\nimport { API_BASE_URL, HTTP_STATUS } from '../config/api';\r\nimport { AuthResponse } from '../types';\r\n\r\n// Create axios instance\r\nconst api: AxiosInstance = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('access_token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor to handle token refresh\r\napi.interceptors.response.use(\r\n  (response: AxiosResponse) => {\r\n    return response;\r\n  },\r\n  async (error: AxiosError) => {\r\n    const originalRequest = error.config as any;\r\n\r\n    if (error.response?.status === HTTP_STATUS.UNAUTHORIZED && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n\r\n      try {\r\n        const refreshToken = localStorage.getItem('refresh_token');\r\n        if (refreshToken) {\r\n          const response = await axios.post(`${API_BASE_URL}/auth/refresh/`, {\r\n            refresh: refreshToken,\r\n          });\r\n\r\n          const { access } = response.data;\r\n          localStorage.setItem('access_token', access);\r\n\r\n          // Retry the original request with new token\r\n          originalRequest.headers.Authorization = `Bearer ${access}`;\r\n          return api(originalRequest);\r\n        }\r\n      } catch (refreshError) {\r\n        // Refresh failed, but don't immediately logout\r\n        // Only clear tokens and redirect if it's a clear auth failure\r\n        console.error('Token refresh failed:', refreshError);\r\n        \r\n        // Check if this is an authentication failure\r\n        if (refreshError && typeof refreshError === 'object' && 'response' in refreshError) {\r\n          const response = (refreshError as any).response;\r\n          if (response?.status === 401) {\r\n            // Clear tokens and redirect only for clear auth failures\r\n            localStorage.removeItem('access_token');\r\n            localStorage.removeItem('refresh_token');\r\n            window.location.href = '/login';\r\n          }\r\n        }\r\n        return Promise.reject(refreshError);\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Generic API methods\r\nexport const apiClient = {\r\n  // GET requests\r\n  get: async <T>(url: string, params?: Record<string, any>): Promise<T> => {\r\n    const response = await api.get<T>(url, { params });\r\n    return response.data;\r\n  },\r\n\r\n  // POST requests\r\n  post: async <T>(url: string, data?: any): Promise<T> => {\r\n    const response = await api.post<T>(url, data);\r\n    return response.data;\r\n  },\r\n\r\n  // PUT requests\r\n  put: async <T>(url: string, data?: any): Promise<T> => {\r\n    const response = await api.put<T>(url, data);\r\n    return response.data;\r\n  },\r\n\r\n  // PATCH requests\r\n  patch: async <T>(url: string, data?: any): Promise<T> => {\r\n    const response = await api.patch<T>(url, data);\r\n    return response.data;\r\n  },\r\n\r\n  // DELETE requests\r\n  delete: async <T>(url: string): Promise<T> => {\r\n    const response = await api.delete<T>(url);\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// Auth API methods\r\nexport const authApi = {\r\n  login: async (email: string, password: string): Promise<AuthResponse> => {\r\n    return apiClient.post('/auth/login/', { email, password });\r\n  },\r\n\r\n  register: async (userData: {\r\n    email: string;\r\n    password: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    invitation_code: string;\r\n  }): Promise<AuthResponse> => {\r\n    return apiClient.post('/auth/register/', userData);\r\n  },\r\n\r\n  refreshToken: async (refresh: string): Promise<{ access: string }> => {\r\n    return apiClient.post('/auth/refresh/', { refresh });\r\n  },\r\n\r\n  verifyToken: async (token: string): Promise<any> => {\r\n    return apiClient.post('/auth/verify/', { token });\r\n  },\r\n\r\n  logout: () => {\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('refresh_token');\r\n  },\r\n\r\n  getUserProfile: async () => {\r\n    // Use /users/me/ to fetch current user's profile\r\n    return apiClient.get('/users/me/');\r\n  },\r\n\r\n  updateProfile: async (data: any) => {\r\n    return apiClient.patch('/users/me/', data);\r\n  },\r\n};\r\n\r\n// Users API methods\r\nexport const usersApi = {\r\n  getProfile: async () => {\r\n    // Return current user's profile\r\n    return apiClient.get('/users/me/');\r\n  },\r\n\r\n  updateProfile: async (data: any) => {\r\n    // Update current user's profile\r\n    return apiClient.patch('/users/me/', data);\r\n  },\r\n\r\n  getInvitations: async () => {\r\n    return apiClient.get('/users/invitations/');\r\n  },\r\n\r\n  createInvitation: async (data: { email: string; role: string }) => {\r\n    return apiClient.post('/users/invitations/', data);\r\n  },\r\n\r\n  getStudentProfile: async () => {\r\n    return apiClient.get('/student-profiles/me/');\r\n  },\r\n\r\n  updateStudentProfile: async (data: any) => {\r\n    return apiClient.patch('/student-profiles/me/', data);\r\n  },\r\n\r\n  updateExamDate: async (examDate: string) => {\r\n    return apiClient.patch('/student-profiles/exam_date/', { sat_exam_date: examDate });\r\n  },\r\n};\r\n\r\n// Classes API methods\r\nexport const classesApi = {\r\n  getClasses: async () => {\r\n    return apiClient.get('/classes/');\r\n  },\r\n\r\n  getStudentClasses: async () => {\r\n    return apiClient.get('/classes/my_classes/');\r\n  },\r\n\r\n  getClass: async (id: number) => {\r\n    return apiClient.get(`/classes/${id}/`);\r\n  },\r\n\r\n  createClass: async (data: any) => {\r\n    return apiClient.post('/classes/', data);\r\n  },\r\n\r\n  updateClass: async (id: number, data: any) => {\r\n    return apiClient.patch(`/classes/${id}/`, data);\r\n  },\r\n\r\n  deleteClass: async (id: number) => {\r\n    return apiClient.delete(`/classes/${id}/`);\r\n  },\r\n\r\n  getClassLeaderboard: async (id: number) => {\r\n    return apiClient.get(`/classes/${id}/leaderboard/`);\r\n  },\r\n};\r\n\r\n// Homework API methods\r\nexport const homeworkApi = {\r\n  getHomework: async (params?: { class?: number; status?: string }) => {\r\n    return apiClient.get('/homework/', { params });\r\n  },\r\n\r\n  getStudentHomework: async () => {\r\n    return apiClient.get('/homework/my_progress/');\r\n  },\r\n\r\n  getHomeworkDetail: async (id: number) => {\r\n    return apiClient.get(`/homework/${id}/`);\r\n  },\r\n\r\n  createHomework: async (data: any) => {\r\n    return apiClient.post('/homework/', data);\r\n  },\r\n\r\n  submitHomework: async (id: number, data: any) => {\r\n    return apiClient.post(`/homework/${id}/submissions/`, data);\r\n  },\r\n\r\n  getMySubmissions: async () => {\r\n    return apiClient.get('/homework/my_submissions/');\r\n  },\r\n\r\n  getSubmission: async (homeworkId: number, submissionId: number) => {\r\n    return apiClient.get(`/homework/${homeworkId}/submissions/${submissionId}/`);\r\n  },\r\n};\r\n\r\n// Question Bank API methods\r\nexport const questionBankApi = {\r\n  getQuestions: async (params?: {\r\n    subject?: string;\r\n    difficulty?: string;\r\n    question_type?: string;\r\n    search?: string;\r\n    limit?: number;\r\n    offset?: number;\r\n  }) => {\r\n    return apiClient.get('/questionbank/questions/', { params });\r\n  },\r\n\r\n  getQuestion: async (id: number) => {\r\n    return apiClient.get(`/questionbank/questions/${id}/`);\r\n  },\r\n\r\n  submitAttempt: async (data: {\r\n    question: number;\r\n    selected_answer: string;\r\n    time_taken_seconds: number;\r\n    attempt_type: string;\r\n  }) => {\r\n    return apiClient.post('/questionbank/attempts/', data);\r\n  },\r\n\r\n  getMyAttempts: async (params?: { question_type?: string; limit?: number }) => {\r\n    return apiClient.get('/questionbank/my_attempts/', { params });\r\n  },\r\n\r\n  getAttemptHistory: async (questionId: number) => {\r\n    return apiClient.get(`/questionbank/questions/${questionId}/attempts/`);\r\n  },\r\n};\r\n\r\n// Bluebook Digital SAT API methods\r\nexport const bluebookApi = {\r\n  getExams: async () => {\r\n    return apiClient.get('/bluebook/exams/');\r\n  },\r\n\r\n  getExam: async (id: number) => {\r\n    return apiClient.get(`/bluebook/exams/${id}/`);\r\n  },\r\n\r\n  getExamStructure: async (id: number) => {\r\n    return apiClient.get(`/bluebook/exams/${id}/structure/`);\r\n  },\r\n\r\n  startExam: async (id: number) => {\r\n    return apiClient.post(`/bluebook/exams/${id}/start_attempt/`);\r\n  },\r\n\r\n  getAttempts: async () => {\r\n    return apiClient.get('/bluebook/attempts/');\r\n  },\r\n\r\n  getAttempt: async (id: number) => {\r\n    return apiClient.get(`/bluebook/attempts/${id}/`);\r\n  },\r\n\r\n  startAttempt: async (id: number) => {\r\n    return apiClient.post(`/bluebook/attempts/${id}/start_exam/`);\r\n  },\r\n\r\n  getStatus: async (id: number) => {\r\n    return apiClient.get(`/bluebook/attempts/${id}/status/`);\r\n  },\r\n\r\n  getCurrentModule: async (id: number) => {\r\n    return apiClient.get(`/bluebook/attempts/${id}/current_module/`);\r\n  },\r\n\r\n  submitModule: async (id: number, data: { \r\n    answers: Record<string, string>; \r\n    flagged_questions?: number[] \r\n  }) => {\r\n    return apiClient.post(`/bluebook/attempts/${id}/submit_module/`, data);\r\n  },\r\n\r\n  flagQuestion: async (id: number, data: { \r\n    question_id: number; \r\n    flagged: boolean \r\n  }) => {\r\n    return apiClient.post(`/bluebook/attempts/${id}/flag_question/`, data);\r\n  },\r\n\r\n  getResults: async (id: number) => {\r\n    return apiClient.get(`/bluebook/attempts/${id}/results/`);\r\n  },\r\n\r\n  completeExam: async (id: number) => {\r\n    return apiClient.post(`/bluebook/attempts/${id}/complete_exam/`);\r\n  },\r\n\r\n  getAnalytics: async () => {\r\n    return apiClient.get('/bluebook/analytics/performance_analytics/');\r\n  },\r\n\r\n  getAdaptivePerformance: async () => {\r\n    return apiClient.get('/bluebook/analytics/adaptive_performance/');\r\n  },\r\n\r\n  getExamStatistics: async () => {\r\n    return apiClient.get('/bluebook/management/exam_statistics/');\r\n  },\r\n};\r\n\r\n// Mock Exams API methods\r\nexport const mockExamsApi = {\r\n  getExams: async () => {\r\n    return apiClient.get('/mock-exams/');\r\n  },\r\n\r\n  getExam: async (id: number) => {\r\n    return apiClient.get(`/mock-exams/${id}/`);\r\n  },\r\n\r\n  startExam: async (id: number) => {\r\n    return apiClient.post(`/mock-exams/${id}/start/`);\r\n  },\r\n\r\n  getExamSections: async (id: number) => {\r\n    return apiClient.get(`/mock-exams/${id}/sections/`);\r\n  },\r\n\r\n  submitSection: async (id: number, data: { section: string; answers: Record<string, string>; time_spent_seconds: number }) => {\r\n    return apiClient.post(`/mock-exams/${id}/submit_section/`, data);\r\n  },\r\n\r\n  submitExam: async (id: number) => {\r\n    return apiClient.post(`/mock-exams/${id}/submit_exam/`);\r\n  },\r\n\r\n  getMyAttempts: async () => {\r\n    return apiClient.get('/mock-exam-attempts/my_attempts/');\r\n  },\r\n\r\n  getAttempt: async (id: number) => {\r\n    return apiClient.get(`/mock-exam-attempts/${id}/`);\r\n  },\r\n\r\n  getExamStatistics: async () => {\r\n    return apiClient.get('/mock-exams/stats/');\r\n  },\r\n\r\n  // Bluebook-specific API methods\r\n  getExamAnalytics: async (examId: number) => {\r\n    return apiClient.get(`/mock-exams/${examId}/analytics/`);\r\n  },\r\n\r\n  getPerformanceTrends: async (params?: { time_range?: string; exam_type?: string }) => {\r\n    return apiClient.get('/mock-exams/performance_trends/', { params });\r\n  },\r\n\r\n  getWeakAreasAnalysis: async (examId?: number) => {\r\n    const url = examId ? `/mock-exams/${examId}/weak_areas/` : '/mock-exams/weak_areas/';\r\n    return apiClient.get(url);\r\n  },\r\n\r\n  getComparativeAnalysis: async (examId: number) => {\r\n    return apiClient.get(`/mock-exams/${examId}/comparative_analysis/`);\r\n  },\r\n\r\n  getScorePrediction: async (examId: number) => {\r\n    return apiClient.get(`/mock-exams/${examId}/score_prediction/`);\r\n  },\r\n\r\n  saveQuestionResponse: async (examId: number, data: {\r\n    question_id: number;\r\n    answer: string;\r\n    time_spent_seconds: number;\r\n    marked_for_review?: boolean;\r\n  }) => {\r\n    return apiClient.post(`/mock-exams/${examId}/save_response/`, data);\r\n  },\r\n\r\n  getRemainingTime: async (examId: number) => {\r\n    return apiClient.get(`/mock-exams/${examId}/remaining_time/`);\r\n  },\r\n\r\n  pauseExam: async (examId: number) => {\r\n    return apiClient.post(`/mock-exams/${examId}/pause/`);\r\n  },\r\n\r\n  resumeExam: async (examId: number) => {\r\n    return apiClient.post(`/mock-exams/${examId}/resume/`);\r\n  },\r\n\r\n  getAdaptiveRecommendations: async (examId: number) => {\r\n    return apiClient.get(`/mock-exams/${examId}/adaptive_recommendations/`);\r\n  },\r\n\r\n  exportResults: async (examId: number, format: 'pdf' | 'json' = 'pdf') => {\r\n    return apiClient.get(`/mock-exams/${examId}/export/`, { \r\n      params: { format },\r\n      responseType: 'blob'\r\n    });\r\n  },\r\n};\r\n\r\n// Flashcards API methods\r\nexport const flashcardsApi = {\r\n  getFlashcards: async (params?: {\r\n    subject?: string;\r\n    difficulty?: string;\r\n    search?: string;\r\n    limit?: number;\r\n  }) => {\r\n    return apiClient.get('/flashcards/', { params });\r\n  },\r\n\r\n  getFlashcard: async (id: number) => {\r\n    return apiClient.get(`/flashcards/${id}/`);\r\n  },\r\n\r\n  getProgress: async () => {\r\n    return apiClient.get('/flashcards/progress/');\r\n  },\r\n\r\n  getNextReview: async () => {\r\n    return apiClient.get('/flashcards/review/next/');\r\n  },\r\n\r\n  updateProgress: async (id: number, data: {\r\n    is_correct: boolean;\r\n    time_taken_seconds: number;\r\n  }) => {\r\n    return apiClient.post(`/flashcards/${id}/progress/`, data);\r\n  },\r\n\r\n  getReviewSession: async () => {\r\n    return apiClient.get('/flashcards/review/');\r\n  },\r\n};\r\n\r\n// Rankings API methods\r\nexport const rankingsApi = {\r\n  getLeaderboard: async (params?: { period_type?: string; limit?: number }) => {\r\n    return apiClient.get('/rankings/leaderboard/', { params });\r\n  },\r\n\r\n  getMyRankings: async () => {\r\n    return apiClient.get('/rankings/my_rankings/');\r\n  },\r\n\r\n  getRankingStats: async (params?: { period_type?: string }) => {\r\n    return apiClient.get('/rankings/stats/', { params });\r\n  },\r\n\r\n  updateRankings: async (data: { period_type: string; force_recalculate?: boolean }) => {\r\n    return apiClient.post('/rankings/update_rankings/', data);\r\n  },\r\n\r\n  getRankingHistory: async (params?: { student_id?: string; period_type?: string; limit?: number }) => {\r\n    return apiClient.get('/rankings/history/', { params });\r\n  },\r\n\r\n  getTopPerformers: async (params?: { period_type?: string; count?: number }) => {\r\n    return apiClient.get('/rankings/top_performers/', { params });\r\n  },\r\n};\r\n\r\n// Analytics API methods\r\nexport const analyticsApi = {\r\n  getMyProgress: async (params?: { start_date?: string; end_date?: string }) => {\r\n    return apiClient.get('/analytics/progress/my_progress/', { params });\r\n  },\r\n\r\n  getProgressChart: async (params?: { period?: string; metric?: string }) => {\r\n    return apiClient.get('/analytics/progress/progress_chart/', { params });\r\n  },\r\n\r\n  getMyWeakAreas: async () => {\r\n    return apiClient.get('/analytics/weak_areas/my_weak_areas/');\r\n  },\r\n\r\n  getMySessions: async (params?: { start_date?: string; end_date?: string }) => {\r\n    return apiClient.get('/analytics/study_sessions/my_sessions/', { params });\r\n  },\r\n\r\n  getStudentSummary: async () => {\r\n    return apiClient.get('/analytics/student_summary/');\r\n  },\r\n\r\n  getClassAnalytics: async (classId: number) => {\r\n    return apiClient.get(`/analytics/class_analytics/${classId}/`);\r\n  },\r\n\r\n  getDashboardStats: async () => {\r\n    return apiClient.get('/dashboard/stats/');\r\n  },\r\n  \r\n  getPerformanceTrends: async (params?: { period_type?: string }) => {\r\n    return apiClient.get('/analytics/performance_trends/', { params });\r\n  },\r\n\r\n  startStudySession: async (sessionType: string = 'practice') => {\r\n    return apiClient.post('/weak-areas/start_study_session/', { session_type: sessionType });\r\n  },\r\n\r\n  endStudySession: async (sessionId?: number) => {\r\n    return apiClient.post('/weak-areas/end_study_session/', sessionId ? { session_id: sessionId } : {});\r\n  },\r\n\r\n  getActiveSession: async () => {\r\n    return apiClient.get('/weak-areas/active_session/');\r\n  },\r\n};\r\n\r\n// Utility functions\r\nexport const setAuthTokens = (tokens: { access: string; refresh: string }) => {\r\n  localStorage.setItem('access_token', tokens.access);\r\n  localStorage.setItem('refresh_token', tokens.refresh);\r\n};\r\n\r\nexport const getAccessToken = (): string | null => {\r\n  return localStorage.getItem('access_token');\r\n};\r\n\r\nexport const getRefreshToken = (): string | null => {\r\n  return localStorage.getItem('refresh_token');\r\n};\r\n\r\nexport const isAuthenticated = (): boolean => {\r\n  return !!getAccessToken();\r\n};\r\n\r\n// Error handling\r\nexport const handleApiError = (error: any): string => {\r\n  if (error.response?.data) {\r\n    const data = error.response.data;\r\n    \r\n    // Handle field-specific errors\r\n    if (typeof data === 'object' && data !== null) {\r\n      if (data.detail) {\r\n        return data.detail;\r\n      }\r\n      \r\n      // Handle validation errors\r\n      const errors = Object.values(data).flat();\r\n      if (errors.length > 0) {\r\n        return errors[0] as string;\r\n      }\r\n    }\r\n    \r\n    return 'An error occurred';\r\n  }\r\n  \r\n  if (error.message) {\r\n    return error.message;\r\n  }\r\n  \r\n  return 'Network error occurred';\r\n};\r\n\r\n// Health check\r\nexport const healthCheck = async (): Promise<boolean> => {\r\n  try {\r\n    await apiClient.get('/health/');\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport default api;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\utils\\apiTester.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":48,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2172,2175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2172,2175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'classes' is assigned a value but never used.","line":90,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":90,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'homework' is assigned a value but never used.","line":100,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'questions' is assigned a value but never used.","line":110,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":110,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4990,4993],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4990,4993],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { healthCheck, authApi, classesApi, homeworkApi, questionBankApi } from '@/utils/api';\r\n\r\n// Test utility for API connections\r\nexport class ApiTester {\r\n  private static results: { [key: string]: boolean | string } = {};\r\n\r\n  static async runAllTests() {\r\n    console.log('ðŸ§ª Starting API Connection Tests...\\n');\r\n    \r\n    this.results = {};\r\n    \r\n    // Test 1: Backend Health Check\r\n    await this.testBackendHealth();\r\n    \r\n    // Test 2: Authentication (if we have test credentials)\r\n    await this.testAuthentication();\r\n    \r\n    // Test 3: API Endpoints (requires authentication)\r\n    await this.testApiEndpoints();\r\n    \r\n    // Print results\r\n    this.printResults();\r\n    \r\n    return this.results;\r\n  }\r\n\r\n  private static async testBackendHealth() {\r\n    console.log('ðŸ¥ Testing Backend Health...');\r\n    try {\r\n      const isHealthy = await healthCheck();\r\n      this.results['backend_health'] = isHealthy;\r\n      console.log(isHealthy ? 'âœ… Backend is healthy' : 'âŒ Backend is not responding');\r\n    } catch (error) {\r\n      this.results['backend_health'] = `Error: ${error}`;\r\n      console.log('âŒ Backend health check failed:', error);\r\n    }\r\n    console.log('');\r\n  }\r\n\r\n  private static async testAuthentication() {\r\n    console.log('ðŸ” Testing Authentication...');\r\n    \r\n    // Test with invalid credentials first\r\n    try {\r\n      await authApi.login('test@example.com', 'wrongpassword');\r\n      this.results['auth_invalid'] = false;\r\n      console.log('âŒ Invalid login should have failed');\r\n    } catch (error) {\r\n      this.results['auth_invalid'] = true;\r\n      console.log('âœ… Invalid login correctly rejected');\r\n    }\r\n    \r\n    // Test with valid credentials (if available)\r\n    const testEmail = process.env.NEXT_PUBLIC_TEST_EMAIL;\r\n    const testPassword = process.env.NEXT_PUBLIC_TEST_PASSWORD;\r\n    \r\n    if (testEmail && testPassword) {\r\n      try {\r\n        const response = await authApi.login(testEmail, testPassword);\r\n        this.results['auth_valid'] = true;\r\n        console.log('âœ… Valid login successful');\r\n        \r\n        // Store token for subsequent tests\r\n        localStorage.setItem('test_token', (response as any).access);\r\n      } catch (error) {\r\n        this.results['auth_valid'] = `Error: ${error}`;\r\n        console.log('âŒ Valid login failed:', error);\r\n      }\r\n    } else {\r\n      this.results['auth_valid'] = 'Skipped (no test credentials)';\r\n      console.log('â­ Skipped valid login test (no test credentials)');\r\n    }\r\n    console.log('');\r\n  }\r\n\r\n  private static async testApiEndpoints() {\r\n    console.log('ðŸ”— Testing API Endpoints...');\r\n    \r\n    const token = localStorage.getItem('test_token') || localStorage.getItem('access_token');\r\n    \r\n    if (!token) {\r\n      this.results['api_endpoints'] = 'Skipped (no auth token)';\r\n      console.log('â­ Skipped API endpoint tests (no authentication token)');\r\n      console.log('');\r\n      return;\r\n    }\r\n    \r\n    // Test Classes API\r\n    try {\r\n      const classes = await classesApi.getClasses();\r\n      this.results['classes_api'] = true;\r\n      console.log('âœ… Classes API working');\r\n    } catch (error) {\r\n      this.results['classes_api'] = `Error: ${error}`;\r\n      console.log('âŒ Classes API failed:', error);\r\n    }\r\n    \r\n    // Test Homework API\r\n    try {\r\n      const homework = await homeworkApi.getHomework();\r\n      this.results['homework_api'] = true;\r\n      console.log('âœ… Homework API working');\r\n    } catch (error) {\r\n      this.results['homework_api'] = `Error: ${error}`;\r\n      console.log('âŒ Homework API failed:', error);\r\n    }\r\n    \r\n    // Test Question Bank API\r\n    try {\r\n      const questions = await questionBankApi.getQuestions({ limit: 5 });\r\n      this.results['questionbank_api'] = true;\r\n      console.log('âœ… Question Bank API working');\r\n    } catch (error) {\r\n      this.results['questionbank_api'] = `Error: ${error}`;\r\n      console.log('âŒ Question Bank API failed:', error);\r\n    }\r\n    \r\n    console.log('');\r\n  }\r\n\r\n  private static printResults() {\r\n    console.log('ðŸ“Š Test Results Summary:');\r\n    console.log('========================');\r\n    \r\n    Object.entries(this.results).forEach(([test, result]) => {\r\n      const status = typeof result === 'boolean' ? (result ? 'âœ…' : 'âŒ') : 'âš ï¸';\r\n      console.log(`${status} ${test}: ${result}`);\r\n    });\r\n    \r\n    const passedTests = Object.values(this.results).filter(r => r === true).length;\r\n    const totalTests = Object.keys(this.results).length;\r\n    \r\n    console.log('\\nðŸ“ˆ Overall Status:');\r\n    console.log(`Passed: ${passedTests}/${totalTests} tests`);\r\n    console.log(`Success Rate: ${Math.round((passedTests / totalTests) * 100)}%`);\r\n    \r\n    if (passedTests === totalTests) {\r\n      console.log('ðŸŽ‰ All tests passed! API integration is working correctly.');\r\n    } else {\r\n      console.log('âš ï¸ Some tests failed. Please check the errors above.');\r\n    }\r\n  }\r\n\r\n  // Test specific API endpoint\r\n  static async testEndpoint(apiCall: () => Promise<any>, testName: string) {\r\n    console.log(`ðŸ§ª Testing ${testName}...`);\r\n    try {\r\n      const result = await apiCall();\r\n      console.log(`âœ… ${testName} successful`);\r\n      return { success: true, data: result };\r\n    } catch (error) {\r\n      console.log(`âŒ ${testName} failed:`, error);\r\n      return { success: false, error };\r\n    }\r\n  }\r\n\r\n  // Test network connectivity\r\n  static async testNetworkConnectivity() {\r\n    console.log('ðŸŒ Testing Network Connectivity...');\r\n    \r\n    try {\r\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api'}/health/`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      \r\n      if (response.ok) {\r\n        console.log('âœ… Network connectivity working');\r\n        return true;\r\n      } else {\r\n        console.log('âŒ Network connectivity failed:', response.status, response.statusText);\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.log('âŒ Network connectivity failed:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Test CORS configuration\r\n  static async testCorsConfiguration() {\r\n    console.log('ðŸŒ Testing CORS Configuration...');\r\n    \r\n    try {\r\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api'}/health/`, {\r\n        method: 'OPTIONS',\r\n        headers: {\r\n          'Origin': window.location.origin,\r\n          'Access-Control-Request-Method': 'GET',\r\n          'Access-Control-Request-Headers': 'Content-Type',\r\n        },\r\n      });\r\n      \r\n      const corsHeaders = {\r\n        'Access-Control-Allow-Origin': response.headers.get('Access-Control-Allow-Origin'),\r\n        'Access-Control-Allow-Methods': response.headers.get('Access-Control-Allow-Methods'),\r\n        'Access-Control-Allow-Headers': response.headers.get('Access-Control-Allow-Headers'),\r\n      };\r\n      \r\n      console.log('CORS Headers:', corsHeaders);\r\n      \r\n      if (corsHeaders['Access-Control-Allow-Origin'] === '*' || \r\n          corsHeaders['Access-Control-Allow-Origin'] === window.location.origin) {\r\n        console.log('âœ… CORS configuration working');\r\n        return true;\r\n      } else {\r\n        console.log('âš ï¸ CORS configuration may need adjustment');\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.log('âŒ CORS test failed:', error);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\n// Export for use in components\r\nexport default ApiTester;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\utils\\dateFixer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[81,84],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[81,84],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":2,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[87,90],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[87,90],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Helper function to fix dates in mock data\r\nexport const fixMockDates = (data: any): any => {\r\n  const currentYear = new Date().getFullYear();\r\n  const jsonString = JSON.stringify(data);\r\n  \r\n  // Replace all 2024 dates with 2025 dates\r\n  const fixedJson = jsonString.replace(/2024-/g, `${currentYear}-`);\r\n  \r\n  return JSON.parse(fixedJson);\r\n};\r\n\r\n// Get current date in YYYY-MM-DD format\r\nexport const getCurrentDate = (): string => {\r\n  return new Date().toISOString().split('T')[0];\r\n};\r\n\r\n// Get date X days from now\r\nexport const getFutureDate = (daysFromNow: number): string => {\r\n  const date = new Date();\r\n  date.setDate(date.getDate() + daysFromNow);\r\n  return date.toISOString().split('T')[0];\r\n};\r\n\r\n// Get date X days ago\r\nexport const getPastDate = (daysAgo: number): string => {\r\n  const date = new Date();\r\n  date.setDate(date.getDate() - daysAgo);\r\n  return date.toISOString().split('T')[0];\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\SAT_Fergana\\LMS_SATFergana\\frontend\\src\\utils\\helpers.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5883,5886],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5883,5886],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5893,5896],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5893,5896],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6204,6207],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6204,6207],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6214,6217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6214,6217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { clsx, type ClassValue } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\n// Date formatting utilities\r\nexport const formatDate = (date: string | Date): string => {\r\n  const d = new Date(date);\r\n  return d.toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n  });\r\n};\r\n\r\nexport const formatTime = (date: string | Date): string => {\r\n  const d = new Date(date);\r\n  return d.toLocaleTimeString('en-US', {\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  });\r\n};\r\n\r\nexport const formatDateTime = (date: string | Date): string => {\r\n  return `${formatDate(date)} at ${formatTime(date)}`;\r\n};\r\n\r\nexport const formatDuration = (minutes: number): string => {\r\n  if (minutes < 60) {\r\n    return `${minutes}m`;\r\n  }\r\n  const hours = Math.floor(minutes / 60);\r\n  const remainingMinutes = minutes % 60;\r\n  return remainingMinutes > 0 ? `${hours}h ${remainingMinutes}m` : `${hours}h`;\r\n};\r\n\r\n// Score formatting\r\nexport const formatScore = (score: number): string => {\r\n  return score.toLocaleString();\r\n};\r\n\r\nexport const formatPercentage = (value: number): string => {\r\n  return `${Math.round(value)}%`;\r\n};\r\n\r\n// SAT Score utilities\r\nexport const getSatScoreColor = (score: number): string => {\r\n  if (score >= 1400) return 'text-green-600';\r\n  if (score >= 1200) return 'text-blue-600';\r\n  if (score >= 1000) return 'text-yellow-600';\r\n  return 'text-red-600';\r\n};\r\n\r\nexport const getSatScoreLevel = (score: number): string => {\r\n  if (score >= 1400) return 'Excellent';\r\n  if (score >= 1200) return 'Good';\r\n  if (score >= 1000) return 'Average';\r\n  return 'Needs Improvement';\r\n};\r\n\r\n// Study streak utilities\r\nexport const getStreakColor = (days: number): string => {\r\n  if (days >= 30) return 'text-purple-600';\r\n  if (days >= 14) return 'text-blue-600';\r\n  if (days >= 7) return 'text-green-600';\r\n  if (days >= 3) return 'text-yellow-600';\r\n  return 'text-gray-600';\r\n};\r\n\r\nexport const getStreakMessage = (days: number): string => {\r\n  if (days === 0) return 'Start your streak today!';\r\n  if (days === 1) return 'Great start! Keep it going!';\r\n  if (days < 7) return `${days} day streak! Building momentum!`;\r\n  if (days < 14) return `${days} day streak! You're on fire!`;\r\n  if (days < 30) return `${days} day streak! Incredible consistency!`;\r\n  return `${days} day streak! You're a study legend!`;\r\n};\r\n\r\n// Time until exam utilities\r\nexport const getDaysUntilExam = (examDate: string): number => {\r\n  const exam = new Date(examDate);\r\n  const today = new Date();\r\n  const diffTime = exam.getTime() - today.getTime();\r\n  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n};\r\n\r\nexport const getExamUrgency = (days: number): { level: string; color: string } => {\r\n  if (days <= 7) return { level: 'Critical', color: 'text-red-600' };\r\n  if (days <= 30) return { level: 'High', color: 'text-orange-600' };\r\n  if (days <= 90) return { level: 'Medium', color: 'text-yellow-600' };\r\n  return { level: 'Low', color: 'text-green-600' };\r\n};\r\n\r\n// Subject utilities\r\nexport const getSubjectColor = (subject: string): string => {\r\n  switch (subject) {\r\n    case 'MATH':\r\n      return 'bg-blue-100 text-blue-800';\r\n    case 'READING':\r\n      return 'bg-green-100 text-green-800';\r\n    case 'WRITING':\r\n      return 'bg-purple-100 text-purple-800';\r\n    default:\r\n      return 'bg-gray-100 text-gray-800';\r\n  }\r\n};\r\n\r\nexport const getDifficultyColor = (difficulty: string): string => {\r\n  switch (difficulty) {\r\n    case 'EASY':\r\n      return 'bg-green-100 text-green-800';\r\n    case 'MEDIUM':\r\n      return 'bg-yellow-100 text-yellow-800';\r\n    case 'HARD':\r\n      return 'bg-red-100 text-red-800';\r\n    default:\r\n      return 'bg-gray-100 text-gray-800';\r\n  }\r\n};\r\n\r\n// Validation utilities\r\nexport const isValidEmail = (email: string): boolean => {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return emailRegex.test(email);\r\n};\r\n\r\nexport const isValidPassword = (password: string): boolean => {\r\n  return password.length >= 8;\r\n};\r\n\r\n// File utilities\r\nexport const formatFileSize = (bytes: number): string => {\r\n  if (bytes === 0) return '0 Bytes';\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n};\r\n\r\n// Array utilities\r\nexport const chunk = <T>(array: T[], size: number): T[][] => {\r\n  const chunks: T[][] = [];\r\n  for (let i = 0; i < array.length; i += size) {\r\n    chunks.push(array.slice(i, i + size));\r\n  }\r\n  return chunks;\r\n};\r\n\r\nexport const shuffle = <T>(array: T[]): T[] => {\r\n  const shuffled = [...array];\r\n  for (let i = shuffled.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\r\n  }\r\n  return shuffled;\r\n};\r\n\r\n// Local storage utilities\r\nexport const storage = {\r\n  get: <T>(key: string, defaultValue?: T): T | null => {\r\n    try {\r\n      const item = window.localStorage.getItem(key);\r\n      return item ? JSON.parse(item) : defaultValue || null;\r\n    } catch {\r\n      return defaultValue || null;\r\n    }\r\n  },\r\n\r\n  set: <T>(key: string, value: T): void => {\r\n    try {\r\n      window.localStorage.setItem(key, JSON.stringify(value));\r\n    } catch (error) {\r\n      console.error('Error saving to localStorage:', error);\r\n    }\r\n  },\r\n\r\n  remove: (key: string): void => {\r\n    try {\r\n      window.localStorage.removeItem(key);\r\n    } catch (error) {\r\n      console.error('Error removing from localStorage:', error);\r\n    }\r\n  },\r\n\r\n  clear: (): void => {\r\n    try {\r\n      window.localStorage.clear();\r\n    } catch (error) {\r\n      console.error('Error clearing localStorage:', error);\r\n    }\r\n  },\r\n};\r\n\r\n// Debounce utility\r\nexport const debounce = <T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let timeout: NodeJS.Timeout;\r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(() => func(...args), wait);\r\n  };\r\n};\r\n\r\n// Throttle utility\r\nexport const throttle = <T extends (...args: any[]) => any>(\r\n  func: T,\r\n  limit: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let inThrottle: boolean;\r\n  return (...args: Parameters<T>) => {\r\n    if (!inThrottle) {\r\n      func(...args);\r\n      inThrottle = true;\r\n      setTimeout(() => (inThrottle = false), limit);\r\n    }\r\n  };\r\n};\r\n","usedDeprecatedRules":[]}]
